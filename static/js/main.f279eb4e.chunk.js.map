{"version":3,"sources":["utils/txNotifier.ts","constants/contracts.js","constants/tokens.js","utils/web3.js","utils/storage.ts","utils/infura.js","constants/values.js","utils/number.ts","utils/pool.ts","components/NavBar/TotalBalance.tsx","components/NavBar/ConnectButton.tsx","components/NavBar/index.tsx","components/common/EpochBlock.tsx","components/HomePage/index.tsx","components/common/AddressBlock.tsx","components/common/BalanceBlock.tsx","components/common/MaxButton.tsx","components/common/PriceSection.tsx","components/common/Comment.tsx","components/common/Wrapper.tsx","components/common/CheckBox.tsx","components/Trade/Header.tsx","components/common/IconHeader.tsx","components/Trade/index.tsx","components/common/TextBlock.tsx","components/Wallet/Header.tsx","components/common/BigNumberInput.tsx","components/Wallet/WithdrawDeposit.tsx","components/Wallet/BondUnbond.tsx","components/Wallet/index.tsx","components/common/NumberBlock.tsx","components/EpochDetail/AdvanceEpoch.tsx","components/EpochDetail/Header.tsx","components/EpochDetail/index.tsx","components/CouponMarket/Header.tsx","components/CouponMarket/PurchaseCoupons.tsx","components/CouponMarket/PurchaseHistory.tsx","components/CouponMarket/ModalWarning.tsx","components/CouponMarket/index.tsx","components/Governance/Header.tsx","utils/gov.ts","components/Governance/ProposeCandidate.tsx","components/Governance/CandidateHistory.tsx","components/Governance/index.tsx","components/Candidate/Vote.tsx","components/Candidate/VoteHeader.tsx","components/Candidate/CommitHeader.tsx","components/Candidate/Commit.tsx","components/Candidate/index.tsx","components/Regulation/Header.tsx","components/Regulation/RegulationHistory.tsx","components/Regulation/index.tsx","components/Pool/WithdrawDeposit.tsx","components/Pool/BondUnbond.tsx","components/Pool/Header.tsx","components/Pool/Claim.tsx","components/Pool/Provide.tsx","components/Pool/Migrate.tsx","components/Pool/index.tsx","components/HomePageNoWeb3/index.tsx","App.tsx","serviceWorker.js","locales/i18n.js","index.tsx"],"names":["notify","v","console","log","DollarPool2","DollarPool3","DollarPool4","UNI","USDC","addr","decimals","symbol","PEN","PENS","testnetUSDCAbi","require","daoAbi","poolAbi","UINT256_MAX","connect","a","window","web3","Web3","ethereum","eth","getAccounts","addresses","length","enable","toLowerCase","checkConnectedAndGetAddress","approve","tokenAddr","spender","amt","account","oToken","Contract","methods","send","from","on","hash","advance","dao","daoContract","deposit","amount","BigNumber","toFixed","withdraw","bond","unbondUnderlying","purchaseCoupons","redeemCoupons","epoch","recordVote","candidate","voteType","vote","commit","depositPool","pool","callback","poolContract","withdrawPool","bondPool","unbondPool","unbond","claimPool","claim","providePool","provide","getPreference","key","defaultValue","localStorage","getItem","storePreference","value","setItem","MAX_UINT256","pow","minus","GOVERNANCE_QUORUM","GOVERNANCE_PROPOSAL_THRESHOLD","dollarAbi","undefined","getTokenBalance","token","tokenContract","balanceOf","call","getTokenTotalSupply","totalSupply","getTokenAllowance","allowance","getBalanceBonded","balanceOfBonded","getBalanceOfStaged","balanceOfStaged","getStatusOf","statusOf","getFluidUntil","fluidUntil","getLockedUntil","lockedUntil","getEpoch","getEpochTime","epochTime","getTotalDebt","totalDebt","getTotalRedeemable","totalRedeemable","getTotalCoupons","totalCoupons","getTotalBonded","totalBonded","getTotalStaged","totalStaged","getTotalBondedAt","totalBondedAt","getApproveFor","approveFor","getRejectFor","rejectFor","getStartFor","startFor","getPeriodFor","periodFor","getIsInitialized","isInitialized","getRecordedVote","recordedVote","getBalanceOfCoupons","balanceOfCoupons","getBatchBalanceOfCoupons","epochs","calls","map","Promise","all","getCouponsExpiration","couponsExpiration","getBatchCouponsExpiration","getCouponPremium","couponPremium","getImplementation","implementation","getPool","getCouponEpochs","purchaseP","getPastEvents","filter","fromBlock","transferP","to","bought","given","events","e","returnValues","couponAmount","concat","couponEpochs","reduce","event","prev","get","set","coupons","plus","Map","values","sort","b","getAllProposals","payload","prop","blockNumber","getAllRegulations","increaseP","decreaseP","neutralP","increase","decrease","neutral","type","data","getPoolStatusOf","getPoolBalanceOfBonded","getPoolBalanceOfStaged","getPoolBalanceOfRewarded","balanceOfRewarded","getPoolBalanceOfClaimable","balanceOfClaimable","getPoolTotalBonded","getPoolTotalRewarded","totalRewarded","getPoolTotalClaimable","totalClaimable","getPoolFluidUntil","getBlockNumber","bondP","unbondP","startEpoch","start","parseInt","toString","toBaseUnitBN","rawAmt","raw","base","decimalsBN","times","integerValue","toTokenUnitsBN","tokenAmount","tokenDecimals","digits","div","isPos","isZero","isPositive","ownership","balance","multipliedBy","dividedBy","formatBN","position","isLessThan","bnStr","includes","parts","split","i","pad","precision","ROUND_FLOOR","replace","delineate","formatMoney","n","toPrecision","Math","abs","Number","getPoolAddress","Error","getLegacyPoolAddress","poolAddress","TotalBalance","user","useState","totalBalance","setTotalBalance","useEffect","isCancelled","updateUserInfo","id","setInterval","clearInterval","esdBalance","stagedBalance","bondedBalance","pairBalancePENStr","pairTotalSupplyUNIStr","userUNIBalanceStr","userPoolBondedBalanceStr","userPoolStagedBalanceStr","userPoolRewardedBalanceStr","userPoolClaimableBalanceStr","userBalance","userStagedBalance","userBondedBalance","userUNIBalance","userPoolBondedBalance","userPoolStagedBalance","userPoolRewardedBalance","userPoolClaimableBalance","UNItoPEN","daoTotalBalance","poolTotalBalance","circulationBalance","style","fontSize","padding","fontWeight","lineHeight","fontFamily","ConnectButton","hasWeb3","setUser","useTranslation","t","i18n","useWallet","status","reset","isWeb3Connected","setIsWeb3Connected","connectWeb3","address","disconnectWeb3","display","flex","Box","width","onClick","marginRight","height","IconPower","textAlign","IdentityBadge","entity","Button","icon","IconConnect","label","disabled","LinkButton","title","isSelected","marginLeft","opacity","NavBar","history","useHistory","currentTheme","useTheme","page","setPage","listen","location","pathname","logoUrl","_name","borderTop","border","backgroundColor","maxWidth","paddingTop","push","src","alt","className","changeLanguage","EpochBlock","epochformatted","epochRemainder","floor","Date","now","epochMinute","MainButton","description","tag","Tag","HomePage","setEpochTime","setEpoch","epochStr","flexWrap","alignItems","flexBasis","flexGrow","AddressBlock","shorten","BalanceBlock","asset","suffix","integer","balanceBN","gte","tokens","MaxButton","ButtonBase","PriceSection","forceDisplay","amtBN","gt","toNumber","Comment","styled","MyCheckBox","text","checked","onCheck","theme","CheckBoxWrapper","Checkbox","onChange","margin","props","surfaceContentSecondary","TradePageHeader","pairBalancePEN","pairBalanceUSDC","uniswapPair","price","IconHeader","primary","href","UniswapPool","setPairBalancePEN","setPairBalanceUSDC","pairBalanceUSDCStr","TextBlock","STATUS_MAP","AccountPageHeader","accountPENBalance","accountPENSBalance","totalPENSSupply","accountStagedBalance","accountBondedBalance","accountStatus","unlocked","BigNumberInput","setter","adornment","TextInput","adornmentPosition","wide","isNegative","target","onBlur","WithdrawDeposit","depositAmount","setDepositAmount","withdrawAmount","setWithdrawAmount","heading","comparedTo","minWidth","IconCirclePlus","IconLock","isGreaterThan","IconCircleMinus","BondUnbond","staged","bonded","lockup","bondAmount","setBondAmount","unbondAmount","setUnbondAmount","IconCaution","Wallet","override","useParams","userPENBalance","setUserPENBalance","userPENAllowance","setUserPENAllowance","userPENSBalance","setUserPENSBalance","setTotalPENSSupply","setUserStagedBalance","setUserBondedBalance","userStatus","setUserStatus","userStatusUnlocked","setUserStatusUnlocked","setLockup","esdAllowance","esdsBalance","esdsSupply","fluidUntilStr","lockedUntilStr","max","NumberBlock","num","numNum","AdvanceEpoch","factorPrice","spotPrice","twapPrice","nextEpochs","twapPrices","EpochPageHeader","epochTimes","ONE_COUPON","EpochDetail","setCouponPremium","setDebt","setTotalSupply","setEpochTimes","epochTimeStr","debtStr","totalSupplyStr","couponPremiumStr","CouponMarketHeader","debt","supply","premium","redeemable","PurchaseCoupons","purchaseAmount","setPurchaseAmount","setPremium","updatePremium","lte","purchaseAmountBase","premiumFormatted","maxPurchaseAmount","PurchaseHistory","hideRedeemed","setEpochs","initialized","setInitialized","epochsFromEvents","epochNumbers","couponsExpirations","expiration","DataView","fields","entries","entriesPerPage","onPageChange","renderEntry","ModalWarning","storedShowWarning","showWarning","setShowWarning","Modal","visible","closeButton","color","warning","warningSurfaceContent","CouponMarket","storedHideRedeemed","setBalance","setAllowance","setSupply","setCoupons","setRedeemable","setHideRedeemed","balanceStr","allowanceStr","supplyStr","couponsStr","redeemableStr","alignSelf","CheckBox","GovernanceHeader","stake","totalStake","proposalStatus","period","reject","total","canPropose","plausibleCandidate","test","ProposeCandidate","setCandidate","IconToken","formatProposals","proposals","currentTotalStake","p","initializeds","approves","rejecteds","at","supplyAts","index","CandidateHistory","setProposals","allProposals","formattedProposals","proposal","IconRight","Governance","setStake","setTotalStake","setImplementation","statusStr","stakeStr","totalStakeStr","implementationStr","VOTE_TYPE_MAP","Vote","IconRotateLeft","IconCircleCheck","IconProhibited","participation","dividedToIntegerBy","VoteHeader","showParticipation","CommitHeader","periodEpoch","Commit","approved","s","IconUpload","Candidate","setApproveFor","setRejectFor","setVote","setStatus","userStake","setUserStake","setStartEpoch","setPeriodEpoch","voteStr","userStakeStr","approveForStr","rejectForStr","startForStr","periodForStr","epochN","startN","periodN","endsAfter","RegulationHeader","poolLiquidity","poolRewarded","poolClaimable","legacyPoolRewarded","legacyPoolClaimable","daoTotalSupply","poolTotalSupply","legacyPoolTotalSupply","circulatingSupply","Distribution","items","item","percentage","formatPrice","formatDeltaRedeemable","newRedeemable","formatDeltaDebt","lessDebt","newDebt","formatDeltaBonded","newBonded","RegulationHistory","regulations","setRegulations","allRegulations","Regulation","setTotalBonded","setTotalStaged","setTotalRedeemable","setPoolLiquidity","poolTotalRewarded","setPoolTotalRewarded","poolTotalClaimable","setPoolTotalClaimable","legacyPoolTotalRewarded","setLegacyPoolTotalRewarded","legacyPoolTotalClaimable","setLegacyPoolTotalClaimable","setTotalDebt","setTotalCoupons","legacyPoolAddress","totalBondedStr","totalStagedStr","totalRedeemableStr","poolLiquidityStr","poolTotalRewardedStr","poolTotalClaimableStr","legacyPoolTotalRewardedStr","legacyPoolTotalClaimableStr","totalDebtStr","totalCouponsStr","PoolPageHeader","accountUNIBalance","accountRewardedPENBalance","accountClaimablePENBalance","poolTotalBonded","accountPoolStatus","Claim","claimable","claimAmount","setClaimAmount","IconArrowDown","Provide","rewarded","userUSDCBalance","userUSDCAllowance","provideAmount","setProvideAmount","usdcAmount","setUsdcAmount","USDCToPENRatio","onChangeAmountPEN","amountPEN","amountPENBN","amountPENBU","newAmountUSDC","IconArrowUp","Migrate","isRewardNegative","unbonded","setUnbonded","withdrawn","setWithdrawn","claimed","setClaimed","Pool","setPoolAddress","setPoolTotalBonded","setUserUNIBalance","userUNIAllowance","setUserUNIAllowance","setUserUSDCBalance","setUserUSDCAllowance","userRewardedBalance","setUserRewardedBalance","userClaimableBalance","setUserClaimableBalance","legacyUserStagedBalance","setLegacyUserStagedBalance","legacyUserBondedBalance","setLegacyUserBondedBalance","legacyUserRewardedBalance","setLegacyUserRewardedBalance","legacyUserClaimableBalance","setLegacyUserClaimableBalance","legacyUserStatus","setLegacyUserStatus","poolAddressStr","poolTotalBondedStr","usdcBalance","usdcAllowance","rewardedBalance","claimableBalance","legacyStagedBalance","legacyBondedBalance","legacyRewardedBalance","legacyClaimableBalance","legacyStatus","pairPENBalance","pairUSDCBalance","isRewardedNegative","hasLegacyBalance","HomePageNoWeb3","App","storedTheme","setHasWeb3","chainId","connectors","walletconnect","rpcUrl","walletlink","url","appName","appLogoUrl","Main","assetsUrl","process","layout","Layout","path","Trade","Boolean","hostname","match","resources","en","translation","sch","use","initReactI18next","init","lng","keySeparator","interpolation","escapeValue","Moment","locale","momentLocalizer","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"mh6DAAaA,EACL,SAACC,GAAD,OAAOC,QAAQC,IAAIF,ICGdG,EAAc,6CACdC,EAAc,6CACdC,EAAc,6CCNdC,EACL,6CADKA,EAED,GAICC,EAAO,CAClBC,KAAM,6CACNC,SAAU,EACVC,OAAQ,QAGGC,EACL,6CADKA,EAED,GAICC,EACL,6CADKA,EAED,GCVNC,GADmBC,EAAQ,KACVA,EAAQ,MACzBC,EAASD,EAAQ,KACjBE,EAAUF,EAAQ,KAGlBG,EAAc,qEAUPC,EAAO,uCAAG,4BAAAC,EAAA,6DACrBC,OAAOC,KAAO,IAAIC,IAAKF,OAAOG,UADT,SAECH,OAAOC,KAAKG,IAAIC,cAFjB,WAEjBC,EAFiB,QAGNC,OAHM,0CAKCP,OAAOG,SAASK,SALjB,OAKjBF,EALiB,gEAOjBzB,QAAQC,IAAR,MAPiB,mBAQV,GARU,iCAYdwB,EAAUC,OAASD,EAAU,GAAGG,cAAgB,MAZlC,0DAAH,qDAgBPC,EAA2B,uCAAG,4BAAAX,EAAA,sEACnBC,OAAOC,KAAKG,IAAIC,cADG,WACrCC,EADqC,QAE1BC,OAF0B,0CAInBP,OAAOG,SAASK,SAJG,OAIrCF,EAJqC,0FASlCA,EAAU,IATwB,0DAAH,qDAgB3BK,EAAO,uCAAG,WAAOC,EAAWC,GAAlB,+BAAAd,EAAA,6DAA2Be,EAA3B,+BAAiCjB,EAAjC,SACCa,IADD,cACfK,EADe,OAEfC,EAAS,IAAIhB,OAAOC,KAAKG,IAAIa,SAASxB,EAAgBmB,GAFvC,SAGfI,EAAOE,QACVP,QAAQE,EAASC,GACjBK,KAAK,CAAEC,KAAML,IACbM,GAAG,mBAAmB,SAACC,GACtB3C,EAAY2C,MAPK,2CAAH,wDAkHPC,EAAO,uCAAG,WAAOC,GAAP,iBAAAzB,EAAA,sEACCW,IADD,cACfK,EADe,OAEfU,EAAc,IAAIzB,OAAOC,KAAKG,IAAIa,SAAStB,EAAQ6B,GAFpC,SAGfC,EAAYP,QACfK,UACAJ,KAAK,CACJC,KAAML,IAEPM,GAAG,mBAAmB,SAACC,GACtB3C,EAAY2C,MATK,2CAAH,sDAaPI,EAAO,uCAAG,WAAOF,EAAKG,GAAZ,iBAAA5B,EAAA,sEACCW,IADD,cACfK,EADe,OAEfU,EAAc,IAAIzB,OAAOC,KAAKG,IAAIa,SAAStB,EAAQ6B,GAFpC,SAGfC,EAAYP,QACfQ,QAAQ,IAAIE,IAAUD,GAAQE,WAC9BV,KAAK,CACJC,KAAML,IAEPM,GAAG,mBAAmB,SAACC,GACtB3C,EAAY2C,MATK,2CAAH,wDAaPQ,EAAQ,uCAAG,WAAON,EAAKG,GAAZ,iBAAA5B,EAAA,sEACAW,IADA,cAChBK,EADgB,OAEhBU,EAAc,IAAIzB,OAAOC,KAAKG,IAAIa,SAAStB,EAAQ6B,GAFnC,SAGhBC,EAAYP,QACfY,SAAS,IAAIF,IAAUD,GAAQE,WAC/BV,KAAK,CACJC,KAAML,IAEPM,GAAG,mBAAmB,SAACC,GACtB3C,EAAY2C,MATM,2CAAH,wDAaRS,EAAI,uCAAG,WAAOP,EAAKG,GAAZ,iBAAA5B,EAAA,sEACIW,IADJ,cACZK,EADY,OAEZU,EAAc,IAAIzB,OAAOC,KAAKG,IAAIa,SAAStB,EAAQ6B,GAFvC,SAGZC,EAAYP,QACfa,KAAK,IAAIH,IAAUD,GAAQE,WAC3BV,KAAK,CACJC,KAAML,IAEPM,GAAG,mBAAmB,SAACC,GACtB3C,EAAY2C,MATE,2CAAH,wDA0BJU,EAAgB,uCAAG,WAAOR,EAAKG,GAAZ,iBAAA5B,EAAA,sEACRW,IADQ,cACxBK,EADwB,OAExBU,EAAc,IAAIzB,OAAOC,KAAKG,IAAIa,SAAStB,EAAQ6B,GAF3B,SAGxBC,EAAYP,QACfc,iBAAiB,IAAIJ,IAAUD,GAAQE,WACvCV,KAAK,CACJC,KAAML,IAEPM,GAAG,mBAAmB,SAACC,GACtB3C,EAAY2C,MATc,2CAAH,wDAahBW,EAAe,uCAAG,WAAOT,EAAKG,GAAZ,iBAAA5B,EAAA,sEACPW,IADO,cACvBK,EADuB,OAEvBU,EAAc,IAAIzB,OAAOC,KAAKG,IAAIa,SAAStB,EAAQ6B,GAF5B,SAGvBC,EAAYP,QACfe,gBAAgB,IAAIL,IAAUD,GAAQE,WACtCV,KAAK,CACJC,KAAML,IAEPM,GAAG,mBAAmB,SAACC,GACtB3C,EAAY2C,MATa,2CAAH,wDAafY,EAAa,uCAAG,WAAOV,EAAKW,EAAOR,GAAnB,iBAAA5B,EAAA,sEACLW,IADK,cACrBK,EADqB,OAErBU,EAAc,IAAIzB,OAAOC,KAAKG,IAAIa,SAAStB,EAAQ6B,GAF9B,SAGrBC,EAAYP,QACfgB,cAAcC,EAAO,IAAIP,IAAUD,GAAQE,WAC3CV,KAAK,CACJC,KAAML,IAEPM,GAAG,mBAAmB,SAACC,GACtB3C,EAAY2C,MATW,2CAAH,0DAabc,EAAU,uCAAG,WAAOZ,EAAKa,EAAWC,GAAvB,iBAAAvC,EAAA,sEACFW,IADE,cAClBK,EADkB,OAElBU,EAAc,IAAIzB,OAAOC,KAAKG,IAAIa,SAAStB,EAAQ6B,GAFjC,SAGlBC,EAAYP,QACfqB,KAAKF,EAAWC,GAChBnB,KAAK,CACJC,KAAML,IAEPM,GAAG,mBAAmB,SAACC,GACtB3C,EAAY2C,MATQ,2CAAH,0DAaVkB,EAAM,uCAAG,WAAOhB,EAAKa,GAAZ,iBAAAtC,EAAA,sEACEW,IADF,cACdK,EADc,OAEdU,EAAc,IAAIzB,OAAOC,KAAKG,IAAIa,SAAStB,EAAQ6B,GAFrC,SAGdC,EAAYP,QACfsB,OAAOH,GACPlB,KAAK,CACJC,KAAML,IAEPM,GAAG,mBAAmB,SAACC,GACtB3C,EAAY2C,MATI,2CAAH,wDAcNmB,EAAW,uCAAG,WAAOC,EAAMf,EAAQgB,GAArB,iBAAA5C,EAAA,sEACHW,IADG,cACnBK,EADmB,OAEnB6B,EAAe,IAAI5C,OAAOC,KAAKG,IAAIa,SAASrB,EAAS8C,GAFlC,SAGnBE,EAAa1B,QAChBQ,QAAQ,IAAIE,IAAUD,GAAQE,WAC9BV,KAAK,CACJC,KAAML,IAEPM,GAAG,mBAAmB,SAACC,GACtB3C,EAAY2C,GACZqB,EAASrB,MAVY,2CAAH,0DAcXuB,EAAY,uCAAG,WAAOH,EAAMf,EAAQgB,GAArB,iBAAA5C,EAAA,sEACJW,IADI,cACpBK,EADoB,OAEpB6B,EAAe,IAAI5C,OAAOC,KAAKG,IAAIa,SAASrB,EAAS8C,GAFjC,SAGpBE,EAAa1B,QAChBY,SAAS,IAAIF,IAAUD,GAAQE,WAC/BV,KAAK,CACJC,KAAML,IAEPM,GAAG,mBAAmB,SAACC,GACtB3C,EAAY2C,GACZqB,EAASrB,MAVa,2CAAH,0DAcZwB,EAAQ,uCAAG,WAAOJ,EAAMf,EAAQgB,GAArB,iBAAA5C,EAAA,sEACAW,IADA,cAChBK,EADgB,OAEhB6B,EAAe,IAAI5C,OAAOC,KAAKG,IAAIa,SAASrB,EAAS8C,GAFrC,SAGhBE,EAAa1B,QAChBa,KAAK,IAAIH,IAAUD,GAAQE,WAC3BV,KAAK,CACJC,KAAML,IAEPM,GAAG,mBAAmB,SAACC,GACtB3C,EAAY2C,GACZqB,EAASrB,MAVS,2CAAH,0DAcRyB,EAAU,uCAAG,WAAOL,EAAMf,EAAQgB,GAArB,iBAAA5C,EAAA,sEACFW,IADE,cAClBK,EADkB,OAElB6B,EAAe,IAAI5C,OAAOC,KAAKG,IAAIa,SAASrB,EAAS8C,GAFnC,SAGlBE,EAAa1B,QAChB8B,OAAO,IAAIpB,IAAUD,GAAQE,WAC7BV,KAAK,CACJC,KAAML,IAEPM,GAAG,mBAAmB,SAACC,GACtB3C,EAAY2C,GACZqB,EAASrB,MAVW,2CAAH,0DAcV2B,EAAS,uCAAG,WAAOP,EAAMf,EAAQgB,GAArB,iBAAA5C,EAAA,sEACDW,IADC,cACjBK,EADiB,OAEjB6B,EAAe,IAAI5C,OAAOC,KAAKG,IAAIa,SAASrB,EAAS8C,GAFpC,SAGjBE,EAAa1B,QAChBgC,MAAM,IAAItB,IAAUD,GAAQE,WAC5BV,KAAK,CACJC,KAAML,IAEPM,GAAG,mBAAmB,SAACC,GACtB3C,EAAY2C,GACZqB,EAASrB,MAVU,2CAAH,0DAcT6B,EAAW,uCAAG,WAAOT,EAAMf,EAAQgB,GAArB,iBAAA5C,EAAA,sEACHW,IADG,cACnBK,EADmB,OAEnB6B,EAAe,IAAI5C,OAAOC,KAAKG,IAAIa,SAASrB,EAAS8C,GAFlC,SAGnBE,EAAa1B,QAChBkC,QAAQ,IAAIxB,IAAUD,GAAQE,WAC9BV,KAAK,CACJC,KAAML,IAEPM,GAAG,mBAAmB,SAACC,GACtB3C,EAAY2C,GACZqB,EAASrB,MAVY,2CAAH,0DC/WjB,SAAS+B,EAAcC,EAAYC,GACxC,OAAOC,aAAaC,QAAQH,IAAQC,EAQ/B,SAASG,GAAgBJ,EAAYK,GAC1CH,aAAaI,QAAQN,EAAKK,G,ICFxB1D,G,8FCVS4D,GAAc,IAAIjC,IAAU,GAAGkC,IAAI,KAAKC,MAAM,GAC9CC,GAAoB,IAAIpC,IAAU,QAClCqC,GAAgC,IAAIrC,IAAU,SDErDsC,GAAYxE,EAAQ,KACpBC,GAASD,EAAQ,KACjBE,GAAUF,EAAQ,KACCA,EAAQ,KACVA,EAAQ,UAIPyE,IAApBnE,OAAOG,WAETF,GAAO,IAAIC,IAAKC,WASX,IAAMiE,GAAe,uCAAG,WAAOC,EAAOtD,GAAd,eAAAhB,EAAA,yDACb,KAAZgB,EADyB,yCACF,KADE,cAEvBuD,EAAgB,IAAIrE,GAAKG,IAAIa,SAASiD,GAAWG,GAF1B,kBAGtBC,EAAcpD,QAAQqD,UAAUxD,GAASyD,QAHnB,2CAAH,wDAMfC,GAAmB,uCAAG,WAAOJ,GAAP,eAAAtE,EAAA,6DAC3BuE,EAAgB,IAAIrE,GAAKG,IAAIa,SAASiD,GAAWG,GADtB,kBAE1BC,EAAcpD,QAAQwD,cAAcF,QAFV,2CAAH,sDAYnBG,GAAiB,uCAAG,WAAON,EAAOtD,EAASF,GAAvB,eAAAd,EAAA,6DACzBuE,EAAgB,IAAIrE,GAAKG,IAAIa,SAASiD,GAAWG,GADxB,kBAExBC,EAAcpD,QAAQ0D,UAAU7D,EAASF,GAAS2D,QAF1B,2CAAH,0DAajBK,GAAgB,uCAAG,WAAOrD,EAAKT,GAAZ,eAAAhB,EAAA,yDACd,KAAZgB,EAD0B,yCACH,KADG,cAExBU,EAAc,IAAIxB,GAAKG,IAAIa,SAAStB,GAAQ6B,GAFpB,kBAGvBC,EAAYP,QAAQ4D,gBAAgB/D,GAASyD,QAHtB,2CAAH,wDAYhBO,GAAkB,uCAAG,WAAOvD,EAAKT,GAAZ,eAAAhB,EAAA,6DAC1B0B,EAAc,IAAIxB,GAAKG,IAAIa,SAAStB,GAAQ6B,GADlB,kBAEzBC,EAAYP,QAAQ8D,gBAAgBjE,GAASyD,QAFpB,2CAAH,wDAWlBS,GAAW,uCAAG,WAAOzD,EAAKT,GAAZ,eAAAhB,EAAA,6DACnB0B,EAAc,IAAIxB,GAAKG,IAAIa,SAAStB,GAAQ6B,GADzB,kBAElBC,EAAYP,QAAQgE,SAASnE,GAASyD,QAFpB,2CAAH,wDAWXW,GAAa,uCAAG,WAAO3D,EAAKT,GAAZ,eAAAhB,EAAA,6DACrB0B,EAAc,IAAIxB,GAAKG,IAAIa,SAAStB,GAAQ6B,GADvB,kBAEpBC,EAAYP,QAAQkE,WAAWrE,GAASyD,QAFpB,2CAAH,wDAWba,GAAc,uCAAG,WAAO7D,EAAKT,GAAZ,eAAAhB,EAAA,6DACtB0B,EAAc,IAAIxB,GAAKG,IAAIa,SAAStB,GAAQ6B,GADtB,kBAErBC,EAAYP,QAAQoE,YAAYvE,GAASyD,QAFpB,2CAAH,wDAUde,GAAQ,uCAAG,WAAO/D,GAAP,eAAAzB,EAAA,6DAChB0B,EAAc,IAAIxB,GAAKG,IAAIa,SAAStB,GAAQ6B,GAD5B,kBAEfC,EAAYP,QAAQiB,QAAQqC,QAFb,2CAAH,sDAURgB,GAAY,uCAAG,WAAOhE,GAAP,eAAAzB,EAAA,6DACpB0B,EAAc,IAAIxB,GAAKG,IAAIa,SAAStB,GAAQ6B,GADxB,kBAEnBC,EAAYP,QAAQuE,YAAYjB,QAFb,2CAAH,sDAUZkB,GAAY,uCAAG,WAAOlE,GAAP,eAAAzB,EAAA,6DACpB0B,EAAc,IAAIxB,GAAKG,IAAIa,SAAStB,GAAQ6B,GADxB,kBAEnBC,EAAYP,QAAQyE,YAAYnB,QAFb,2CAAH,sDAUZoB,GAAkB,uCAAG,WAAOpE,GAAP,eAAAzB,EAAA,6DAC1B0B,EAAc,IAAIxB,GAAKG,IAAIa,SAAStB,GAAQ6B,GADlB,kBAEzBC,EAAYP,QAAQ2E,kBAAkBrB,QAFb,2CAAH,sDAUlBsB,GAAe,uCAAG,WAAOtE,GAAP,eAAAzB,EAAA,6DACvB0B,EAAc,IAAIxB,GAAKG,IAAIa,SAAStB,GAAQ6B,GADrB,kBAEtBC,EAAYP,QAAQ6E,eAAevB,QAFb,2CAAH,sDAUfwB,GAAc,uCAAG,WAAOxE,GAAP,eAAAzB,EAAA,6DACtB0B,EAAc,IAAIxB,GAAKG,IAAIa,SAAStB,GAAQ6B,GADtB,kBAErBC,EAAYP,QAAQ+E,cAAczB,QAFb,2CAAH,sDAUd0B,GAAc,uCAAG,WAAO1E,GAAP,eAAAzB,EAAA,6DACtB0B,EAAc,IAAIxB,GAAKG,IAAIa,SAAStB,GAAQ6B,GADtB,kBAErBC,EAAYP,QAAQiF,cAAc3B,QAFb,2CAAH,sDAWd4B,GAAgB,uCAAG,WAAO5E,EAAKW,GAAZ,eAAApC,EAAA,6DACxB0B,EAAc,IAAIxB,GAAKG,IAAIa,SAAStB,GAAQ6B,GADpB,kBAEvBC,EAAYP,QAAQmF,cAAclE,GAAOqC,QAFlB,2CAAH,wDAWhB8B,GAAa,uCAAG,WAAO9E,EAAKa,GAAZ,eAAAtC,EAAA,6DACrB0B,EAAc,IAAIxB,GAAKG,IAAIa,SAAStB,GAAQ6B,GADvB,kBAEpBC,EAAYP,QAAQqF,WAAWlE,GAAWmC,QAFtB,2CAAH,wDAWbgC,GAAY,uCAAG,WAAOhF,EAAKa,GAAZ,eAAAtC,EAAA,6DACpB0B,EAAc,IAAIxB,GAAKG,IAAIa,SAAStB,GAAQ6B,GADxB,kBAEnBC,EAAYP,QAAQuF,UAAUpE,GAAWmC,QAFtB,2CAAH,wDAWZkC,GAAW,uCAAG,WAAOlF,EAAKa,GAAZ,eAAAtC,EAAA,6DACnB0B,EAAc,IAAIxB,GAAKG,IAAIa,SAAStB,GAAQ6B,GADzB,kBAElBC,EAAYP,QAAQyF,SAAStE,GAAWmC,QAFtB,2CAAH,wDAWXoC,GAAY,uCAAG,WAAOpF,EAAKa,GAAZ,eAAAtC,EAAA,6DACpB0B,EAAc,IAAIxB,GAAKG,IAAIa,SAAStB,GAAQ6B,GADxB,kBAEnBC,EAAYP,QAAQ2F,UAAUxE,GAAWmC,QAFtB,2CAAH,wDAWZsC,GAAgB,uCAAG,WAAOtF,EAAKa,GAAZ,eAAAtC,EAAA,6DACxB0B,EAAc,IAAIxB,GAAKG,IAAIa,SAAStB,GAAQ6B,GADpB,kBAEvBC,EAAYP,QAAQ6F,cAAc1E,GAAWmC,QAFtB,2CAAH,wDAYhBwC,GAAe,uCAAG,WAAOxF,EAAKT,EAASsB,GAArB,eAAAtC,EAAA,6DACvB0B,EAAc,IAAIxB,GAAKG,IAAIa,SAAStB,GAAQ6B,GADrB,kBAEtBC,EAAYP,QAAQ+F,aAAalG,EAASsB,GAAWmC,QAF/B,2CAAH,0DAYf0C,GAAmB,uCAAG,WAAO1F,EAAKT,EAASoB,GAArB,eAAApC,EAAA,6DAC3B0B,EAAc,IAAIxB,GAAKG,IAAIa,SAAStB,GAAQ6B,GADjB,kBAE1BC,EAAYP,QAAQiG,iBAAiBpG,EAASoB,GAAOqC,QAF3B,2CAAH,0DAYnB4C,GAAwB,uCAAG,WAAO5F,EAAKT,EAASsG,GAArB,eAAAtH,EAAA,6DAChCuH,EAAQD,EAAOE,KAAI,SAACpF,GAAD,OAAW+E,GAAoB1F,EAAKT,EAASoB,MADhC,kBAE/BqF,QAAQC,IAAIH,IAFmB,2CAAH,0DAsBxBI,GAAoB,uCAAG,WAAOlG,EAAKW,GAAZ,eAAApC,EAAA,6DAC5B0B,EAAc,IAAIxB,GAAKG,IAAIa,SAAStB,GAAQ6B,GADhB,kBAE3BC,EAAYP,QAAQyG,kBAAkBxF,GAAOqC,QAFlB,2CAAH,wDAWpBoD,GAAyB,uCAAG,WAAOpG,EAAK6F,GAAZ,eAAAtH,EAAA,6DACjCuH,EAAQD,EAAOE,KAAI,SAACpF,GAAD,OAAWuF,GAAqBlG,EAAKW,MADvB,kBAEhCqF,QAAQC,IAAIH,IAFoB,2CAAH,wDAWzBO,GAAgB,uCAAG,WAAOrG,EAAKG,GAAZ,eAAA5B,EAAA,6DACxB0B,EAAc,IAAIxB,GAAKG,IAAIa,SAAStB,GAAQ6B,GADpB,kBAEvBC,EAAYP,QAAQ4G,cAAc,IAAIlG,IAAUD,GAAQE,WAAW2C,QAF5C,2CAAH,wDAUhBuD,GAAiB,uCAAG,WAAOvG,GAAP,eAAAzB,EAAA,6DACzB0B,EAAc,IAAIxB,GAAKG,IAAIa,SAAStB,GAAQ6B,GADnB,kBAExBC,EAAYP,QAAQ8G,iBAAiBxD,QAFb,2CAAH,sDAUjByD,GAAO,uCAAG,WAAOzG,GAAP,eAAAzB,EAAA,6DACf0B,EAAc,IAAIxB,GAAKG,IAAIa,SAAStB,GAAQ6B,GAD7B,kBAEdC,EAAYP,QAAQwB,OAAO8B,QAFb,2CAAH,sDAWP0D,GAAe,uCAAG,WAAO1G,EAAKT,GAAZ,+BAAAhB,EAAA,6DACvB0B,EAAc,IAAIxB,GAAKG,IAAIa,SAAStB,GAAQ6B,GAC5C2G,EAAY1G,EAAY2G,cAAc,iBAAkB,CAC5DC,OAAQ,CAAEtH,WACVuH,UAAW,IAEPC,EAAY9G,EAAY2G,cAAc,iBAAkB,CAC5DC,OAAQ,CAAEG,GAAIzH,GACduH,UAAW,IARgB,SAUCd,QAAQC,IAAI,CAACU,EAAWI,IAVzB,0CAUtBE,EAVsB,KAUdC,EAVc,KAWvBC,EAASF,EAAOlB,KAAI,SAACqB,GAAD,MAAQ,CAACzG,MAAOyG,EAAEC,aAAa1G,MAAOR,OAAQiH,EAAEC,aAAaC,iBACpFC,OAAOL,EAAMnB,KAAI,SAACqB,GAAD,MAAQ,CAACzG,MAAOyG,EAAEC,aAAa1G,MAAOR,OAAQ,OAE5DqH,EAduB,aAexBL,EAAOM,QACR,SAAC1B,EAAK2B,GAAW,IACP/G,EAAkB+G,EAAlB/G,MAAOR,EAAWuH,EAAXvH,OACTwH,EAAO5B,EAAI6B,IAAIjH,GAQrB,OANIgH,EACF5B,EAAI8B,IAAIlH,EAAO,CAAEA,QAAOmH,QAASH,EAAKG,QAAQC,KAAK,IAAI3H,IAAUD,MAEjE4F,EAAI8B,IAAIlH,EAAO,CAAEA,QAAOmH,QAAS,IAAI1H,IAAUD,KAG1C4F,IAET,IAAIiC,KACJC,UA7ByB,kBAgCtBT,EAAaU,MAAK,SAAC3J,EAAG4J,GAAJ,OAAU5J,EAAI4J,MAhCV,4CAAH,wDAwCfC,GAAe,uCAAG,WAAOpI,GAAP,iBAAAzB,EAAA,6DACvB0B,EAAc,IAAIxB,GAAKG,IAAIa,SAAStB,GAAQ6B,GADrB,SAENC,EAAY2G,cAAc,WAAY,CAC3DE,UAAW,IAHgB,cAEvBuB,EAFuB,OAIzBtC,KAAI,SAAC2B,GACP,IAAMY,EAAOZ,EAAML,aAEnB,OADAiB,EAAKC,YAAcb,EAAMa,YAClBD,KAPoB,kBAStBD,EAAQH,MAAK,SAAC3J,EAAG4J,GAAJ,OAAUA,EAAEI,YAAchK,EAAEgK,gBATnB,2CAAH,sDAiBfC,GAAiB,uCAAG,WAAOxI,GAAP,iCAAAzB,EAAA,6DACzB0B,EAAc,IAAIxB,GAAKG,IAAIa,SAAStB,GAAQ6B,GAC5CyI,EAAYxI,EAAY2G,cAAc,iBAAkB,CAAEE,UAAW,IACrE4B,EAAYzI,EAAY2G,cAAc,iBAAkB,CAAEE,UAAW,IACrE6B,EAAW1I,EAAY2G,cAAc,gBAAiB,CAAEE,UAAW,IAJ1C,SAMad,QAAQC,IAAI,CAACwC,EAAWC,EAAWC,IANhD,0CAMxBC,EANwB,KAMdC,EANc,KAMJC,EANI,KAQzB3B,EAASyB,EAAS7C,KAAI,SAACqB,GAAD,MAAQ,CAAE2B,KAAM,WAAYC,KAAM5B,EAAEC,iBAC7DE,OAAOsB,EAAS9C,KAAI,SAACqB,GAAD,MAAQ,CAAE2B,KAAM,WAAYC,KAAM5B,EAAEC,kBACxDE,OAAOuB,EAAQ/C,KAAI,SAACqB,GAAD,MAAQ,CAAE2B,KAAM,UAAWC,KAAM5B,EAAEC,kBAV1B,kBAYxBF,EAAOe,MAAK,SAAC3J,EAAG4J,GAAJ,OAAUA,EAAEa,KAAKrI,MAAQpC,EAAEyK,KAAKrI,UAZpB,4CAAH,sDA2DjBsI,GAAe,uCAAG,WAAO/H,EAAM3B,GAAb,eAAAhB,EAAA,6DACvB6C,EAAe,IAAI3C,GAAKG,IAAIa,SAASrB,GAAS8C,GADvB,kBAEtBE,EAAa1B,QAAQgE,SAASnE,GAASyD,QAFjB,2CAAH,wDAWfkG,GAAsB,uCAAG,WAAOhI,EAAM3B,GAAb,eAAAhB,EAAA,yDACpB,KAAZgB,EADgC,yCACT,KADS,cAE9B6B,EAAe,IAAI3C,GAAKG,IAAIa,SAASrB,GAAS8C,GAFhB,kBAG7BE,EAAa1B,QAAQ4D,gBAAgB/D,GAASyD,QAHjB,2CAAH,wDAYtBmG,GAAsB,uCAAG,WAAOjI,EAAM3B,GAAb,eAAAhB,EAAA,6DAC9B6C,EAAe,IAAI3C,GAAKG,IAAIa,SAASrB,GAAS8C,GADhB,kBAE7BE,EAAa1B,QAAQ8D,gBAAgBjE,GAASyD,QAFjB,2CAAH,wDAWtBoG,GAAwB,uCAAG,WAAOlI,EAAM3B,GAAb,eAAAhB,EAAA,yDACtB,KAAZgB,EADkC,yCACX,KADW,cAEhC6B,EAAe,IAAI3C,GAAKG,IAAIa,SAASrB,GAAS8C,GAFd,kBAG/BE,EAAa1B,QAAQ2J,kBAAkB9J,GAASyD,QAHjB,2CAAH,wDAYxBsG,GAAyB,uCAAG,WAAOpI,EAAM3B,GAAb,eAAAhB,EAAA,6DACjC6C,EAAe,IAAI3C,GAAKG,IAAIa,SAASrB,GAAS8C,GADb,kBAEhCE,EAAa1B,QAAQ6J,mBAAmBhK,GAASyD,QAFjB,2CAAH,wDAWzBwG,GAAkB,uCAAG,WAAOtI,GAAP,eAAA3C,EAAA,6DAC1B6C,EAAe,IAAI3C,GAAKG,IAAIa,SAASrB,GAAS8C,GADpB,kBAEzBE,EAAa1B,QAAQ+E,cAAczB,QAFV,2CAAH,sDAWlByG,GAAoB,uCAAG,WAAOvI,GAAP,eAAA3C,EAAA,6DAC5B6C,EAAe,IAAI3C,GAAKG,IAAIa,SAASrB,GAAS8C,GADlB,kBAE3BE,EAAa1B,QAAQgK,gBAAgB1G,QAFV,2CAAH,sDAWpB2G,GAAqB,uCAAG,WAAOzI,GAAP,eAAA3C,EAAA,6DAC7B6C,EAAe,IAAI3C,GAAKG,IAAIa,SAASrB,GAAS8C,GADjB,kBAE5BE,EAAa1B,QAAQkK,iBAAiB5G,QAFV,2CAAH,sDAWrB6G,GAAiB,uCAAG,WAAO3I,EAAM3B,GAAb,mCAAAhB,EAAA,6DACzB6C,EAAe,IAAI3C,GAAKG,IAAIa,SAASrB,GAAS8C,GADrB,SAILzC,GAAKG,IAAIkL,iBAJJ,cAIzBvB,EAJyB,OAKzBzB,EAAYyB,EAAc,MAC1BwB,EAAQ3I,EAAawF,cAAc,OAAQ,CAC/CC,OAAQ,CAACtH,QAASA,GAAUuH,UAAWA,IACnCkD,EAAU5I,EAAawF,cAAc,SAAU,CACnDC,OAAQ,CAACtH,QAASA,GAAUuH,UAAWA,IATV,SAWFd,QAAQC,IAAI,CAAC8D,EAAOC,IAXlB,0CAWxBzJ,EAXwB,KAWlBiB,EAXkB,KAYzB2F,EAAS5G,EAAKwF,KAAI,SAACqB,GAAD,OAAOA,EAAEC,gBAC9BE,OAAO/F,EAAOuE,KAAI,SAACqB,GAAD,OAAOA,EAAEC,iBAExB4C,EAAa9C,EAAOM,QACxB,SAAC9G,EAAO+G,GACN,OAAI/G,EAAQ+G,EAAMwC,MACTvJ,EAEAwJ,SAASzC,EAAMwC,SACvB,GArB0B,mBAyBvBC,SAASF,EAAY,IC5jBQ,GD4jBwB,GAAGG,YAzBjC,4CAAH,wDEtiBvB,SAASC,GAAaC,EAAkCzM,GAC7D,IAAM0M,EAAM,IAAInK,IAAUkK,GACpBE,EAAO,IAAIpK,IAAU,IACrBqK,EAAa,IAAIrK,IAAUvC,GACjC,OAAO0M,EAAIG,MAAMF,EAAKlI,IAAImI,IAAaE,eAMlC,IAAMC,GAAiB,SAACC,EAAqCC,GAClE,IAAMxL,EAAM,IAAIc,IAAUyK,GACpBE,EAAS,IAAI3K,IAAU,IAAIkC,IAAI,IAAIlC,IAAU0K,IACnD,OAAOxL,EAAI0L,IAAID,IAGJE,GAAQ,SAAC9K,GACpB,OAAQA,EAAO+K,UAAY/K,EAAOgL,cAGvBC,GAAY,SAACC,EAAoBnI,GAC5C,OAAOmI,EAAQC,aAAa,IAAIlL,IAAU,MAAMmL,UAAUrI,IAO/CsI,GAAW,SAACrL,EAAmBsL,GAC1C,OAAItL,EAAOuL,WAAW,IAAItL,IAAU,IAYtC,SAAauL,EAAOF,GACbE,EAAMC,SAAS,OAClBD,GAAS,KAIX,IADA,IAAME,EAAQF,EAAMG,MAAM,KACjBC,EAAI,EAAGA,EAAIN,EAAWI,EAAM,GAAG9M,OAAQgN,IAC9CJ,GAAS,IAGX,OAAOA,EArBEK,CAAI7L,EAAO8L,UAAUR,EAAUrL,IAAU8L,aAAa7L,UAAWoL,GAM5E,SAAmBE,GACjB,IAAME,EAAQF,EAAMG,MAAM,KAC1B,OAAOD,EAAM,GAAGzB,WAAW+B,QAAQ,wBAAyB,KAAO,IAAMN,EAAM,GALxEO,CAAUjM,EAAOE,QAAQoL,EAAUrL,IAAU8L,eAqB/C,SAASG,GAAYC,GAE1B,OADAA,EAAIA,EAAEC,YAAY,GACXC,KAAKC,IAAIC,OAAOJ,KAAO,IAC1BE,KAAKC,IAAIC,OAAOJ,IAAM,IAAS,IAC/BE,KAAKC,IAAIC,OAAOJ,KAAO,IACrBE,KAAKC,IAAIC,OAAOJ,IAAM,IAAS,KAC/BE,KAAKC,IAAIC,OAAOJ,KAAO,IACrBE,KAAKC,IAAIC,OAAOJ,IAAM,IAAS,IAC/BE,KAAKC,IAAIC,OAAOJ,IC/DnB,SAAeK,KAAtB,gC,8CAAO,4BAAApO,EAAA,sEACckI,GAAQzI,GADtB,WACCkD,EADD,QAGIjC,gBAAkB1B,EAAY0B,cAHlC,yCAII1B,GAJJ,UAMD2D,EAAKjC,gBAAkBzB,EAAYyB,cANlC,yCAOIzB,GAPJ,UASD0D,EAAKjC,gBAAkBxB,EAAYwB,cATlC,yCAUIxB,GAVJ,aAaC,IAAImP,MAAM,6BAbX,6C,sBAgBA,SAASC,GAAqBC,GACnC,GAAIA,IAAgBvP,EAClB,MPnBuB,6COqBzB,GAAIuP,IAAgBtP,EAClB,OAAOD,EAET,GAAIuP,IAAgBrP,EAClB,OAAOD,EAGT,MAAM,IAAIoP,MAAM,6BC+DHG,OA7Ef,YAAoD,IAA5BC,EAA2B,EAA3BA,KAA2B,EACTC,mBAAS,IAAI7M,IAAU,IADd,mBAC1C8M,EAD0C,KAC5BC,EAD4B,KAqEjD,OAjEAC,qBAAU,WACR,GAAa,KAATJ,EAAJ,CAIA,IAAIK,GAAc,EAkDlBC,IACA,IAAMC,EAAKC,YAAYF,EAAgB,MAGvC,OAAO,WACLD,GAAc,EACdI,cAAcF,IA7DF,SAOCD,IAPD,2EAOd,8EAAA/O,EAAA,sEAC4BoO,KAD5B,cACQG,EADR,gBAQY9G,QAAQC,IAAI,CACpBrD,GAAgB7E,EAAUiP,GAC1BzJ,GAAmBvF,EAAWgP,GAC9B3J,GAAiBrF,EAAWgP,GAE5BpK,GAAgB7E,EAAUL,GAC1BuF,GAAoBvF,GACpBkF,GAAgBlF,EAAUsP,GAC1B9D,GAAuB4D,EAAaE,GACpC7D,GAAuB2D,EAAaE,GACpC5D,GAAyB0D,EAAaE,GACtC1D,GAA0BwD,EAAaE,KAnB3C,oCAIIU,EAJJ,KAIgBC,EAJhB,KAI+BC,EAJ/B,KAKIC,EALJ,KAKuBC,EALvB,KAK8CC,EAL9C,KAMIC,EANJ,KAM8BC,EAN9B,KAOIC,EAPJ,KAOgCC,EAPhC,KAsBQC,EAAcxD,GAAe,IAAIxK,IAAUsN,GAAa3P,GACxDsQ,EAAoBzD,GAAe,IAAIxK,IAAUuN,GAAgB3P,GACjEsQ,EAAoB1D,GAAe,IAAIxK,IAAUwN,GAAgB5P,GAEjEuQ,EAAiB3D,GAAe,IAAIxK,IAAU2N,GAAoB/P,GAClEwQ,EAAwB5D,GAAe,IAAIxK,IAAU4N,GAA2BhQ,GAChFyQ,EAAwB7D,GAAe,IAAIxK,IAAU6N,GAA2BjQ,GAChF0Q,EAA0B9D,GAAe,IAAIxK,IAAU8N,GAA6BlQ,GACpF2Q,EAA2B/D,GAAe,IAAIxK,IAAU+N,GAA8BnQ,GAExF4Q,EAAW,IAAIxO,IAAU,GACD,GAAzB0N,IACDc,EAAW,IAAIxO,IAAUyN,GAAmBtC,UAAU,IAAInL,IAAU0N,KAEhEe,EAAkBR,EAAkBtG,KAAKuG,GACzCQ,EAAmBF,EAAStD,aAAamD,EAAsB1G,KAAKyG,IACvEzG,KAAK2G,EAAwB3G,KAAK4G,IAC/BI,EAAqBH,EAAStD,aAAaiD,GAAgBxG,KAAKqG,GAEhElB,EAAe2B,EAAgB9G,KAAK+G,GAAkB/G,KAAKgH,GAE5D1B,GACHF,EAAgBD,GA5CpB,6CAPc,sBAEZC,EAAgB,IAAI/M,IAAU,MA6D/B,CAAC4M,IAGF,yBAAKgC,MAAO,CAAEC,SAAU,GAAIC,QAAS,EAAGC,WAAY,IAAKC,WAAY,IAAKC,WAAY,mCAAtF,SACI7D,GAAS0B,EAAc,KCHhBoC,OAlEf,YAAwE,IAA/CC,EAA8C,EAA9CA,QAASvC,EAAqC,EAArCA,KAAMwC,EAA+B,EAA/BA,QAA+B,EACjDC,eAAZC,EAD6D,EAC7DA,EAD6D,KAC1DC,KACeC,eAF2C,KAE7DC,OAF6D,EAErDC,MAE8B7C,oBAAS,IAJc,mBAI9D8C,EAJ8D,KAI7CC,EAJ6C,KAM/DC,EAAW,uCAAG,4BAAA1R,EAAA,sEACID,IADJ,UAEJ,IADR4R,EADY,yDAGlBF,GAAmB,GACnBR,EAAQU,GAJU,2CAAH,qDAOXC,EAAc,uCAAG,sBAAA5R,EAAA,sDACrByR,GAAmB,GACnBR,EAAQ,IAFa,2CAAH,qDAQpB,OAAOO,EACL,yBAAKf,MAAO,CAACoB,QAAS,SACpB,yBAAKpB,MAAO,CAACqB,KAAM,OACnB,6BACE,kBAACC,GAAA,EAAD,CAAKpB,QAAS,EAAGF,MAAO,CAACuB,MAAO,UAC9B,yBAAKvB,MAAO,CAACoB,QAAS,SACpB,6BACE,kBAAC,KAAD,CAAUI,QAASL,EAAgBnB,MAAO,CAACyB,YAAa,MAAOC,OAAQ,SACrE,kBAACC,GAAA,EAAD,QAGJ,yBAAK3B,MAAO,CAACqB,KAAM,IAAKO,UAAW,UACjC,kBAACC,GAAA,EAAD,CAAeC,OAAQ9D,MAG3B,yBAAKgC,MAAO,CAACoB,QAAS,SACpB,yBAAKpB,MAAO,CAACqB,KAAM,IAAKO,UAAW,UACjC,kBAAC,GAAD,CAAc5D,KAAMA,SAO9B,oCACE,kBAAC+D,GAAA,EAAD,CAAQC,KAAM,kBAACC,GAAA,EAAD,MAAiBC,MAAOxB,EAAE,WAAYc,QAASP,EAAakB,UAAW5B,MCe3F,SAAS6B,GAAT,GAA6E,IAAvDC,EAAsD,EAAtDA,MAAOb,EAA+C,EAA/CA,QAA+C,IAAtCc,kBAAsC,SAC1E,OACI,kBAAC,KAAD,CAAUd,QAASA,EAASxB,MAAO,CAACuC,WAAY,MAAOd,YAAa,MAAOC,OAAQ,SACjF,yBAAK1B,MAAO,CAAEE,QAAS,KAAMsC,QAASF,EAAa,EAAI,GAAKrC,SAAU,KAAOoC,IAKtEI,OA3Ef,YAEgB,IADdlC,EACa,EADbA,QAASvC,EACI,EADJA,KAAMwC,EACF,EADEA,QACF,EACOC,eAAZC,EADK,EACLA,EAAGC,EADE,EACFA,KACL+B,EAAUC,cACVC,EAAeC,eAHR,EAImB5E,mBAAS,GAJ5B,gCAKWA,mBAAS,KALpB,mBAKN6E,EALM,KAKAC,EALA,KAOb3E,qBAAU,WACR,OAAOsE,EAAQM,QAAO,SAACC,GACrBF,EAAQE,EAASC,eAElB,CAAC3C,EAASvC,EAAM0E,IAEnB,IAAMS,EAAO,sBAAyC,UAAvBP,EAAaQ,MAAoB,QAAU,QAA7D,QAEb,OACE,oCACE,yBAAKpD,MAAO,CACVqD,UAAW,aAAeT,EAAaU,OACvCC,gBAAiB,OACjB3B,UAAW,SACXF,OAAQ,QACRH,MAAO,OACPtB,SAAU,SAEV,yBAAKD,MAAO,CAACwD,SAAU,SAAUjB,WAAY,OAAQd,YAAa,SAChE,yBAAKzB,MAAO,CAAEoB,QAAS,OAAQqC,WAAY,SACzC,yBAAKzD,MAAO,CAAEuB,MAAO,MAAOK,UAAW,SACrC,kBAAC,KAAD,CAAUJ,QAAS,kBAAMkB,EAAQgB,KAAK,MAAM1D,MAAO,CAACyB,YAAa,OAAQC,OAAQ,SAC/E,yBAAKiC,IAAKR,EAASzB,OAAO,OAAOkC,IAAI,qBAGzC,yBAAK5D,MAAO,CAAEuB,MAAO,MAAOK,UAAW,WACrC,yBAAKiC,UAAU,YACf,4BAAQA,UAAU,WAAWnD,EAAE,SAC/B,yBAAKmD,UAAU,oBACb,kBAAC,GAAD,CAAYxB,MAAM,KAAKb,QAAS,kBAAMb,EAAKmD,eAAe,SAC1D,kBAAC,GAAD,CAAYzB,MAAM,MAAMb,QAAS,kBAAMb,EAAKmD,eAAe,UAC3D,kBAAC,GAAD,CAAYzB,MAAM,MAAMb,QAAS,kBAAMb,EAAKmD,eAAe,YAG7D,kBAAC,GAAD,CAAYzB,MAAO3B,EAAE,OAAQc,QAAS,kBAAMkB,EAAQgB,KAAK,UAAUpB,WAAYQ,EAAKlG,SAAS,UAC7F,kBAAC,GAAD,CAAYyF,MAAO3B,EAAE,aAAcc,QAAS,kBAAMkB,EAAQgB,KAAK,WAAWpB,WAAYQ,EAAKlG,SAAS,WACpG,kBAAC,GAAD,CAAYyF,MAAO3B,EAAE,cAAec,QAAS,kBAAMkB,EAAQgB,KAAK,iBAAiBpB,WAAYQ,EAAKlG,SAAS,iBAC3G,kBAAC,GAAD,CAAYyF,MAAO3B,EAAE,cAAec,QAAS,kBAAMkB,EAAQgB,KAAK,iBAAiBpB,WAAYQ,EAAKlG,SAAS,iBAC3G,kBAAC,GAAD,CAAYyF,MAAO3B,EAAE,SAAUc,QAAS,kBAAMkB,EAAQgB,KAAK,YAAYpB,WAAYQ,EAAKlG,SAAS,YACjG,kBAAC,GAAD,CAAYyF,MAAO3B,EAAE,WAAYc,QAAS,kBAAMkB,EAAQgB,KAAK,cAAcpB,WAAYQ,EAAKlG,SAAS,eAEvG,yBAAKoD,MAAO,CAAEuB,MAAO,MAAOK,UAAW,UACrC,kBAAC,GAAD,CAAerB,QAASA,EAASvC,KAAMA,EAAMwC,QAASA,U,UC/CrDuD,OAVf,YAAiD,IAA3BpS,EAA0B,EAA1BA,MAA0B,EAC1B8O,eAAZC,EADsC,EACtCA,EACR,OAF8C,EACnCC,KAET,oCACE,yBAAKX,MAAO,CAAEC,SAAU,GAAIC,QAAS,IAAMQ,EAAE,UAC7C,yBAAKV,MAAO,CAAEC,SAAU,GAAIC,QAAS,EAAGC,WAAY,IAAKC,WAAY,IAAKC,WAAY,mCAAoC1O,KCFhI,SAASqS,KACP,IAMIC,EAFgBzG,KAAK0G,MAAMC,KAAKC,MAAQ,KAJzB,WAQnBH,GAPoB,KAMNzG,KAAK0G,MAAMD,EANL,MASpBA,GARa,KAOKzG,KAAK0G,MAAMD,EAPhB,MASb,IAAMI,EAAc7G,KAAK0G,MAAMD,EARhB,IAUf,OADAA,GATe,GASGI,EACZ,KAAN,OAAY,EAAZ,IAAiBA,EAAc,EAAGA,EAAc,IAAMA,EAAYjJ,WAAlE,YAAgF6I,EAAiB,EAAIA,EAAiB,IAAMA,EAAe7I,YA8I7I,SAASkJ,GAAT,GAEoB,IADlBjC,EACiB,EADjBA,MAAOkC,EACU,EADVA,YAAavC,EACH,EADGA,KAAMR,EACT,EADSA,QAASgD,EAClB,EADkBA,IAEnC,OACE,kBAAC,KAAD,CAAUhD,QAASA,EAASxB,MAAO,CAAEuB,MAAO,SAC1C,kBAACD,GAAA,EAAD,KACE,yBAAKtB,MAAO,CAAEE,QAAS,GAAID,SAAU,KAClCoC,EACAmC,EAAM,kBAACC,GAAA,EAAD,KAAMD,GAAa,sCAE5B,0BAAMxE,MAAO,CAAEC,SAAU,KACtB+B,GAGH,yBAAKhC,MAAO,CAAEyD,WAAY,EAAGjB,QAAS,KACnC,IACA+B,EACA,OAQIG,OAhKf,YAA0C,IAAvB1G,EAAsB,EAAtBA,KACX0E,EAAUC,cADuB,EAEnBlC,eAAZC,EAF+B,EAE/BA,EAF+B,KAE5BC,KACuB1C,mBAAS,eAHJ,mBAGhChJ,EAHgC,KAGrB0P,EAHqB,OAIb1G,mBAAS,GAJI,mBAIzB2G,GAJyB,WAiCvC,OA3BAxG,qBAAU,WACR,IAAIC,GAAc,EACdwG,EAAW,IAFD,SAMCvG,IAND,2EAMd,sBAAA/O,EAAA,yDACa,IAARyO,EADL,gCAGqBjJ,GAAS/F,GAH9B,OAGI6V,EAHJ,cAMOxG,IACHuG,EAASzJ,SAAS0J,EAAU,KAC5BF,EAAaE,EAAWb,OAR5B,4CANc,sBAGd3V,QAAQC,IAAI0P,GAcZM,IACA,IAAMC,EAAKC,YAAYF,EAAgB,KAGvC,OAAO,WACLD,GAAc,EACdI,cAAcF,MAEf,CAACP,IAGF,oCACE,yBAAKgC,MAAO,CAAEE,QAAS,KAAMkB,QAAS,OAAQ0D,SAAU,OAAQC,WAAY,WAC1E,yBAAK/E,MAAO,CAAEgF,UAAW,SACzB,yBAAKhF,MAAO,CAAEgF,UAAW,MAAOC,SAAU,EAAGxD,YAAa,KAAMG,UAAW,UACzE,kBAACN,GAAA,EAAD,KACE,kBAAC,GAAD,CAAY3P,MAAOsD,OAIzB,yBAAK+K,MAAO,CAAEE,QAAS,KAAMkB,QAAS,OAAQ0D,SAAU,OAAQC,WAAY,WAC1E,yBAAK/E,MAAO,CAAEgF,UAAW,MAAOvD,YAAa,KAAMc,WAAY,OAC7D,kBAAC+B,GAAD,CACEjC,MAAM,MACNkC,YAAa7D,EAAE,8BACfsB,KAAM,uBAAG6B,UAAU,sBACnBrC,QAAS,WACPkB,EAAQgB,KAAK,aAKnB,yBAAK1D,MAAO,CAAEgF,UAAW,QACvB,kBAACV,GAAD,CACEjC,MAAO3B,EAAE,cACT6D,YAAa7D,EAAE,yCACfsB,KAAM,uBAAG6B,UAAU,yBACnBrC,QAAS,WACPkB,EAAQgB,KAAK,cAKnB,yBAAK1D,MAAO,CAAEgF,UAAW,MAAOzC,WAAY,KAAMd,YAAa,OAC7D,kBAAC6C,GAAD,CACEjC,MAAO3B,EAAE,cACT6D,YAAa7D,EAAE,yCACfsB,KAAM,uBAAG6B,UAAU,sBACnBrC,QAAS,WACPkB,EAAQgB,KAAK,qBAKrB,yBAAK1D,MAAO,CAAEE,QAAS,KAAMkB,QAAS,OAAQ0D,SAAU,OAAQC,WAAY,WAC1E,yBAAK/E,MAAO,CAAEgF,UAAW,MAAOvD,YAAa,KAAMc,WAAY,OAC7D,kBAAC+B,GAAD,CACEjC,MAAO3B,EAAE,cACT6D,YAAa7D,EAAE,qBACfsB,KAAM,uBAAG6B,UAAU,gBACnBrC,QAAS,WACPkB,EAAQgB,KAAK,oBAKnB,yBAAK1D,MAAO,CAAEgF,UAAW,QACvB,kBAACV,GAAD,CACEjC,MAAO3B,EAAE,SACT6D,YAAa7D,EAAE,qBACfsB,KAAM,uBAAG6B,UAAU,wBACnBrC,QAAS,WACPkB,EAAQgB,KAAK,eAKnB,yBAAK1D,MAAO,CAAEgF,UAAW,MAAOzC,WAAY,KAAMd,YAAa,OAC7D,kBAAC6C,GAAD,CACEjC,MAAO3B,EAAE,WACT6D,YAAa7D,EAAE,gCACfsB,KAAM,uBAAG6B,UAAU,sBACnBrC,QAAS,WACPkB,EAAQgB,KAAK,kBAKnB,yBAAK1D,MAAO,CAAEE,QAAS,KAAMkB,QAAS,OAAQ0D,SAAU,OAAQC,WAAY,WAC5E,yBAAK/E,MAAO,CAAEgF,UAAW,MAAOvD,YAAa,KAAMc,WAAY,QAC7D,kBAAC+B,GAAD,CACEjC,MAAO3B,EAAE,iBACT6D,YAAa7D,EAAE,kCACfsB,KAAM,uBAAG6B,UAAU,mBACnBrC,QAAS,WACPkB,EAAQgB,KAAK,kBClIZwB,OAXf,YAA8D,IAAtChD,EAAqC,EAArCA,MAAOhB,EAA8B,EAA9BA,QAC7B,OACE,oCACE,yBAAKlB,MAAO,CAAEC,SAAU,GAAIC,QAAS,IAAMgC,GAC3C,yBAAKlC,MAAO,CAAEE,QAAS,IACrB,kBAAC2B,GAAA,EAAD,CAAeC,OAAQZ,EAASiE,SAAO,OCyBhCC,OA3Bf,YAAuE,IAA/CC,EAA8C,EAA9CA,MAAOhJ,EAAuC,EAAvCA,QAAuC,IAA9BiJ,cAA8B,MAAvB,GAAuB,EAChEC,EAAU,IACVxJ,EAAS,IACPyJ,EAAY,IAAIpU,IAAUiL,GAChC,GAAImJ,EAAUC,IAAI,IAAIrU,IAAU,IAAK,CACnC,IAAMsU,EAASlJ,GAASgJ,EAAW,GAAG1I,MAAM,KAC5CyI,EAAUG,EAAO,GACjB3J,EAAS2J,EAAO,GAGlB,OACE,oCACE,yBAAK1F,MAAO,CAAEC,SAAU,GAAIC,QAAS,IAAMmF,GAC3C,yBAAKrF,MAAO,CAAEE,QAAS,IACrB,0BAAMF,MAAO,CAAEC,SAAU,KAAOsF,GADlC,IAGE,0BAAMvF,MAAO,CAAEC,SAAU,KACtB,IACAlE,EACA,KAES,KAAXuJ,EAAgB,GAAK,0BAAMtF,MAAO,CAAEC,SAAU,KAAOqF,MCf/CK,OAXf,YAAuD,IAAlCnE,EAAiC,EAAjCA,QAAiC,EAChCf,eAAZC,EAD4C,EAC5CA,EACR,OAFoD,EACzCC,KAET,yBAAKX,MAAO,CAAEE,QAAS,IACrB,kBAAC0F,GAAA,EAAD,CAAYpE,QAASA,GACnB,0BAAMxB,MAAO,CAAEwC,QAAS,KAAxB,IAAiC9B,EAAE,OAAnC,QCSOmF,OAjBf,YAEyF,IADvF3D,EACsF,EADtFA,MAAO5R,EAC+E,EAD/EA,IAC+E,IAD1ExB,cAC0E,MADjE,GACiE,MAD7DgX,oBAC6D,SAChFC,EAAQ,IAAI3U,IAAUd,GAC5B,OAAIyV,EAAMC,GAAG,IAAI5U,IAAU,KAAO0U,EAE9B,yBAAK9F,MAAO,CAAEE,QAAS,EAAGsC,QAAS,KACjC,0BAAMxC,MAAO,CAAEC,SAAU,KAAOiC,GAChC,0BAAMlC,MAAO,CAAEC,SAAU,KAAO8F,EAAME,WAAW5U,QAAQ,IACzD,0BAAM2O,MAAO,CAAEC,SAAU,KAAOnR,IAI/B,yBAAKkR,MAAO,CAAEE,QAAS,EAAGsC,QAAS,OCF7B0D,I,8JCZKC,KAAOnK,IAAV,MAAjB,I,0ICwBeoK,OAhBf,YAAgE,IAA1CC,EAAyC,EAAzCA,KAAMC,EAAmC,EAAnCA,QAASC,EAA0B,EAA1BA,QAC7BC,EAAQ3D,eACd,OACE,kBAAC4D,GAAD,CAAiBD,MAAOA,GACtB,kBAACE,GAAA,EAAD,CACEJ,QAASA,EACTK,SAAUJ,IAEZ,0BAAMvG,MAAO,CAAE4G,OAAQ,QACpBP,GAEH,+BAOAI,GAAkBN,KAAOnK,IAAV,MAGV,SAAC6K,GAAD,OAAWA,EAAML,MAAMM,2BCOnBC,GA3BS,SAAC,GAEI,IAD3BC,EAC0B,EAD1BA,eAAgBC,EACU,EADVA,gBAAiBC,EACP,EADOA,YACP,EACNzG,eAAZC,EADkB,EAClBA,EACFyG,GAFoB,EACfxG,KACGsG,EAAgB1K,UAAUyK,IAExC,OACE,yBAAKhH,MAAO,CAAEE,QAAS,KAAMkB,QAAS,OAAQ0D,SAAU,OAAQC,WAAY,WAC1E,yBAAK/E,MAAO,CAAEgF,UAAW,QACvB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,aAAcrE,QAAS8K,EAAO7B,OAAQ,UAE/D,yBAAKtF,MAAO,CAAEgF,UAAW,QACvB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,iBAAkBrE,QAAS2K,EAAgB1B,OAAQ,SAE5E,yBAAKtF,MAAO,CAAEgF,UAAW,QACvB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,kBAAmBrE,QAAS4K,EAAiB3B,OAAQ,UAE9E,yBAAKtF,MAAO,CAAEgF,UAAW,QACvB,oCACE,kBAAC,GAAD,CAAc9C,MAAOxB,EAAE,oBAAqBQ,QAASgG,Q,UCJhDE,OAff,YAAsD,IAAhCpF,EAA+B,EAA/BA,KAAMqE,EAAyB,EAAzBA,KAC1B,OACE,oCACE,yBAAKrG,MAAO,CAAEE,QAAS,KAAMkB,QAAS,OAAQ2D,WAAY,WACxD,yBAAK/E,MAAO,CAAEyB,YAAa,KAAMxB,SAAU,KACxC+B,GAEH,6BACE,kBAAC,KAAD,CAAQqF,QAAShB,QC0E3B,SAAS/B,GAAT,GAEoB,IADlBjC,EACiB,EADjBA,MAAOkC,EACU,EADVA,YAAavC,EACH,EADGA,KAAMsF,EACT,EADSA,KAE1B,OACE,kBAAC,KAAD,CAAUA,KAAMA,EAAMtH,MAAO,CAAEuB,MAAO,SACpC,kBAACD,GAAA,EAAD,KACE,yBAAKtB,MAAO,CAAEE,QAAS,GAAID,SAAU,KAClCoC,GAEH,0BAAMrC,MAAO,CAAEC,SAAU,KACtB+B,GAGH,yBAAKhC,MAAO,CAAEyD,WAAY,EAAGjB,QAAS,KACnC,IACA+B,EACA,OAQIgD,OAzGf,YAAgD,IAAzBvJ,EAAwB,EAAxBA,KAAwB,EACzByC,eAAZC,EADqC,EACrCA,EADqC,KAClCC,KACiC1C,mBAAS,IAAI7M,IAAU,KAFtB,mBAEtC4V,EAFsC,KAEtBQ,EAFsB,OAGCvJ,mBAAS,IAAI7M,IAAU,IAHxB,mBAGtC6V,EAHsC,KAGrBQ,EAHqB,KAgC7C,OA3BArJ,qBAAU,WACR,IAAIC,GAAc,EADJ,SAGCC,IAHD,2EAGd,kCAAA/O,EAAA,sEAGYyH,QAAQC,IAAI,CACpBrD,GAAgB7E,EAAUL,GAC1BkF,GAAgBjF,EAAKC,KAAMF,KAL/B,mCAEImQ,EAFJ,KAEuB6I,EAFvB,KAQOrJ,IACHmJ,EAAkB5L,GAAeiD,EAAmB9P,IACpD0Y,EAAmB7L,GAAe8L,EAAoB/Y,EAAKE,YAV/D,4CAHc,sBAiBdyP,IACA,IAAMC,EAAKC,YAAYF,EAAgB,MAGvC,OAAO,WACLD,GAAc,EACdI,cAAcF,MAEf,CAACP,IAGF,oCACE,kBAAC,GAAD,CAAYgE,KAAM,uBAAG6B,UAAU,wBAAyBwC,KAAM3F,EAAE,WAEhE,kBAAC,GAAD,CACEsG,eAAgBA,EAChBC,gBAAiBA,EACjBC,YAAaxY,IAGf,yBAAKsR,MAAO,CAAEE,QAAS,KAAMkB,QAAS,OAAQ0D,SAAU,OAAQC,WAAY,WAC1E,yBAAK/E,MAAO,CAAEgF,UAAW,MAAOvD,YAAa,KAAMc,WAAY,OAC7D,kBAAC,GAAD,CACEF,MAAO3B,EAAE,QACT6D,YAAa7D,EAAE,6BACfsB,KAAM,uBAAG6B,UAAU,sBACnByD,KAAM,0EAIV,yBAAKtH,MAAO,CAAEgF,UAAW,QACvB,kBAAC,GAAD,CACE3C,MAAO3B,EAAE,SACT6D,YAAa7D,EAAE,qBACfsB,KAAM,uBAAG6B,UAAU,wBACnByD,KAAM,sJAIV,yBAAKtH,MAAO,CAAEgF,UAAW,MAAOzC,WAAY,KAAMd,YAAa,OAC7D,kBAAC,GAAD,CACEY,MAAO3B,EAAE,UACT6D,YAAa7D,EAAE,gCACfsB,KAAM,uBAAG6B,UAAU,iBACnByD,KAAM,2HC9DHK,OATf,YAAqD,IAAhCzF,EAA+B,EAA/BA,MAAOmE,EAAwB,EAAxBA,KAC1B,OACE,oCACE,yBAAKrG,MAAO,CAAEC,SAAU,GAAIC,QAAS,IAAMgC,GAC3C,yBAAKlC,MAAO,CAAEC,SAAU,GAAIC,QAAS,IAAMmG,KCM3CuB,GAAa,CAAC,WAAY,SAAU,UA4B3BC,OA1Bf,YAE4B,IAD1BC,EACyB,EADzBA,kBAAmBC,EACM,EADNA,mBAAoBC,EACd,EADcA,gBAAiBC,EAC/B,EAD+BA,qBAAsBC,EACrD,EADqDA,qBAAsBC,EAC3E,EAD2EA,cAAeC,EAC1F,EAD0FA,SAC1F,EACL3H,eAAZC,EADiB,EACjBA,EACR,OAFyB,EACdC,KAEX,yBAAKX,MAAO,CAAEE,QAAS,KAAMkB,QAAS,OAAQ0D,SAAU,OAAQC,WAAY,WAC1E,yBAAK/E,MAAO,CAAEgF,UAAW,QACvB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,WAAYrE,QAASyL,EAAmBxC,OAAQ5E,EAAE,WAE3E,yBAAKV,MAAO,CAAEgF,UAAW,QACvB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,UAAWrE,QAAS4L,EAAuB3C,OAAQ,UAE5E,yBAAKtF,MAAO,CAAEgF,UAAW,QACvB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,UAAWrE,QAAS6L,EAAsB5C,OAAQ,UAE3E,yBAAKtF,MAAO,CAAEgF,UAAW,QACvB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,iBAAkBrE,QAASD,GAAU2L,EAAoBC,GAAmB1C,OAAQ,OAE7G,yBAAKtF,MAAO,CAAEgF,UAAW,QACvB,kBAAC,GAAD,CAAW9C,MAAOxB,EAAE,UAAW2F,KAAM3F,EAAEkH,GAAWO,KAAqC,IAAlBA,EAAsB,GAAK,IAAKzH,EAAE,SAAW,IAAM0H,Q,qCCG/GC,OA3Bf,YAA4F,IAAlElV,EAAiE,EAAjEA,MAAOmV,EAA0D,EAA1DA,OAAQC,EAAkD,EAAlDA,UAAkD,IAAvCpG,gBAAuC,SACzF,OACE,oCACE,kBAACqG,GAAA,EAAD,CACEzO,KAAK,SACL0O,kBAAkB,MAClBF,UAAWA,EACXG,MAAI,EACJvV,MAAOA,EAAMwV,aAAe,GAAKxV,EAAM9B,UACvCsV,SAAU,SAACjO,GACLA,EAAMkQ,OAAOzV,MACfmV,EAAO,IAAIlX,IAAUsH,EAAMkQ,OAAOzV,QAElCmV,EAAO,IAAIlX,KAAW,KAG1ByX,OAAQ,WACF1V,EAAMwV,cACRL,EAAO,IAAIlX,IAAU,KAGzB+Q,SAAUA,MCkGH2G,OA9Gf,YAE0B,IADxB9K,EACuB,EADvBA,KAAM3B,EACiB,EADjBA,QAASjI,EACQ,EADRA,UAAWuK,EACH,EADGA,cAAekC,EAClB,EADkBA,OAClB,EACHJ,eAAZC,EADe,EACfA,EADe,KACZC,KAC+B1C,mBAAS,IAAI7M,IAAU,KAF1C,mBAEhB2X,EAFgB,KAEDC,EAFC,OAGqB/K,mBAAS,IAAI7M,IAAU,IAH5C,mBAGhB6X,EAHgB,KAGAC,EAHA,KAKvB,OACE,kBAAC5H,GAAA,EAAD,CAAK6H,QAASzI,EAAE,UACyB,IAAtCtM,EAAUgV,WAAW/V,IACpB,yBAAK2M,MAAO,CAACoB,QAAS,OAAQ0D,SAAU,SAEtC,yBAAK9E,MAAO,CAACgF,UAAW,QACtB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,UAAWrE,QAASsC,EAAe2G,OAAQ,SAGpE,yBAAKtF,MAAO,CAACgF,UAAW,MAAOvB,WAAY,OACzC,yBAAKzD,MAAO,CAACoB,QAAS,SACpB,yBAAKpB,MAAO,CAACuB,MAAO,MAAO8H,SAAU,QACnC,oCACE,kBAAC,GAAD,CACEd,UAAU,MACVpV,MAAO4V,EACPT,OAAQU,EACR7G,SAAqB,IAAXtB,IAEZ,kBAAC,GAAD,CACEW,QAAS,WACPwH,EAAiB3M,QAKzB,yBAAK2D,MAAO,CAACuB,MAAO,MAAO8H,SAAU,QACnC,kBAACtH,GAAA,EAAD,CACE2G,MAAI,EACJ1G,KAAiB,IAAXnB,EAAe,kBAACyI,GAAA,EAAD,MAAoB,kBAACC,GAAA,EAAD,MACzCrH,MAAOxB,EAAE,WACTc,QAAS,WACPtQ,EACElC,EACAqM,GAAa0N,EAAeha,KAGhCoT,SAAqB,IAAXtB,IAAiB5E,GAAM8M,IAAkBA,EAAcS,cAAcnN,QAKvF,yBAAK2D,MAAO,CAACgF,UAAW,QAExB,yBAAKhF,MAAO,CAACgF,UAAW,MAAOvB,WAAY,OACzC,yBAAKzD,MAAO,CAACoB,QAAS,SACpB,yBAAKpB,MAAO,CAACuB,MAAO,MAAO8H,SAAU,QACnC,oCACE,kBAAC,GAAD,CACEd,UAAU,MACVpV,MAAO8V,EACPX,OAAQY,EACR/G,SAAqB,IAAXtB,IAEZ,kBAAC,GAAD,CACEW,QAAS,WACP0H,EAAkBvK,QAK1B,yBAAKqB,MAAO,CAACuB,MAAO,MAAO8H,SAAU,QACnC,kBAACtH,GAAA,EAAD,CACE2G,MAAI,EACJ1G,KAAiB,IAAXnB,EAAe,kBAAC4I,GAAA,EAAD,MAAqB,kBAACF,GAAA,EAAD,MAC1CrH,MAAOxB,EAAE,YACTc,QAAS,WACPlQ,EACEtC,EACAqM,GAAa4N,EAAgBla,KAGjCoT,SAAqB,IAAXtB,IAAiB5E,GAAMgN,IAAmBA,EAAeO,cAAc7K,SAO3F,yBAAKqB,MAAO,CAACoB,QAAS,OAAQ0D,SAAU,SAEtC,yBAAK9E,MAAO,CAACgF,UAAW,QACtB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,UAAWrE,QAASsC,EAAe2G,OAAQ,SAEpE,yBAAKtF,MAAO,CAACgF,UAAW,SAExB,yBAAKhF,MAAO,CAACgF,UAAW,MAAOvB,WAAY,OACzC,kBAAC1B,GAAA,EAAD,CACE2G,MAAI,EACJ1G,KAAM,kBAACsH,GAAA,EAAD,MACNpH,MAAOxB,EAAE,WACTc,QAAS,WACPrR,EAAQpB,EAAUC,IAEpBmT,SAAmB,KAATnE,Q,SCVT0L,OA5Ff,YAEqB,IADnBC,EACkB,EADlBA,OAAQC,EACU,EADVA,OAAQ/I,EACE,EADFA,OAAQgJ,EACN,EADMA,OACN,EACkB5L,mBAAS,IAAI7M,IAAU,IADzC,mBACX0Y,EADW,KACCC,EADD,OAEsB9L,mBAAS,IAAI7M,IAAU,IAF7C,mBAEX4Y,EAFW,KAEGC,EAFH,OAGExJ,eAAZC,EAHU,EAGVA,EACR,OAJkB,EAGPC,KAET,kBAACW,GAAA,EAAD,CAAK6H,QAASzI,EAAE,SACd,yBAAKV,MAAO,CAACoB,QAAS,OAAQ0D,SAAU,SAEtC,yBAAK9E,MAAO,CAACgF,UAAW,QACtB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,UAAWrE,QAASuN,EAAQtE,OAAQ5E,EAAE,UAG/D,yBAAKV,MAAO,CAACgF,UAAW,QACtB,kBAAC,GAAD,CAAW9C,MAAOxB,EAAE,eAAgB2F,KAAiB,IAAXwD,EAAe,GAAgB,IAAXA,EAAe,UAAf,UAA8BA,EAA9B,cAGhE,yBAAK7J,MAAO,CAACgF,UAAW,MAAOvB,WAAY,OACzC,yBAAKzD,MAAO,CAACoB,QAAS,SACpB,yBAAKpB,MAAO,CAACuB,MAAO,MAAO8H,SAAU,QACnC,oCACE,kBAAC,GAAD,CACEd,UAAW7H,EAAE,OACbvN,MAAO2W,EACPxB,OAAQyB,IAEV,kBAAC,GAAD,CACEvI,QAAS,WACPuI,EAAcJ,QAKtB,yBAAK3J,MAAO,CAACuB,MAAO,MAAO8H,SAAU,QACnC,kBAACtH,GAAA,EAAD,CACE2G,MAAI,EACJ1G,KAAiB,IAAXnB,EAAe,kBAACyI,GAAA,EAAD,MAAoB,kBAACY,GAAA,EAAD,MACzChI,MAAOxB,EAAE,QACTc,QAAS,WACPjQ,EACEvC,EACAqM,GAAayO,EAAY/a,KAG7BoT,SAAqB,IAAXtB,IAAiB5E,GAAM6N,IAAeA,EAAWN,cAAcG,QAKjF,yBAAK3J,MAAO,CAACuB,MAAO,QAEpB,yBAAKvB,MAAO,CAACgF,UAAW,MAAOvB,WAAY,OACzC,yBAAKzD,MAAO,CAACoB,QAAS,SACpB,yBAAKpB,MAAO,CAACuB,MAAO,MAAO8H,SAAU,QACnC,oCACE,kBAAC,GAAD,CACEd,UAAW7H,EAAE,OACbvN,MAAO6W,EACP1B,OAAQ2B,IAEV,kBAAC,GAAD,CACEzI,QAAS,WACPyI,EAAgBL,QAKxB,yBAAK5J,MAAO,CAACuB,MAAO,MAAO8H,SAAU,QACnC,kBAACtH,GAAA,EAAD,CACE2G,MAAI,EACJ1G,KAAiB,IAAXnB,EAAe,kBAAC4I,GAAA,EAAD,MAAqB,kBAACS,GAAA,EAAD,MAC1ChI,MAAOxB,EAAE,UACTc,QAAS,WACPhQ,EACExC,EACAqM,GAAa2O,EAAcjb,KAG/BoT,SAAqB,IAAXtB,IAAiB5E,GAAM+N,IAAiBA,EAAaR,cAAcI,SAMvF,yBAAK5J,MAAO,CAACuB,MAAO,OAAQkC,WAAY,KAAM7B,UAAW,WACvD,0BAAM5B,MAAO,CAAEwC,QAAS,KAAQ9B,EAAE,oDCyB3ByJ,OAhHf,YAA2C,IAAzBnM,EAAwB,EAAxBA,KAAwB,EACpByC,eAAZC,EADgC,EAChCA,EACA0J,GAFgC,EAC7BzJ,KACU0J,cAAbD,UACJA,IACFpM,EAAOoM,GAJ+B,MAOInM,mBAAS,IAAI7M,IAAU,IAP3B,mBAOjCkZ,EAPiC,KAOjBC,EAPiB,OAQQtM,mBAAS,IAAI7M,IAAU,IAR/B,mBAQjCoZ,EARiC,KAQfC,EARe,OASMxM,mBAAS,IAAI7M,IAAU,IAT7B,mBASjCsZ,EATiC,KAShBC,EATgB,OAUM1M,mBAAS,IAAI7M,IAAU,IAV7B,mBAUjC4W,EAViC,KAUhB4C,EAVgB,OAWU3M,mBAAS,IAAI7M,IAAU,IAXjC,mBAWjCiO,EAXiC,KAWdwL,EAXc,OAYU5M,mBAAS,IAAI7M,IAAU,IAZjC,mBAYjCkO,EAZiC,KAYdwL,EAZc,OAaJ7M,mBAAS,GAbL,mBAajC8M,EAbiC,KAarBC,EAbqB,OAcY/M,mBAAS,GAdrB,mBAcjCgN,EAdiC,KAcbC,EAda,OAeZjN,mBAAS,GAfG,mBAejC4L,EAfiC,KAezBsB,EAfyB,KAgFxC,OA9DA/M,qBAAU,WACR,GAAa,KAATJ,EAQF,OAPAuM,EAAkB,IAAInZ,IAAU,IAChCqZ,EAAoB,IAAIrZ,IAAU,IAClCuZ,EAAmB,IAAIvZ,IAAU,IACjCwZ,EAAmB,IAAIxZ,IAAU,IACjCyZ,EAAqB,IAAIzZ,IAAU,IACnC0Z,EAAqB,IAAI1Z,IAAU,SACnC4Z,EAAc,GAGhB,IAAI3M,GAAc,EAXJ,SAaCC,IAbD,2EAad,kEAAA/O,EAAA,sEAIYyH,QAAQC,IAAI,CACpBrD,GAAgB7E,EAAUiP,GAC1B7J,GAAkBpF,EAAUiP,EAAMhP,GAClC4E,GAAgB5E,EAAWgP,GAC3B/J,GAAoBjF,GACpBuF,GAAmBvF,EAAWgP,GAC9B3J,GAAiBrF,EAAWgP,GAC5BvJ,GAAYzF,EAAWgP,GACvBL,KAEAhJ,GAAc3F,EAAWgP,GACzBnJ,GAAe7F,EAAWgP,KAf9B,oCAEIU,EAFJ,KAEgB0M,EAFhB,KAE8BC,EAF9B,KAE2CC,EAF3C,KAEuD3M,EAFvD,KAEsEC,EAFtE,KAEqFiC,EAFrF,KAE6F/C,EAF7F,KAGIyN,EAHJ,KAGmBC,EAHnB,KAkBQlB,EAAiB1O,GAAe8C,EAAY3P,GAC5C2b,EAAkB9O,GAAeyP,EAAarc,GAC9CgZ,EAAkBpM,GAAe0P,EAAYtc,GAC7CqQ,EAAoBzD,GAAe+C,EAAe3P,GAClDsQ,EAAoB1D,GAAegD,EAAe5P,GAClD+b,EAAa5P,SAAS0F,EAAQ,IAC9BjM,EAAauG,SAASoQ,EAAe,IACrCzW,EAAcqG,SAASqQ,EAAgB,IAExCnN,IACHkM,EAAkB,IAAInZ,IAAUkZ,IAChCG,EAAoB,IAAIrZ,IAAUga,IAClCT,EAAmB,IAAIvZ,IAAUsZ,IACjCE,EAAmB,IAAIxZ,IAAU4W,IACjC6C,EAAqB,IAAIzZ,IAAUiO,IACnCyL,EAAqB,IAAI1Z,IAAUkO,IACnC0L,EAAcD,GACdG,EAAsB1N,KAAKiO,IAAI7W,EAAYE,IAC3CqW,EAAUrN,IAAgBrP,EvBjFI,GuBiFmC,IApCrE,6CAbc,sBAoDd6P,IACA,IAAMC,EAAKC,YAAYF,EAAgB,MAGvC,OAAO,WACLD,GAAc,EACdI,cAAcF,MAEf,CAACP,IAGF,oCACE,kBAAC,GAAD,CAAYgE,KAAM,uBAAG6B,UAAU,sBAAuBwC,KAAM3F,EAAE,SAE9D,kBAAC,GAAD,CACEoH,kBAAmBwC,EACnBvC,mBAAoB2C,EACpB1C,gBAAiBA,EACjBC,qBAAsB5I,EACtB6I,qBAAsB5I,EACtB6I,cAAe4C,EACf3C,SAAU6C,IAGZ,kBAAC,GAAD,CACEjN,KAAMA,EACN3B,QAASiO,EACTlW,UAAWoW,EACX7L,cAAeU,EACfwB,OAAQkK,IAGV,kBAAC,GAAD,CACEpB,OAAQtK,EACRuK,OAAQtK,EACRuB,OAAQkK,EACRlB,OAAQA,MC1GD6B,OAZf,YAAwD,IAAjCrJ,EAAgC,EAAhCA,MAAOsJ,EAAyB,EAAzBA,IACtBC,EAAS,IAAIxa,IAAUua,GAAK1F,WAElC,OACE,oCACE,yBAAKjG,MAAO,CAAEC,SAAU,GAAIC,QAAS,IAAMmC,GAC3C,yBAAKrC,MAAO,CAAEC,SAAU,GAAIC,QAAS,IAAM0L,KCkElCC,OA1Df,YAUuB,IAIjBC,EAbJ9N,EASoB,EATpBA,KACArM,EAQoB,EARpBA,MACAsD,EAOoB,EAPpBA,UAIAkS,GAGoB,EANpB4E,UAMoB,EALpBC,UAKoB,EAJpBC,WAIoB,EAHpB9E,OACA7P,EAEoB,EAFpBA,cACApD,EACoB,EADpBA,YACoB,EACAuM,eAAZC,EADY,EACZA,EACFwL,GAFc,EACTvL,KACQjD,OAAOyJ,IAU1B,OANE2E,EADCI,EAAa,EACA,EAAIA,EAEH,EAEjBJ,GAPqBpO,OAAOxJ,GAU1B,oCACA,kBAACoN,GAAA,EAAD,CAAK6H,QAASzI,EAAE,kBACd,yBAAKV,MAAO,CAAEoB,QAAS,SAErB,yBAAKpB,MAAO,CAAEuB,MAAO,QACnB,kBAAC,GAAD,CAAac,MAAO3B,EAAE,6BAA8BiL,IAAK1W,KAG3D,yBAAK+K,MAAO,CAAEuB,MAAO,SACrB,yBAAKvB,MAAO,CAAEuB,MAAO,MAAOkC,WAAY,OACtC,kBAAC1B,GAAA,EAAD,CACE2G,MAAI,EACJ1G,KAAM,kBAACsH,GAAA,EAAD,MACNpH,MAAOxB,EAAE,WACTc,QAAS,WACPzQ,EAAQ/B,IAEVmT,SAAmB,KAATnE,GAAerM,GAASsD,OAK1C,kBAACqM,GAAA,EAAD,CAAK6H,QAASzI,EAAE,eACd,yBAAKV,MAAO,CAACoB,QAAS,OAAQ0D,SAAU,SACtC,yBAAK9E,MAAO,CAAEgF,UAAW,SACrB,4BAAI,kBAAC,GAAD,CAAcK,MAAM,GAAGhJ,QAASyP,EAAaxG,OAAQ5E,EAAE,+CAC3D,4BAAI,kBAAC,GAAD,CAAc2E,MAAM,GAAGhJ,QAAS/E,EAAcgF,aAAa,KAAMgJ,OAAQ5E,EAAE,6DCtB5EyL,OAjCf,YAS4B,IAR1Bxa,EAQyB,EARzBA,MAKAya,GAGyB,EAPzBnX,UAOyB,EANzB8W,UAMyB,EALzBC,UAKyB,EAJzBC,WAIyB,EAHzBG,YACAjF,EAEyB,EAFzBA,MAEyB,EACL1G,eAAZC,EADiB,EACjBA,EACR,OAFyB,EACdC,KAGX,yBAAKX,MAAO,CAAEE,QAAS,KAAMkB,QAAS,OAAQ2D,WAAY,WACxD,yBAAK/E,MAAO,CAAEuB,MAAO,QACnB,kBAAC,GAAD,CAAac,MAAO3B,EAAE,WAAYiL,IAAKha,KAE1C,yBAAKqO,MAAO,CAAEgF,UAAW,QACpB,kBAAC,GAAD,CAAW9C,MAAOxB,EAAE,cAAe2F,KAAM+F,KAE3C,yBAAKpM,MAAO,CAAEgF,UAAW,QACvB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,cAAerE,QAAS8K,EAAO7B,OAAQ,UAEhE,yBAAKtF,MAAO,CAAEgF,UAAW,QACvB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,cAAerE,QAAS8K,EAAO7B,OAAQ,UAElE,yBAAKtF,MAAO,CAAEuB,MAAO,QACnB,kBAAC,GAAD,CAAWW,MAAOxB,EAAE,UAAW2F,KAAmB,eC9BlDgG,GAAa,IAAIjb,IAAU,IAAIkC,IAAI,IACzC,SAAS0Q,KACP,IAMIC,EAFgBzG,KAAK0G,MAAMC,KAAKC,MAAQ,KAJzB,WAQnBH,GAPoB,KAMNzG,KAAK0G,MAAMD,EANL,MASpBA,GARa,KAOKzG,KAAK0G,MAAMD,EAPhB,MASb,IAAMI,EAAc7G,KAAK0G,MAAMD,EARhB,IAUf,OADAA,GATe,GASGI,EACZ,IAAN,OAAW,EAAX,IAAgBA,EAAc,GAAK,GAAKA,EAAc,KAAO,GAAKA,GAAajJ,WAA/E,YAA6F6I,EAAiB,GAAK,GAAKA,EAAiB,KAAO,GAAKA,GAAgB7I,YAyGxJkR,OAtGf,YAAgD,IAAzBtO,EAAwB,EAAxBA,KAAwB,EACzByC,eAAZC,EADqC,EACrCA,EADqC,KAClCC,KACe1C,mBAAS,IAFU,mBAEtCtM,EAFsC,KAE/BiT,EAF+B,OAGX3G,mBAAS,GAHE,mBAGtChJ,EAHsC,KAG3B0P,EAH2B,OAID1G,mBAAS,IAAI7M,IAAU,IAJtB,mBAItC4V,EAJsC,KAItBQ,EAJsB,OAKCvJ,mBAAS,IAAI7M,IAAU,IALxB,mBAKtC6V,EALsC,KAKrBQ,EALqB,OAMHxJ,mBAAS,IAAI7M,IAAU,IANpB,mBAMtCkG,EANsC,KAMvBiV,EANuB,OAOrBtO,mBAAS,IAAI7M,IAAU,IAPF,mBAOhCob,GAPgC,aAQPvO,mBAAS,IAAI7M,IAAU,IARhB,mBAQtC8C,EARsC,KAQzBuY,EARyB,OASPxO,mBAAS,IATF,gCAUTA,mBAAS,aAVA,mBAUtCmO,EAVsC,KAU1BM,EAV0B,KAkBzCzI,EAFgBzG,KAAK0G,MAAMC,KAAKC,MAAQ,KAJzB,WAQf6H,EADczO,KAAK0G,MAAMD,EANT,MAOO7I,WAmD3B,OAlDAgD,qBAAU,WACR,IAAIC,GAAc,EACdwG,EAAW,IACX8H,EAAe,IACf9N,EAAoB,IACpB6I,EAAqB,IACrBkF,EAAU,IACVC,EAAiB,IAPP,SASCvO,IATD,2EASd,kCAAA/O,EAAA,yDACa,IAARyO,EADL,iCAGmGhH,QAAQC,IAAI,CACzGlC,GAAS/F,GACTgG,GAAahG,GACb4E,GAAgB7E,EAAUL,GAC1BkF,GAAgBjF,EAAKC,KAAMF,GAC3BwG,GAAalG,GACbiF,GAAoBlF,KAT1B,mCAGG8V,EAHH,KAGa8H,EAHb,KAG2B9N,EAH3B,KAG8C6I,EAH9C,KAGkEkF,EAHlE,KAG2EC,EAH3E,gBAaQ1X,EAAYyG,GAAegR,EAAS7d,GAErCsP,EAfP,oBAgBIuG,EAASzJ,SAAS0J,EAAU,KAC5BF,EAAaxJ,SAASwR,EAAc,KACpCnF,EAAkB5L,GAAeiD,EAAmB9P,IACpD0Y,EAAmB7L,GAAe8L,EAAoB/Y,EAAKE,WAC3D2d,EAAQ,IAAIpb,IAAU+D,IACtBuX,EAAc1I,MACdyI,EAAe7Q,GAAeiR,EAAgB9d,KAC1CoG,EAAUqU,cAAc,IAAIpY,IAAU,IAvB9C,kCAwBqCiG,GAAiBrI,EAAWqd,IAxBjE,QAwBYS,EAxBZ,OAyBMP,EAAiB3Q,GAAekR,EAAkB/d,IAzBxD,wBA2BMwd,EAAiB,IAAInb,IAAU,IA3BrC,6CATc,sBAwCdkN,IACA,IAAMC,EAAKC,YAAYF,EAAgB,KAGvC,OAAO,WACLD,GAAc,EACdI,cAAcF,MAEf,CAACP,IAGF,oCACE,kBAAC,GAAD,CAAYgE,KAAM,uBAAG6B,UAAU,mBAAoBwC,KAAM3F,EAAE,WAE3D,kBAAC,GAAD,CACE/O,MAAOA,EACPsD,UAAWA,EACX8W,UAAW9E,EACX+E,UAAWtd,EACXud,WAAYA,EACZG,WAAYA,EACZjF,MAAOF,EAAgB1K,UAAUyK,KAGnC,kBAAC,KAAD,CAAQK,QAAS3G,EAAE,mBAEnB,kBAAC,GAAD,CACE1C,KAAMA,EACNrM,MAAOA,EACPsD,UAAWA,EACX8W,UAAW9E,EACX+E,UAAWtd,EACXud,WAAYA,EACZ9E,MAAOF,EAAgB1K,UAAUyK,GACjC1P,cAAeA,EACfpD,YAAaA,MCxFN6Y,OA1Bf,YAE6B,IAD3BC,EAC0B,EAD1BA,KAAMC,EACoB,EADpBA,OAAQnU,EACY,EADZA,QAASoU,EACG,EADHA,QAASC,EACN,EADMA,WACN,EACN1M,eAAZC,EADkB,EAClBA,EACR,OAF0B,EACfC,KAEX,yBAAKX,MAAO,CAAEE,QAAS,KAAMkB,QAAS,OAAQ0D,SAAU,OAAQC,WAAY,WAC1E,yBAAK/E,MAAO,CAAEgF,UAAW,QACvB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,cAAerE,QAASD,GAAU4Q,EAAMC,GAAS3H,OAAQ,OAElF,yBAAKtF,MAAO,CAAEgF,UAAW,QACvB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,cAAerE,QAAS2Q,EAAM1H,OAAQ,SAE/D,yBAAKtF,MAAO,CAAEgF,UAAW,QACvB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,WAAYrE,QAASvD,KAE9C,yBAAKkH,MAAO,CAAEgF,UAAW,QACvB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,WAAYrE,QAAS6Q,EAAQ5Q,aAAa,KAAMgJ,OAAQ,OAEjF,yBAAKtF,MAAO,CAAEgF,UAAW,QACvB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,cAAerE,QAAS8Q,OCkFtCC,OA5Ff,YAE0B,IADxBpP,EACuB,EADvBA,KAAM3B,EACiB,EADjBA,QAASjI,EACQ,EADRA,UAAW4Y,EACH,EADGA,KACH,EACHvM,eAAZC,EADe,EACfA,EADe,KACZC,KACiC1C,mBAAS,IAAI7M,IAAU,KAF5C,mBAEhBic,EAFgB,KAEAC,EAFA,OAGOrP,mBAAS,IAAI7M,IAAU,IAH9B,mBAGhB8b,EAHgB,KAGPK,EAHO,KAKjBC,EAAa,uCAAG,WAAOH,GAAP,mBAAA9d,EAAA,0DAChB8d,EAAeI,IAAI,IAAIrc,IAAU,IADjB,uBAElBmc,EAAW,IAAInc,IAAU,IAFP,iCAKdsc,EAAqBrS,GAAagS,EAAgBte,GALpC,SAMEsI,GAAiBrI,EAAW0e,GAN9B,OAMdR,EANc,OAOdS,EAAmB/R,GAAesR,EAASne,GACjDwe,EAAWI,GARS,2CAAH,sDAWnB,OACE,kBAACrM,GAAA,EAAD,CAAK6H,QAASzI,EAAE,aACyB,IAAtCtM,EAAUgV,WAAW/V,IACpB,yBAAK2M,MAAO,CAACoB,QAAS,OAAQ0D,SAAU,SAEtC,yBAAK9E,MAAO,CAACgF,UAAW,QACtB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,WAAYrE,QAASA,EAASiJ,OAAQ,UAE/D,yBAAKtF,MAAO,CAACgF,UAAW,SAExB,yBAAKhF,MAAO,CAACgF,UAAW,MAAOvB,WAAY,OACzC,yBAAKzD,MAAO,CAACoB,QAAS,SACpB,yBAAKpB,MAAO,CAACuB,MAAO,MAAO8H,SAAU,QACnC,oCACE,kBAAC,GAAD,CACEd,UAAU,MACVpV,MAAOka,EACP/E,OAAQ,SAACnV,GACPma,EAAkBna,GAClB8I,GAAM9I,GAASqa,EAAcra,GAASqa,EAAc,IAAIpc,IAAU,OAGtE,kBAAC,GAAD,CACEoQ,QAAS,WACP,IAAMoM,EAAoBZ,EAAK5D,WAAW/M,GAAW,EAAIA,EAAU2Q,EACnEM,EAAkBM,GAClBJ,EAAcI,QAKtB,yBAAK5N,MAAO,CAACuB,MAAO,MAAO8H,SAAU,QACnC,kBAACtH,GAAA,EAAD,CACE2G,MAAI,EACJ1G,KAAM,kBAACyH,GAAA,EAAD,MACNvH,MAAOxB,EAAE,QACTc,QAAS,WACP/P,EACEzC,EACAqM,GAAagS,EAAgBte,KAGjCoT,SAAmB,KAATnE,GAAegP,EAAK9Q,UAAYG,EAAQH,WAAaD,GAAMoR,OAI3E,kBAAC,GAAD,CAAcnL,MAAOxB,EAAE,YAAapQ,IAAK+c,EAAetU,KAAKmU,OAIjE,yBAAKlN,MAAO,CAACoB,QAAS,OAAQ0D,SAAU,SAEtC,yBAAK9E,MAAO,CAACgF,UAAW,QACtB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,eAAgBrE,QAASA,KAElD,yBAAK2D,MAAO,CAACgF,UAAW,SAExB,yBAAKhF,MAAO,CAACgF,UAAW,MAAOvB,WAAY,OACzC,kBAAC1B,GAAA,EAAD,CACE2G,MAAI,EACJ1G,KAAM,kBAACsH,GAAA,EAAD,MACNpH,MAAOxB,EAAE,WACTc,QAAS,WACPrR,EAAQpB,EAAUC,IAEpBmT,SAAmB,KAATnE,Q,UChBT6P,OAxEf,YAE0B,IADxB7P,EACuB,EADvBA,KAAM8P,EACiB,EADjBA,aAAczY,EACG,EADHA,gBACG,EACHoL,eAAZC,EADe,EACfA,EADe,KACZC,KACiB1C,mBAAS,KAFd,mBAEhBpH,EAFgB,KAERkX,EAFQ,OAGC9P,mBAAS,GAHV,mBAGhB6E,EAHgB,KAGVC,EAHU,OAIe9E,oBAAS,GAJxB,mBAIhB+P,EAJgB,KAIHC,EAJG,KAuCvB,OAhCA7P,qBAAU,WACR,GAAa,KAATJ,EAAJ,CACA,IAAIK,GAAc,EAoBlBC,IACA,IAAMC,EAAKC,YAAYF,EAAgB,MAGvC,OAAO,WACLD,GAAc,EACdI,cAAcF,IA5BF,SAICD,IAJD,2EAId,oCAAA/O,EAAA,sEACiCmI,GAAgB1I,EAAWgP,GAD5D,cACQkQ,EADR,OAEQC,EAAeD,EAAiBnX,KAAI,SAAAqB,GAAC,OAAI+C,SAAS/C,EAAEzG,UAF5D,SAGiCiF,GAAyB5H,EAAWgP,EAAMmQ,GAH3E,cAGQxX,EAHR,gBAImCS,GAA0BpI,EAAWmf,GAJxE,OAIQC,EAJR,OAMQ5V,EAAe0V,EAAiBnX,KAAI,SAACpF,EAAOoL,GAGhD,OAFApL,EAAM0K,QAAU,IAAIjL,IAAUuF,EAAiBoG,IAC/CpL,EAAM0c,WAAaD,EAAmBrR,GAC/BpL,KAGJ0M,IAEH0P,EAAUvV,GACVyV,GAAe,IAfnB,6CAJc,yBA8Bb,CAACjQ,EAAM3I,IAGR,kBAACiZ,GAAA,EAAD,CACEC,OAAQ,CAAC7N,EAAE,SAAUA,EAAE,aAAcA,EAAE,WAAYA,EAAE,WAAY,IACjEG,OAAuBH,EAAdsN,EAAgB,UAAe,WAExCQ,QAASV,EAAejX,EAAOgB,QAAO,SAAClG,GAAD,OAAYA,EAAM0K,QAAQH,YAAYrF,EAC5E4X,eAAgB,GAChB3L,KAAMA,EACN4L,aAAc3L,EACd4L,YAAa,SAAChd,GAAD,MAAW,CACtBA,EAAMA,MAAMyJ,WACZoB,GAASZ,GAAejK,EAAMmH,QAAS/J,GAAe,GACtDyN,GAASZ,GAAejK,EAAM0K,QAAStN,GAAe,GACtD4C,EAAM0c,WAAWjT,WACjB,kBAAC2G,GAAA,EAAD,CACEC,KAAM,kBAACsH,GAAA,EAAD,MACNpH,MAAOxB,EAAE,UACTc,QAAS,kBAAM9P,EACb1C,EACA2C,EAAMA,MACNA,EAAM0K,QAAQmN,cAAcnO,GAAahG,EAAiBtG,IACtDsM,GAAahG,EAAiBtG,GAC9B4C,EAAM0K,UAEZ8F,SAAUxQ,EAAM0K,QAAQH,gB,UC5BnB0S,OAlDf,WACE,IAAMC,EAAoBhc,EAAc,oBAAqB,KADvC,EAEgBoL,mBAA+B,MAAtB4Q,GAFzB,mBAEfC,EAFe,KAEFC,EAFE,KAGhBvI,EAAQ3D,eAEd,OACE,kBAACmM,GAAA,EAAD,CAAOC,QAASH,EAAaI,aAAa,GACxC,yBAAKlP,MAAO,CAAEuB,MAAO,SACnB,yBAAKvB,MAAO,CAAEC,SAAU,GAAIC,QAAS,EAAGiP,MAAO3I,EAAM4I,UAArD,WAIA,yBAAKpP,MAAO,CACVuC,WAAY,KACZtC,SAAU,GACVC,QAAS,IAET,4WASA,yBAAKF,MAAO,CACVE,QAAS,GACT0B,UAAW,SACXuN,MAAO3I,EAAM6I,wBAHf,wD/BzBuB,G+ByBvB,aAUF,yBAAKrP,MAAO,CAAE4B,UAAW,UACvB,kBAACG,GAAA,EAAD,CACEG,MAAO,eACPV,QAAS,WACPtO,GAAgB,oBAAqB,KACrC6b,GAAe,UCvBvB1C,GAAa,IAAIjb,IAAU,IAAIkC,IAAI,IAyI1Bgc,OAvIf,YAAiD,IAAzBtR,EAAwB,EAAxBA,KACdoM,EAAaC,cAAbD,SACJA,IACFpM,EAAOoM,GAHqC,MAK1B3J,eAAZC,EALsC,EAKtCA,EACF6O,GANwC,EAKnC5O,KACgB9N,EAAc,sBAAuB,MANlB,EAQhBoL,mBAAS,IAAI7M,IAAU,IARP,mBAQvCiL,EARuC,KAQ9BmT,EAR8B,OASZvR,mBAAS,IAAI7M,IAAU,IATX,mBASvCgD,EATuC,KAS5Bqb,EAT4B,OAUlBxR,mBAAS,IAAI7M,IAAU,IAVL,mBAUvC6b,EAVuC,KAU/ByC,EAV+B,OAWhBzR,mBAAS,IAAI7M,IAAU,IAXP,mBAWvC0H,EAXuC,KAW9B6W,EAX8B,OAYV1R,mBAAS,IAAI7M,IAAU,IAZb,mBAYvC+b,EAZuC,KAY3ByC,EAZ2B,OAaJ3R,mBAAS,IAAI7M,IAAU,IAbnB,mBAavCkG,EAbuC,KAaxBiV,EAbwB,OActBtO,mBAAS,IAAI7M,IAAU,IAdD,mBAcvC4b,EAduC,KAcjCR,EAdiC,OAeNvO,mBAAgC,MAAvBsR,GAfH,mBAevCzB,EAfuC,KAezB+B,EAfyB,KAyF9C,OAxEAzR,qBAAU,WACR,GAAa,KAATJ,EAGF,OAFAwR,EAAW,IAAIpe,IAAU,SACzBqe,EAAa,IAAIre,IAAU,IAG7B,IAAIiN,GAAc,EANJ,SAQCC,IARD,2EAQd,oCAAA/O,EAAA,sEAC2CyH,QAAQC,IAAI,CACnDrD,GAAgB7E,EAAUiP,GAC1B7J,GAAkBpF,EAAUiP,EAAMhP,KAHtC,mCACS8gB,EADT,KACqBC,EADrB,KAMQ3Q,EAAcxD,GAAekU,EAAY/gB,GAE1CsP,IACHmR,EAAW,IAAIpe,IAAUgO,IACzBqQ,EAAa,IAAIre,IAAU2e,IAC1B,IAAI3e,IAAU2e,IAXnB,4CARc,sBAsBdzR,IACA,IAAMC,EAAKC,YAAYF,EAAgB,MAGvC,OAAO,WACLD,GAAc,EACdI,cAAcF,MAEf,CAACP,IAEJI,qBAAU,WACR,IAAIC,GAAc,EADJ,SAGCC,IAHD,2EAGd,gDAAA/O,EAAA,sEACgEyH,QAAQC,IAAI,CACxEhD,GAAoBlF,GACpBmG,GAAalG,GACbsG,GAAgBtG,GAChBoG,GAAmBpG,KALvB,sCACSghB,EADT,KACoBpD,EADpB,KAC6BqD,EAD7B,KACyCC,EADzC,KAQQhc,EAAc0H,GAAeoU,EAAWjhB,GACxCoG,EAAYyG,GAAegR,EAAS7d,GACpCwG,EAAeqG,GAAeqU,EAAYlhB,GAC1CsG,EAAkBuG,GAAesU,EAAenhB,GAEjDsP,EAbP,oBAcIqR,EAAU,IAAIte,IAAU8C,IACxBsY,EAAQ,IAAIpb,IAAU+D,IACtBwa,EAAW,IAAIve,IAAUmE,IACzBqa,EAAc,IAAIxe,IAAUiE,KAExBF,EAAUqU,cAAc,IAAIpY,IAAU,IAnB9C,kCAoBqCiG,GAAiBrI,EAAWqd,IApBjE,QAoBYS,EApBZ,OAqBMP,EAAiB3Q,GAAekR,EAAkB/d,IArBxD,wBAuBMwd,EAAiB,IAAInb,IAAU,IAvBrC,6CAHc,sBA8BdkN,IACA,IAAMC,EAAKC,YAAYF,EAAgB,MAGvC,OAAO,WACLD,GAAc,EACdI,cAAcF,MAEf,CAACP,IAGF,oCACE,kBAAC,GAAD,MAEA,kBAAC,GAAD,CAAYgE,KAAM,uBAAG6B,UAAU,sBAAuBwC,KAAM3F,EAAE,mBAE9D,kBAAC,GAAD,CACEsM,KAAMA,EACNC,OAAQA,EACRnU,QAASA,EACToU,QAAS5V,EACT6V,WAAYA,IAGd,kBAAC,KAAD,CAAQ9F,QAAS3G,EAAE,cAEnB,kBAAC,GAAD,CACE1C,KAAMA,EACN5J,UAAWA,EACXiI,QAASA,EACT2Q,KAAMA,IAGR,yBAAKhN,MAAO,CAAEoB,QAAS,SACrB,kBAAC,KAAD,CAAQiG,QAAS3G,EAAE,aACnB,yBAAKV,MAAO,CAAEuC,WAAY,OAAQ4N,UAAW,aAC3C,kBAACC,GAAD,CACE/J,KAAM3F,EAAE,iBACR6F,QAAS,SAACD,GACRpT,GAAgB,sBAAuBoT,EAAU,IAAM,KACvDuJ,EAAgBvJ,IAElBA,QAASwH,MAKf,kBAAC,GAAD,CACE9P,KAAMA,EACN8P,aAAcA,EACdzY,gBAAiB8X,MC1InBvF,GAAa,CAAC,SAAU,QAAS,UAyBxByI,OAvBf,YAE2B,IADzBC,EACwB,EADxBA,MAAOC,EACiB,EADjBA,WAAYpI,EACK,EADLA,cAAe3Q,EACV,EADUA,eACV,EACJiJ,eAAZC,EADgB,EAChBA,EACR,OAFwB,EACbC,KAEX,yBAAKX,MAAO,CAAEE,QAAS,KAAMkB,QAAS,OAAQ0D,SAAU,OAAQC,WAAY,WAC1E,yBAAK/E,MAAO,CAAEgF,UAAW,QACvB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,iBAAkBrE,QAASD,GAAUkU,EAAOC,GAAajL,OAAO,OAEzF,yBAAKtF,MAAO,CAAEgF,UAAW,QACvB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,sBAAuBrE,QAAS5I,GAA8B6I,aAAa,KAAMgJ,OAAO,OAEjH,yBAAKtF,MAAO,CAAEgF,UAAW,QACvB,kBAAC,GAAD,CAAW9C,MAAOxB,EAAE,UAAW2F,KAAM3F,EAAEkH,GAAWO,OAEpD,yBAAKnI,MAAO,CAAEgF,UAAW,QACvB,kBAAC,GAAD,CAAc9C,MAAOxB,EAAE,kBAAmBQ,QAAS1J,O,SC/BlD,SAASgZ,GAAe7e,EAAOuJ,EAAOuV,EAAQzC,EAAa7d,EAASugB,EAAQC,GACjF,OAAc,IAAVzV,EACK,MAELvJ,EAAQuJ,EACH,UAELvJ,EAASuJ,EAAQuV,EACZ,SAELzC,EACK,YAGLrc,EAASuJ,EAAQuV,GAGjBtgB,EAAQ4I,KAAK2X,GAAQnU,UAAUoU,GAAOvH,WAAW5V,IAAqB,EAFjE,WAKFrD,EAAQiZ,WAAWsH,GAAU,EAAI,WAAa,WAGhD,SAASE,GAAWN,EAAkBC,GAC3C,OAAOD,EAAMtU,IAAIuU,GAAYnH,WAAW3V,KAAkC,ECV5E,SAASod,GAAmBhf,GAC1B,MAAQ,yBAAyBif,KAAKjf,GAiDzBkf,OA9Cf,YAE2B,IADzB/S,EACwB,EADxBA,KAAMsS,EACkB,EADlBA,MAAOC,EACW,EADXA,WAAYpI,EACD,EADCA,cACD,EACUlK,mBAAS,MADnB,mBACjBpM,EADiB,KACNmf,EADM,OAEJvQ,eAAZC,EAFgB,EAEhBA,EACR,OAHwB,EAEbC,KAET,kBAACW,GAAA,EAAD,CAAK6H,QAASzI,EAAE,YACd,yBAAKV,MAAO,CAACoB,QAAS,OAAQ0D,SAAU,SAEtC,yBAAK9E,MAAO,CAACgF,UAAW,MAAOvB,WAAY,OACzC,oCACE,kBAAC+E,GAAA,EAAD,CACEE,MAAI,EACJvV,MAAOtB,EACP8U,SAAU,SAACjO,GACLA,EAAMkQ,OAAOzV,MACf6d,EAAatY,EAAMkQ,OAAOzV,OAE1B6d,EAAa,WAMvB,yBAAKhR,MAAO,CAACgF,UAAW,QAExB,yBAAKhF,MAAO,CAACgF,UAAW,MAAOvB,WAAY,OACzC,kBAAC1B,GAAA,EAAD,CACE2G,MAAI,EACJ1G,KAAM,kBAACiP,GAAA,EAAD,MACN/O,MAAOxB,EAAE,WACTc,QAAS,WACP5P,EACE5C,EACA6C,EACA,IAGJsQ,SAAmB,KAATnE,IAAgB4S,GAAWN,EAAOC,KAAgBM,GAAmBhf,IAAgC,IAAlBsW,Q,kBC1B1F+I,G,mFAAf,WAA+Bvf,EAAewf,GAA9C,yBAAA5hB,EAAA,sEACkC0E,GAAoBjF,GADtD,cACQoiB,EADR,gBAE6Bpa,QAAQC,IAAIka,EAAUpa,KAAI,SAACsa,GAAD,OAAO/a,GAAiBtH,EAAWqiB,EAAExf,eAF5F,cAEQyf,EAFR,gBAGyBta,QAAQC,IAAIka,EAAUpa,KAAI,SAACsa,GAAD,OAAOvb,GAAc9G,EAAWqiB,EAAExf,eAHrF,cAGQ0f,EAHR,iBAI0Bva,QAAQC,IAAIka,EAAUpa,KAAI,SAACsa,GAAD,OAAOrb,GAAahH,EAAWqiB,EAAExf,eAJrF,eAIQ2f,EAJR,iBAK0Bxa,QAAQC,IAAIka,EAAUpa,IAAV,uCAAc,WAAOsa,GAAP,eAAA9hB,EAAA,yDAC1CkiB,EAAMJ,EAAEnW,MAAQmW,EAAEZ,OAAS,IAC7B9e,EAAQ8f,GAFoC,gCAGjC7b,GAAiB5G,EAAWyiB,GAHK,wEAKzCL,GALyC,2CAAd,wDALtC,QAaE,IARMM,EALR,OAaW3U,EAAI,EAAGA,EAAIoU,EAAUphB,OAAQgN,IACpCoU,EAAUpU,GAAG4U,MAASR,EAAUphB,OAASgN,EACzCoU,EAAUpU,GAAG7B,MAAQC,SAASgW,EAAUpU,GAAG7B,OAC3CiW,EAAUpU,GAAG0T,OAAStV,SAASgW,EAAUpU,GAAG0T,QAC5CU,EAAUpU,GAAG8D,OAAS2P,GACpB7e,EACAwf,EAAUpU,GAAG7B,MACbiW,EAAUpU,GAAG0T,OACba,EAAavU,GACb,IAAI3L,IAAUmgB,EAASxU,IACvB,IAAI3L,IAAUogB,EAAUzU,IACxB,IAAI3L,IAAUsgB,EAAU3U,KAxB9B,yBA2BSoU,GA3BT,6C,sBA2FeS,OA7Df,YAA0D,IAA/B5T,EAA8B,EAA9BA,KAA8B,EACnCyC,eAAZC,EAD+C,EAC/CA,EACFgC,GAFiD,EAC5C/B,KACKgC,eAFuC,EAGrB1E,mBAAqB,IAHA,mBAGhDkT,EAHgD,KAGrCU,EAHqC,OAI/B5T,mBAAS,GAJsB,mBAIhD6E,EAJgD,KAI1CC,EAJ0C,OAKjB9E,oBAAS,GALQ,mBAKhD+P,EALgD,KAKnCC,EALmC,KAgCvD,OAzBA7P,qBAAU,WACR,IAAIC,GAAc,EADJ,SAGCC,IAHD,2EAGd,oCAAA/O,EAAA,sEACyCyH,QAAQC,IAAI,CACjDlC,GAAS/F,GACToK,GAAgBpK,KAHpB,sCACS6V,EADT,KACmBiN,EADnB,KAMOzT,EANP,iCAOqC6S,GAAgB/V,SAAS0J,GAAWiN,GAPzE,OAOUC,EAPV,OAQIF,EAAaE,GACb9D,GAAe,GATnB,6CAHc,sBAed3P,IACA,IAAMC,EAAKC,YAAYF,EAAgB,MAGvC,OAAO,WACLD,GAAc,EACdI,cAAcF,MAEf,CAACP,IAGF,kBAACsQ,GAAA,EAAD,CACEC,OAAQ,CAAC7N,EAAE,YAAaA,EAAE,aAAcA,EAAE,YAAaA,EAAE,YAAaA,EAAE,YAAaA,EAAE,UAAW,IAClGG,OAAuBH,EAAdsN,EAAgB,UAAe,WAExCQ,QAAS2C,EACT1C,eAAgB,GAChB3L,KAAMA,EACN4L,aAAc3L,EACd4L,YAAa,SAACqD,GAAD,MAAc,CACzB,IAAMA,EAASL,MACf,kBAAC,GAAD,CAAczP,MAAM,GAAGhB,QAAS8Q,EAASngB,YACzCmgB,EAAS9W,MAAME,YACd4W,EAAS9W,MAAQ8W,EAASvB,QAAQrV,WACnC,kBAAC,GAAD,CAAc8G,MAAM,GAAGhB,QAAS8Q,EAASzhB,UACzCyhB,EAASnR,OACT,kBAACkB,GAAA,EAAD,CACE2G,MAAI,EACJ1G,KAAM,kBAACiQ,GAAA,EAAD,MACN/P,MAAM,QACNV,QAAS,WACPkB,EAAQgB,KAAR,gCAAsCsO,EAASngB,oBCJ5CqgB,OA7Ff,YAA+C,IAAzBlU,EAAwB,EAAxBA,KAAwB,EACxByC,eAAZC,EADoC,EACpCA,EADoC,KACjCC,KACe1C,mBAAS,IAAI7M,IAAU,KAFL,mBAErCkf,EAFqC,KAE9B6B,EAF8B,OAGRlU,mBAAS,IAAI7M,IAAU,IAHf,mBAGrCmf,EAHqC,KAGzB6B,EAHyB,OAIRnU,mBAAS,GAJD,mBAIrC8M,EAJqC,KAIzBC,EAJyB,OAKA/M,mBAAS,MALT,mBAKrCzG,EALqC,KAKrB6a,EALqB,KA4D5C,OArDAjU,qBAAU,WACR,GAAa,KAATJ,EAGF,OAFAmU,EAAS,IAAI/gB,IAAU,SACvB4Z,EAAc,GAGhB,IAAI3M,GAAc,EANJ,SAQCC,IARD,2EAQd,kCAAA/O,EAAA,sEACsCyH,QAAQC,IAAI,CAC9CxC,GAAYzF,EAAWgP,GACvBpK,GAAgB5E,EAAWgP,KAH/B,mCACSsU,EADT,KACoBC,EADpB,KAMOlU,IACH8T,EAASvW,GAAe2W,EAAUvjB,IAClCgc,EAAc7P,SAASmX,EAAW,MARtC,4CARc,sBAmBdhU,IACA,IAAMC,EAAKC,YAAYF,EAAgB,MAGvC,OAAO,WACLD,GAAc,EACdI,cAAcF,MAEf,CAACP,IAEJI,qBAAU,WACR,IAAIC,GAAc,EADJ,SAGCC,IAHD,2EAGd,kCAAA/O,EAAA,sEACmDyH,QAAQC,IAAI,CAC3DhD,GAAoBjF,GACpBuI,GAAkBvI,KAHtB,mCACSwjB,EADT,KACwBC,EADxB,KAMOpU,IACH+T,EAAcxW,GAAe4W,EAAexjB,IAC5CqjB,EAAkBI,IARtB,4CAHc,sBAcdnU,IACA,IAAMC,EAAKC,YAAYF,EAAgB,MAGvC,OAAO,WACLD,GAAc,EACdI,cAAcF,MAEf,CAACP,IAGF,oCACE,kBAAC,GAAD,CAAYgE,KAAM,uBAAG6B,UAAU,gBAAiBwC,KAAM3F,EAAE,gBAExD,kBAAC,GAAD,CACE4P,MAAOA,EACPC,WAAYA,EACZpI,cAAe4C,EACfvT,eAAgBA,IAIhBoZ,GAAWN,EAAOC,GAChB,oCACE,kBAAC,KAAD,CAAQlJ,QAAS3G,EAAE,uBACnB,kBAAC,GAAD,CACE1C,KAAMA,EACNsS,MAAOA,EACPC,WAAYA,EACZpI,cAAe4C,KAInB,GAGJ,kBAAC,KAAD,CAAQ1D,QAAS3G,EAAE,uBAEnB,kBAAC,GAAD,CAAkB1C,KAAMA,M,2BCvFxB0U,GAAgB,CAAC,YAAa,UAAW,UAyEhCC,OAvEf,YAEe,IADb9gB,EACY,EADZA,UAAWye,EACC,EADDA,MAAOve,EACN,EADMA,KAAM8O,EACZ,EADYA,OACZ,EACQJ,eAAZC,EADI,EACJA,EACR,OAFY,EACDC,KAET,kBAACW,GAAA,EAAD,CAAK6H,QAAQ,QACX,yBAAKnJ,MAAO,CAACoB,QAAS,SAEpB,yBAAKpB,MAAO,CAACuB,MAAO,QAClB,kBAAC,GAAD,CAAc8D,MAAO3E,EAAE,YAAarE,QAASiU,EAAOhL,OAAS5E,EAAE,WAEjE,yBAAKV,MAAO,CAACuB,MAAO,QAClB,kBAAC,GAAD,CAAWW,MAAOxB,EAAE,WAAY2F,KAAM3F,EAAEgS,GAAc3gB,OAGxD,yBAAKiO,MAAO,CAACuB,MAAO,MAAOkC,WAAY,OACrC,kBAAC1B,GAAA,EAAD,CACE2G,MAAI,EACJ1G,KAAM,kBAAC4Q,GAAA,EAAD,MACN1Q,MAAOxB,EAAE,UACTc,QAAS,WACP5P,EACE5C,EACA6C,EACA,IAGJsQ,SAAqB,IAAXtB,GAAyB,IAAT9O,GAAcue,EAAMpU,YAIlD,yBAAK8D,MAAO,CAACuB,MAAO,QACpB,yBAAKvB,MAAO,CAACuB,MAAO,MAAOkC,WAAY,OACrC,kBAAC1B,GAAA,EAAD,CACE2G,MAAI,EACJ1G,KAAM,kBAAC6Q,GAAA,EAAD,MACN3Q,MAAOxB,EAAE,UACTc,QAAS,WACP5P,EACE5C,EACA6C,EACA,IAGJsQ,SAAqB,IAAXtB,GAAyB,IAAT9O,GAAcue,EAAMpU,YAIlD,yBAAK8D,MAAO,CAACuB,MAAO,QACpB,yBAAKvB,MAAO,CAACuB,MAAO,MAAOkC,WAAY,OACrC,yBAAKzD,MAAO,CAACoB,QAAS,SAClB,kBAACW,GAAA,EAAD,CACE2G,MAAI,EACJ1G,KAAM,kBAAC8Q,GAAA,EAAD,MACN5Q,MAAOxB,EAAE,UACTc,QAAS,WACP5P,EACE5C,EACA6C,EACA,IAGJsQ,SAAqB,IAAXtB,GAAyB,IAAT9O,GAAcue,EAAMpU,gBCpE9D,SAAS6W,GAAc5iB,EAAoBugB,EAAmBH,GAC5D,OAAOpgB,EAAQ4I,KAAK2X,GAAQpU,aAAa,KAAO0W,mBAAmBzC,GAAYhU,UAAU,KAG3F,IAsBe0W,GAtBI,SAAC,GAAD,IARD9iB,EAAoBugB,EASpC3a,EADiB,EACjBA,WAAYE,EADK,EACLA,UAAWsa,EADN,EACMA,WAAY2C,EADlB,EACkBA,kBADlB,OAGjB,yBAAKlT,MAAO,CAAEE,QAAS,KAAMkB,QAAS,OAAQ2D,WAAY,WACxD,yBAAK/E,MAAO,CAAEuB,MAAO,QACnB,kBAAC,GAAD,CAAc8D,MAAM,UAAUhJ,QAAStG,EAAYuP,OAAS,UAE9D,yBAAKtF,MAAO,CAAEuB,MAAO,QACnB,kBAAC,GAAD,CAAc8D,MAAM,SAAShJ,QAASpG,EAAWqP,OAAS,UAE5D,yBAAKtF,MAAO,CAAEuB,MAAO,QACnB,kBAAC,GAAD,CAAc8D,MAAM,WAAWhJ,SAnBnBlM,EAmBqC4F,EAnBjB2a,EAmB6Bza,EAlB1D9F,EAAQmM,aAAa,KAAO0W,mBAAmB7iB,EAAQ4I,KAAK2X,IAASnU,UAAU,MAkBT+I,OAAO,OAEjF4N,EACC,yBAAKlT,MAAO,CAACuB,MAAO,QAClB,kBAAC,GAAD,CAAc8D,MAAM,gBAAgBhJ,QAAS0W,GAAchd,EAAYE,EAAWsa,GAAajL,OAAO,OAC/F,KCTA6N,GAjBM,SAAC,GAAD,IAClBxhB,EADkB,EAClBA,MAAOsJ,EADW,EACXA,WAAYmY,EADD,EACCA,YADD,OAGnB,yBAAKpT,MAAO,CAAEE,QAAS,KAAMkB,QAAS,OAAQ2D,WAAY,WACxD,yBAAK/E,MAAO,CAAEuB,MAAO,QACnB,kBAAC,GAAD,CAAac,MAAM,QAAQsJ,IAAKha,KAElC,yBAAKqO,MAAO,CAAEuB,MAAO,QACnB,kBAAC,GAAD,CAAac,MAAM,SAASsJ,IAAK1Q,KAEnC,yBAAK+E,MAAO,CAAEuB,MAAO,QACnB,kBAAC,GAAD,CAAac,MAAM,SAASsJ,IAAKyH,O,SCoDxBC,OAtDf,YAEiB,IADfrV,EACc,EADdA,KAAMnM,EACQ,EADRA,UAAWF,EACH,EADGA,MAAOsJ,EACV,EADUA,WAAYmY,EACtB,EADsBA,YAAapF,EACnC,EADmCA,YAAasF,EAChD,EADgDA,SAChD,EACM7S,eAAZC,EADM,EACNA,EADM,EACHC,KAmBX,IAAM4S,EAlBN,SAAgB5hB,EAAOsJ,EAAYmY,EAAapF,EAAasF,GAC3D,OAAmB,IAAfrY,EACK,MAELtJ,EAAQsJ,EACH,UAELtJ,EAASsJ,EAAamY,EACjB,SAELpF,EACK,YAELsF,EACK,WAEF,WAECzS,CAAOlP,EAAOsJ,EAAYmY,EAAapF,EAAasF,GAE9D,OACE,kBAAChS,GAAA,EAAD,CAAK6H,QAAQ,UACX,yBAAKnJ,MAAO,CAACoB,QAAS,SAEpB,yBAAKpB,MAAO,CAAEuB,MAAO,QACnB,kBAAC,GAAD,CAAWW,MAAM,SAASmE,KAAMkN,KAElC,yBAAKvT,MAAO,CAACuB,MAAO,SAEpB,yBAAKvB,MAAO,CAACuB,MAAO,MAAOkC,WAAY,OACrC,yBAAKzD,MAAO,CAACoB,QAAS,SAClB,kBAACW,GAAA,EAAD,CACE2G,MAAI,EACJ1G,KAAM,kBAACwR,GAAA,EAAD,MACNtR,MAAOxB,EAAE,UACTc,QAAS,WACPxP,EACEhD,EACA6C,IAGJsQ,SAAmB,KAATnE,GAAqB,aAANuV,SC4F1BE,OAvIf,YAA8C,IAAzBzV,EAAwB,EAAxBA,KAAwB,EACvByC,eAAZC,EADmC,EACnCA,EACA7O,GAFmC,EAChC8O,KACW0J,cAAdxY,WAFmC,EAIPoM,mBAAS,IAAI7M,IAAU,IAJhB,mBAIpC2E,EAJoC,KAIxB2d,EAJwB,OAKTzV,mBAAS,IAAI7M,IAAU,IALd,mBAKpC6E,EALoC,KAKzB0d,EALyB,OAMP1V,mBAAS,IAAI7M,IAAU,IANhB,mBAMpCmf,EANoC,KAMxB6B,EANwB,OAOnBnU,mBAAS,GAPU,mBAOpClM,EAPoC,KAO9B6hB,EAP8B,OAQf3V,mBAAS,GARM,mBAQpC4C,EARoC,KAQ5BgT,EAR4B,OAST5V,mBAAS,IAAI7M,IAAU,IATd,mBASpC0iB,EAToC,KASzBC,EATyB,OAUjB9V,mBAAS,GAVQ,mBAUpCtM,EAVoC,KAU7BiT,EAV6B,OAWP3G,mBAAS,GAXF,mBAWpChD,EAXoC,KAWxB+Y,EAXwB,OAYL/V,mBAAS,GAZJ,mBAYpCmV,EAZoC,KAYvBa,EAZuB,OAaLhW,oBAAS,GAbJ,mBAapC+P,EAboC,KAavBC,EAbuB,KA+F3C,OAhFA7P,qBAAU,WACR,GAAa,KAATJ,EAIF,OAHA4V,EAAQ,GACRC,EAAU,QACVE,EAAa,IAAI3iB,IAAU,IAG7B,IAAIiN,GAAc,EAPJ,SASCC,IATD,2EASd,oCAAA/O,EAAA,sEAGYyH,QAAQC,IAAI,CACpBT,GAAgBxH,EAAWgP,EAAMnM,GACjC4C,GAAYzF,EAAWgP,GACvBpK,GAAgB5E,EAAWgP,KAN/B,mCAEIkW,EAFJ,KAEa5B,EAFb,KAEwB6B,EAFxB,KASO9V,IACHuV,EAAQzY,SAAS+Y,EAAS,KAC1BL,EAAU1Y,SAASmX,EAAW,KAC9ByB,EAAanY,GAAeuY,EAAcnlB,KAZ9C,4CATc,sBAwBdsP,IACA,IAAMC,EAAKC,YAAYF,EAAgB,MAGvC,OAAO,WACLD,GAAc,EACdI,cAAcF,MAEf,CAACP,EAAMnM,IAEVuM,qBAAU,WACR,IAAIC,GAAc,EADJ,SAGCC,IAHD,2EAGd,oDAAA/O,EAAA,sEAIYyH,QAAQC,IAAI,CACpBnB,GAAc9G,EAAW6C,GACzBmE,GAAahH,EAAW6C,GACxBoC,GAAoBjF,GACpB+F,GAAS/F,GACTkH,GAAYlH,EAAW6C,GACvBuE,GAAapH,EAAW6C,GACxByE,GAAiBtH,EAAW6C,KAXhC,sCAEIuiB,EAFJ,KAEmBC,EAFnB,KAEiC7B,EAFjC,KAGI3N,EAHJ,KAGcyP,EAHd,KAG2BC,EAH3B,KAGyChe,EAHzC,KAcQie,EAASrZ,SAAS0J,EAAU,IAC5B4P,EAAStZ,SAASmZ,EAAa,IAC/BI,EAAUvZ,SAASoZ,EAAc,MAGnCC,GADEG,EAAaF,EAASC,EAAU,IAlBxC,kCAoB0B9e,GAAiB5G,EAAW2lB,GApBtD,QAoBInC,EApBJ,eAuBOnU,IACHqV,EAAc9X,GAAewY,EAAeplB,IAC5C2kB,EAAa/X,GAAeyY,EAAcrlB,IAC1CojB,EAAcxW,GAAe4W,EAAexjB,IAC5C4V,EAAS4P,GACTR,EAAcS,GACdR,EAAeS,GACfzG,EAAe1X,IA9BnB,6CAHc,sBAoCd+H,IACA,IAAMC,EAAKC,YAAYF,EAAgB,MAGvC,OAAO,WACLD,GAAc,EACdI,cAAcF,MAEf,CAAC1M,IAGF,oCACE,kBAAC,GAAD,CAAYmQ,KAAM,uBAAG6B,UAAU,gBAAiBwC,KAAM3F,EAAE,eACxD,kBAACmB,GAAA,EAAD,CAAeC,OAAQjQ,EAAWsT,SAAS,IAE3C,kBAAC,GAAD,CACEpP,WAAYA,EACZE,UAAWA,EACXsa,WAAYA,EACZ2C,kBAAmBjY,EAAa,MAGlC,kBAAC,KAAD,CAAQoM,QAAS3G,EAAE,UACnB,kBAAC,GAAD,CACE7O,UAAWA,EACXye,MAAOwD,EACP/hB,KAAMA,EACN8O,OAAQA,IAGV,kBAAC,KAAD,CAAQwG,QAAS3G,EAAE,YACnB,kBAAC,GAAD,CACE/O,MAAOA,EACPsJ,WAAYA,EACZmY,YAAaA,IAGf,kBAAC,GAAD,CACEpV,KAAMA,EACNnM,UAAWA,EACXF,MAAOA,EACPsJ,WAAYA,EACZmY,YAAaA,EACbpF,YAAaA,EACbsF,SAAuG,aAA7F9C,GAAe7e,EAAOsJ,EAAYmY,GAAa,EAAOrd,EAAYE,EAAWsa,O,UClEhFqE,GA1DU,SAAC,GAMI,IAL5B1gB,EAK2B,EAL3BA,YACAuB,EAI2B,EAJ3BA,YAAaE,EAIc,EAJdA,YAAaN,EAIC,EAJDA,gBAC1Bwf,EAG2B,EAH3BA,cAAeC,EAGY,EAHZA,aAAcC,EAGF,EAHEA,cAC7BC,EAE2B,EAF3BA,mBAAoBC,EAEO,EAFPA,oBAEO,KAD3B9f,UAC2B,EADhBI,aACgB,EADF+B,cAELmJ,gBAAZC,EADmB,EACnBA,EACFwU,GAFqB,EAChBvU,KACYlL,EAAYsD,KAAKpD,GAAaoD,KAAK1D,IACpD8f,EAAkBN,EAAc9b,KAAK+b,GAAc/b,KAAKgc,GACxDK,EAAwBJ,EAAmBjc,KAAKkc,GAChDI,EAAoBnhB,EAAYX,MAAM2hB,GAAgB3hB,MAAM4hB,GAAiB5hB,MAAM6hB,GAEzF,OACE,oCACE,yBAAKpV,MAAO,CAACoB,QAAS,OAAQ0D,SAAU,SACtC,yBAAK9E,MAAO,CAAEgF,UAAW,MAAOvD,YAAa,OAC3C,kBAACH,GAAA,EAAD,CAAK6H,QAASzI,EAAE,sBACd,kBAAC4U,GAAA,EAAD,CACEnM,QAAO,gBAAM9L,GAAYnJ,EAAY+R,aACrCsP,MAAO,CACL,CAAEC,KAAM,MAAOC,YAAcrZ,GAAU8Y,EAAgBhhB,GAAa+R,WAAW5U,QAAQ,IACvF,CAAEmkB,KAAM,UAAWC,YAAcrZ,GAAU+Y,EAAiBjhB,GAAa+R,WAAW5U,QAAQ,IAC5F,CAAEmkB,KAAM9U,EAAE,eAAgB+U,YAAcrZ,GAAUiZ,EAAmBnhB,GAAa+R,WAAW5U,QAAQ,SAK7G,yBAAK2O,MAAO,CAAEgF,UAAW,MAAOvD,YAAa,OAC3C,kBAACH,GAAA,EAAD,CAAK6H,QAASzI,EAAE,kBACd,kBAAC4U,GAAA,EAAD,CACEnM,QAAO,gBAAM9L,GAAY6X,EAAejP,aACxCsP,MAAO,CACL,CAAEC,KAAM9U,EAAE,UAAW+U,YAAcrZ,GAAU3G,EAAayf,GAAgBjP,WAAW5U,QAAQ,IAC7F,CAAEmkB,KAAM9U,EAAE,UAAW+U,YAAcrZ,GAAUzG,EAAauf,GAAgBjP,WAAW5U,QAAQ,IAC7F,CAAEmkB,KAAM9U,EAAE,cAAe+U,YAAcrZ,GAAU/G,EAAiB6f,GAAgBjP,WAAW5U,QAAQ,SAK7G,yBAAK2O,MAAO,CAAEgF,UAAW,QACvB,kBAAC1D,GAAA,EAAD,CAAK6H,QAASzI,EAAE,sBACd,kBAAC4U,GAAA,EAAD,CACEnM,QAAO,gBAAM9L,GAAY8X,EAAgBlP,aACzCsP,MAAO,CACL,CAAEC,KAAM9U,EAAE,aAAc+U,YAAcrZ,GAAUyY,EAAeM,GAAiBlP,WAAW5U,QAAQ,IACnG,CAAEmkB,KAAM9U,EAAE,YAAa+U,YAAcrZ,GAAU0Y,EAAcK,GAAiBlP,WAAW5U,QAAQ,IACjG,CAAEmkB,KAAM9U,EAAE,aAAc+U,YAAcrZ,GAAU2Y,EAAeI,GAAiBlP,WAAW5U,QAAQ,YChDnH,SAASqkB,GAAY3b,EAAMC,GACzB,MAAgB,YAATD,EAAqB,OAASyC,GAASZ,GAAe,IAAIxK,IAAU4I,EAAKmN,OAAQpY,GAAe,GAGzG,SAAS4mB,GAAsB5b,EAAMC,GACnC,MAAgB,aAATD,EACL,IAAMyC,GAASZ,GAAe,IAAIxK,IAAU4I,EAAK4b,eAAgB7mB,GAAe,GAChF,QAGJ,SAAS8mB,GAAgB9b,EAAMC,GAC7B,MAAgB,aAATD,EACL,IAAMyC,GAASZ,GAAe,IAAIxK,IAAU4I,EAAK8b,UAAW/mB,GAAe,GAClE,aAATgL,EACE,IAAMyC,GAASZ,GAAe,IAAIxK,IAAU4I,EAAK+b,SAAUhnB,GAAe,GAC1E,QAGN,SAASinB,GAAkBjc,EAAMC,GAC/B,MAAgB,aAATD,EACL,IAAMyC,GAASZ,GAAe,IAAIxK,IAAU4I,EAAKic,WAAYlnB,GAAe,GAC5E,QAGJ,SAAS4f,GAAT,GAA4D,IAArC5U,EAAoC,EAApCA,KAAMC,EAA8B,EAA9BA,KAC3B,MAAO,CACLA,EAAKrI,MAAMyJ,WACXsa,GAAY3b,EAAMC,GAClB2b,GAAsB5b,EAAMC,GAC5B6b,GAAgB9b,EAAMC,GACtBgc,GAAkBjc,EAAMC,IAkDbkc,OA9Cf,YAE4B,IAD1BlY,EACyB,EADzBA,KACyB,EACLyC,eAAZC,EADiB,EACjBA,EADiB,KACdC,KAC2B1C,mBAAuB,KAFpC,mBAElBkY,EAFkB,KAELC,EAFK,OAGDnY,mBAAS,GAHR,mBAGlB6E,EAHkB,KAGZC,EAHY,OAIa9E,oBAAS,GAJtB,mBAIlB+P,EAJkB,KAILC,EAJK,KA+BzB,OAxBA7P,qBAAU,WACR,IAAIC,GAAc,EADJ,SAGCC,IAHD,2EAGd,gCAAA/O,EAAA,sEACiCyH,QAAQC,IAAI,CACzCuC,GAAkBxK,KAFtB,mCACSqnB,EADT,KAKOhY,IACH+X,EAAeC,GACfpI,GAAe,IAPnB,4CAHc,sBAcd3P,IACA,IAAMC,EAAKC,YAAYF,EAAgB,MAGvC,OAAO,WACLD,GAAc,EACdI,cAAcF,MAEf,CAACP,IAGF,kBAACsQ,GAAA,EAAD,CACEC,OAAQ,CAAC7N,EAAE,SAAUA,EAAE,SAAU,UAAOA,EAAE,cAAe,UAAMA,EAAE,QAAS,UAAMA,EAAE,WAClFG,OAAuBH,EAAdsN,EAAgB,UAAe,WACxCQ,QAAS2H,EACT1H,eAAgB,GAChB3L,KAAMA,EACN4L,aAAc3L,EACd4L,YAAaA,MCpFbtC,GAAa,IAAIjb,IAAU,IAAIkC,IAAI,IAmH1BgjB,OAjHf,YAA+C,IAAzBtY,EAAwB,EAAxBA,KAAwB,EACxByC,eAAZC,EADoC,EACpCA,EADoC,KACjCC,KAC2B1C,mBAAS,IAAI7M,IAAU,KAFjB,mBAErC8C,EAFqC,KAExBuY,EAFwB,OAGNxO,mBAAS,IAAI7M,IAAU,IAHjB,mBAGrCqE,EAHqC,KAGxB8gB,EAHwB,OAINtY,mBAAS,IAAI7M,IAAU,IAJjB,mBAIrCuE,EAJqC,KAIxB6gB,EAJwB,OAKEvY,mBAAS,IAAI7M,IAAU,IALzB,mBAKrCiE,EALqC,KAKpBohB,EALoB,OAMFxY,mBAAS,IAAI7M,IAAU,IANrB,mBAMrCyjB,EANqC,KAMtB6B,EANsB,OAOMzY,mBAAS,IAAI7M,IAAU,IAP7B,mBAOrCulB,EAPqC,KAOlBC,EAPkB,OAQQ3Y,mBAAS,IAAI7M,IAAU,IAR/B,mBAQrCylB,EARqC,KAQjBC,EARiB,OASkB7Y,mBAAS,IAAI7M,IAAU,IATzC,mBASrC2lB,EATqC,KASZC,EATY,OAUoB/Y,mBAAS,IAAI7M,IAAU,IAV3C,mBAUrC6lB,EAVqC,KAUXC,EAVW,OAWVjZ,mBAAS,IAAI7M,IAAU,IAXb,mBAWrC+D,EAXqC,KAW1BgiB,EAX0B,QAYJlZ,mBAAS,IAAI7M,IAAU,IAZnB,qBAYrCmE,GAZqC,MAYvB6hB,GAZuB,SAaFnZ,mBAAS,IAAI7M,IAAU,IAbrB,qBAarCkG,GAbqC,MAatBiV,GAbsB,MAiF5C,OAlEAnO,qBAAU,WACR,IAAIC,GAAc,EADJ,SAGCC,IAHD,2EAGd,0DAAA/O,EAAA,sEAC4BoO,KAD5B,cACQG,EADR,OAEQuZ,EAAoBxZ,GAAqBC,GAFjD,SAUY9G,QAAQC,IAAI,CACpBhD,GAAoBlF,GAEpByG,GAAexG,GACf0G,GAAe1G,GACfoG,GAAmBpG,GAEnB4E,GAAgB7E,EAAUL,GAC1B+L,GAAqBqD,GACrBnD,GAAsBmD,GAEtBrD,GAAqB4c,GACrB1c,GAAsB0c,GAEtBniB,GAAalG,GACbsG,GAAgBtG,KAzBpB,uCAKI6d,EALJ,KAMIyK,EANJ,KAMoBC,EANpB,KAMoCC,EANpC,KAOIC,EAPJ,KAOsBC,EAPtB,KAO4CC,EAP5C,KAQIC,EARJ,KAQgCC,EARhC,KASIC,EATJ,KASkBC,EATlB,MA4BO1Z,EA5BP,oBA6BIoO,EAAe7Q,GAAeiR,EAAgB9d,IAE9CwnB,EAAe3a,GAAe0b,EAAgBvoB,IAC9CynB,EAAe5a,GAAe2b,EAAgBxoB,IAC9C0nB,EAAmB7a,GAAe4b,EAAoBzoB,IAEtD2nB,EAAiB9a,GAAe6b,EAAkB1oB,IAClD6nB,EAAqBhb,GAAe8b,EAAsB3oB,IAC1D+nB,EAAsBlb,GAAe+b,EAAuB5oB,IAE5DioB,EAA2Bpb,GAAegc,EAA4B7oB,IACtEmoB,EAA4Btb,GAAeic,EAA6B9oB,IAExEooB,EAAavb,GAAekc,EAAc/oB,IAC1CqoB,GAAgBxb,GAAemc,EAAiBhpB,KAE5C,IAAIqC,IAAU0mB,GAActO,cAAc6C,IA7ClD,kCA8CqChV,GAAiBrI,EAAWqd,IA9CjE,QA8CYS,EA9CZ,OA+CMP,GAAiB3Q,GAAekR,EAAkB/d,IA/CxD,wBAiDMwd,GAAiB,IAAInb,IAAU,IAjDrC,6CAHc,sBAwDdkN,IACA,IAAMC,EAAKC,YAAYF,EAAgB,MAGvC,OAAO,WACLD,GAAc,EACdI,cAAcF,MAEf,CAACP,IAGF,oCACE,kBAAC,GAAD,CAAYgE,KAAM,uBAAG6B,UAAU,sBAAuBwC,KAAM3F,EAAE,uBAE9D,kBAAC,GAAD,CACExM,YAAaA,EAEbuB,YAAaA,EACbE,YAAaA,EACbN,gBAAiBA,EAEjBwf,cAAeA,EACfC,aAAc6B,EACd5B,cAAe8B,EAEf7B,mBAAoB+B,EACpB9B,oBAAqBgC,EAErB9hB,UAAWA,EACXI,aAAcA,GACd+B,cAAeA,KAGjB,kBAAC,KAAD,CAAQ+P,QAAS3G,EAAE,wBAEnB,kBAAC,GAAD,CACE1C,KAAMA,MCWC8K,OAhHf,YAE0B,IADxBhL,EACuB,EADvBA,YAAaE,EACU,EADVA,KAAM3B,EACI,EADJA,QAASjI,EACL,EADKA,UAAWuK,EAChB,EADgBA,cAAekC,EAC/B,EAD+BA,OAC/B,EACHJ,eAAZC,EADe,EACfA,EADe,KACZC,KAC+B1C,mBAAS,IAAI7M,IAAU,KAF1C,mBAEhB2X,EAFgB,KAEDC,EAFC,OAGqB/K,mBAAS,IAAI7M,IAAU,IAH5C,mBAGhB6X,EAHgB,KAGAC,EAHA,KAKvB,OACE,kBAAC5H,GAAA,EAAD,CAAK6H,QAASzI,EAAE,UACyB,IAAtCtM,EAAUgV,WAAW/V,IACpB,yBAAK2M,MAAO,CAACoB,QAAS,OAAQ0D,SAAU,SAEtC,yBAAK9E,MAAO,CAACgF,UAAW,QACtB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,UAAWrE,QAASsC,EAAe2G,OAAQ,YAGpE,yBAAKtF,MAAO,CAACgF,UAAW,MAAOvB,WAAY,OACzC,yBAAKzD,MAAO,CAACoB,QAAS,SACpB,yBAAKpB,MAAO,CAACuB,MAAO,MAAO8H,SAAU,QACnC,oCACE,kBAAC,GAAD,CACEd,UAAU,SACVpV,MAAO4V,EACPT,OAAQU,EACR7G,SAAqB,IAAXtB,IAEZ,kBAAC,GAAD,CACEW,QAAS,WACPwH,EAAiB3M,QAKzB,yBAAK2D,MAAO,CAACuB,MAAO,MAAO8H,SAAU,QACnC,kBAACtH,GAAA,EAAD,CACE2G,MAAI,EACJ1G,KAAiB,IAAXnB,EAAe,kBAACyI,GAAA,EAAD,MAAoB,kBAACC,GAAA,EAAD,MACzCrH,MAAOxB,EAAE,WACTc,QAAS,WACPvP,EACE6L,EACAzC,GAAa0N,EAAera,IAC5B,SAACoC,GAAD,OAAUkY,EAAiB,IAAI5X,IAAU,QAG7C+Q,SAA0B,KAAhBrE,GAAiC,IAAX+C,IAAiB5E,GAAM8M,QAK/D,yBAAK/I,MAAO,CAACgF,UAAW,QAExB,yBAAKhF,MAAO,CAACgF,UAAW,MAAOvB,WAAY,OACzC,yBAAKzD,MAAO,CAACoB,QAAS,SACpB,yBAAKpB,MAAO,CAACuB,MAAO,MAAO8H,SAAU,QACnC,oCACE,kBAAC,GAAD,CACEd,UAAU,SACVpV,MAAO8V,EACPX,OAAQY,EACR/G,SAAqB,IAAXtB,IAEZ,kBAAC,GAAD,CACEW,QAAS,WACP0H,EAAkBvK,QAK1B,yBAAKqB,MAAO,CAACuB,MAAO,MAAO8H,SAAU,QACnC,kBAACtH,GAAA,EAAD,CACE2G,MAAI,EACJ1G,KAAiB,IAAXnB,EAAe,kBAAC4I,GAAA,EAAD,MAAqB,kBAACF,GAAA,EAAD,MAC1CrH,MAAOxB,EAAE,YACTc,QAAS,WACPnP,EACEyL,EACAzC,GAAa4N,EAAgBva,IAC7B,SAACoC,GAAD,OAAUoY,EAAkB,IAAI9X,IAAU,QAG9C+Q,SAA0B,KAAhBrE,GAAiC,IAAX+C,IAAiB5E,GAAMgN,SAOjE,yBAAKjJ,MAAO,CAACoB,QAAS,OAAQ0D,SAAU,SAEtC,yBAAK9E,MAAO,CAACgF,UAAW,QACtB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,UAAWrE,QAASsC,EAAe2G,OAAQ,YAEpE,yBAAKtF,MAAO,CAACgF,UAAW,SAExB,yBAAKhF,MAAO,CAACgF,UAAW,MAAOvB,WAAY,OACzC,kBAAC1B,GAAA,EAAD,CACE2G,MAAI,EACJ1G,KAAM,kBAACsH,GAAA,EAAD,MACNpH,MAAOxB,EAAE,WACTc,QAAS,WACPrR,EAAQzB,EAAUoP,IAEpBqE,SAA0B,KAAhBrE,GAA+B,KAATE,QCT/B0L,OA/Ff,YAEqB,IADnB5L,EACkB,EADlBA,YAAa6L,EACK,EADLA,OAAQC,EACH,EADGA,OAAQ/I,EACX,EADWA,OAAQgJ,EACnB,EADmBA,OACnB,EACEpJ,eAAZC,EADU,EACVA,EADU,KACPC,KACyB1C,mBAAS,IAAI7M,IAAU,KAFzC,mBAEX0Y,EAFW,KAECC,EAFD,OAGsB9L,mBAAS,IAAI7M,IAAU,IAH7C,mBAGX4Y,EAHW,KAGGC,EAHH,KAKlB,OACE,kBAAC3I,GAAA,EAAD,CAAK6H,QAASzI,EAAE,SACd,yBAAKV,MAAO,CAACoB,QAAS,OAAQ0D,SAAU,SAEtC,yBAAK9E,MAAO,CAACgF,UAAW,QACtB,kBAAC,GAAD,CAAcK,MAAQ,SAAWhJ,QAASuN,EAAQtE,OAAQ,YAG5D,yBAAKtF,MAAO,CAACgF,UAAW,QACtB,kBAAC,GAAD,CAAW9C,MAAOxB,EAAE,eAAgB2F,KAAiB,IAAXwD,EAAe,GAAgB,IAAXA,EAAe,KAAOnJ,EAAE,SAAW,UAAGmJ,EAAH,KAAenJ,EAAE,aAGpH,yBAAKV,MAAO,CAACgF,UAAW,MAAOvB,WAAY,OACzC,yBAAKzD,MAAO,CAACoB,QAAS,SACpB,yBAAKpB,MAAO,CAACuB,MAAO,MAAO8H,SAAU,QACnC,oCACE,kBAAC,GAAD,CACEd,UAAU,SACVpV,MAAO2W,EACPxB,OAAQyB,IAEV,kBAAC,GAAD,CACEvI,QAAS,WACPuI,EAAcJ,QAKtB,yBAAK3J,MAAO,CAACuB,MAAO,MAAO8H,SAAU,QACnC,kBAACtH,GAAA,EAAD,CACE2G,MAAI,EACJ1G,KAAiB,IAAXnB,EAAe,kBAACyI,GAAA,EAAD,MAAoB,kBAACY,GAAA,EAAD,MACzChI,MAAOxB,EAAE,QACTc,QAAS,WACPlP,EACEwL,EACAzC,GAAayO,EAAYpb,IACzB,SAACoC,GAAD,OAAUiZ,EAAc,IAAI3Y,IAAU,QAG1C+Q,SAA0B,KAAhBrE,IAAuB7B,GAAM6N,QAK/C,yBAAK9J,MAAO,CAACgF,UAAW,QAExB,yBAAKhF,MAAO,CAACgF,UAAW,MAAOvB,WAAY,OACzC,yBAAKzD,MAAO,CAACoB,QAAS,SACpB,yBAAKpB,MAAO,CAACuB,MAAO,MAAO8H,SAAU,QACnC,oCACE,kBAAC,GAAD,CACEd,UAAU,SACVpV,MAAO6W,EACP1B,OAAQ2B,IAEV,kBAAC,GAAD,CACEzI,QAAS,WACPyI,EAAgBL,QAKxB,yBAAK5J,MAAO,CAACuB,MAAO,MAAO8H,SAAU,QACnC,kBAACtH,GAAA,EAAD,CACE2G,MAAI,EACJ1G,KAAiB,IAAXnB,EAAe,kBAAC4I,GAAA,EAAD,MAAqB,kBAACS,GAAA,EAAD,MAC1ChI,MAAOxB,EAAE,UACTc,QAAS,WACPjP,EACEuL,EACAzC,GAAa2O,EAActb,IAC3B,SAACoC,GAAD,OAAUmZ,EAAgB,IAAI7Y,IAAU,QAG5C+Q,SAA0B,KAAhBrE,IAAuB7B,GAAM+N,SAMjD,yBAAKhK,MAAO,CAACuB,MAAO,OAAQkC,WAAY,KAAM7B,UAAW,WACvD,0BAAM5B,MAAO,CAAEwC,QAAS,KAAxB,IAAiC9B,EAAE,gDAAnC,QC/FFkH,GAAa,CAAC,WAAY,UAgCjBoQ,OA1Bf,YAEyB,IADvBC,EACsB,EADtBA,kBAAmB/P,EACG,EADHA,qBAAsBgQ,EACnB,EADmBA,0BAA2BC,EAC9C,EAD8CA,2BAA4BC,EAC1E,EAD0EA,gBAAiBC,EAC3F,EAD2FA,kBAAmBjQ,EAC9G,EAD8GA,SAC9G,EACF3H,eAAZC,EADc,EACdA,EACR,OAFsB,EACXC,KAEX,yBAAKX,MAAO,CAAEE,QAAS,KAAMkB,QAAS,OAAQ0D,SAAU,OAAQC,WAAY,WAC1E,yBAAK/E,MAAO,CAAEgF,UAAW,QACvB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,WAAYrE,QAAS4b,EAAoB3S,OAAQ,aAE1E,yBAAKtF,MAAO,CAAEgF,UAAW,QACvB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,YAAarE,QAAS6b,EAA2B5S,OAAQ,UAElF,yBAAKtF,MAAO,CAAEgF,UAAW,QACvB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,aAAcrE,QAAS8b,EAA4B7S,OAAQ,UAEpF,yBAAKtF,MAAO,CAAEgF,UAAW,QACvB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,kBAAmBrE,QAASD,GAAU8L,EAAsBkQ,GAAmB9S,OAAQ,OAEhH,yBAAKtF,MAAO,CAAEgF,UAAW,QACvB,kBAAC,GAAD,CAAW9C,MAAOxB,EAAE,eAAgB2F,KAAM3F,EAAEkH,GAAWyQ,KAA6C,IAAtBA,EAA0B,GAAK3X,EAAE,WAAa0H,Q,SCkCnHkQ,OAxDf,YAEgB,IADdxa,EACa,EADbA,YAAaya,EACA,EADAA,UAAW1X,EACX,EADWA,OACX,EACyB5C,mBAAS,IAAI7M,IAAU,IADhD,mBACNonB,EADM,KACOC,EADP,OAEOhY,eAAZC,EAFK,EAELA,EACR,OAHa,EAEFC,KAET,kBAACW,GAAA,EAAD,CAAK6H,QAASzI,EAAE,UACd,yBAAKV,MAAO,CAACoB,QAAS,OAAQ0D,SAAU,SAEtC,yBAAK9E,MAAO,CAACgF,UAAW,QACtB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,aAAcrE,QAASkc,EAAWjT,OAAQ,SAGnE,yBAAKtF,MAAO,CAACgF,UAAW,SACxB,yBAAKhF,MAAO,CAACgF,UAAW,MAAOvB,WAAY,OACzC,yBAAKzD,MAAO,CAACoB,QAAS,SACpB,yBAAKpB,MAAO,CAACuB,MAAO,MAAO8H,SAAU,QACnC,oCACE,kBAAC,GAAD,CACEd,UAAU,MACVpV,MAAOqlB,EACPlQ,OAAQmQ,EACRtW,SAAqB,IAAXtB,IAEZ,kBAAC,GAAD,CACEW,QAAS,WACPiX,EAAeF,QAKvB,yBAAKvY,MAAO,CAACuB,MAAO,MAAO8H,SAAU,QACnC,kBAACtH,GAAA,EAAD,CACE2G,MAAI,EACJ1G,KAAM,kBAAC0W,GAAA,EAAD,MACNxW,MAAOxB,EAAE,SACTc,QAAS,WACP/O,EACEqL,EACAzC,GAAamd,EAAazpB,IAC1B,SAAC+B,GAAD,OAAU2nB,EAAe,IAAIrnB,IAAU,QAG3C+Q,SAA0B,KAAhBrE,GAAiC,IAAX+C,IAAiB5E,GAAMuc,SAMjE,yBAAKxY,MAAO,CAACuB,MAAO,OAAQkC,WAAY,KAAM7B,UAAW,WACvD,0BAAM5B,MAAO,CAAEwC,QAAS,KAAxB,IAAiC9B,EAAE,kEAAnC,Q,SC8DOiY,OA1Gf,YAEkB,IADhB7a,EACe,EADfA,YAAaE,EACE,EADFA,KAAM4a,EACJ,EADIA,SAAU5R,EACd,EADcA,eAAgBC,EAC9B,EAD8BA,gBAAiB4R,EAC/C,EAD+CA,gBAAiBC,EAChE,EADgEA,kBAAmBjY,EACnF,EADmFA,OACnF,EACKJ,eAAZC,EADO,EACPA,EADO,KACJC,KAC+B1C,mBAAS,IAAI7M,IAAU,KAFlD,mBAER2nB,EAFQ,KAEOC,EAFP,OAGqB/a,mBAAS,IAAI7M,IAAU,IAH5C,mBAGR6nB,EAHQ,KAGIC,EAHJ,KAKTC,EAAiBlS,EAAgB/K,SAAW,IAAI9K,IAAU,GAAK6V,EAAgBjL,IAAIgL,GAEnFoS,EAAoB,SAACC,GACzB,IAAKA,EAGH,OAFAL,EAAiB,IAAI5nB,IAAU,SAC/B8nB,EAAc,IAAI9nB,IAAU,IAI9B,IAAMkoB,EAAc,IAAIloB,IAAUioB,GAClCL,EAAiBM,GAEjB,IAAMC,EAAcle,GAAaie,EAAavqB,GACxCyqB,EAAgB5d,GACpB2d,EAAYjd,aAAa6c,GAAgBxd,aAAavK,IAAU8L,aAChEnO,GACFmqB,EAAcM,IAGhB,OACE,kBAAClY,GAAA,EAAD,CAAK6H,QAASzI,EAAE,YACboY,EAAkB1P,WAAW/V,GAAYkJ,UAAU,IAAM,EACxD,yBAAKyD,MAAO,CAACoB,QAAS,OAAQ0D,SAAU,SAEtC,yBAAK9E,MAAO,CAACgF,UAAW,QACtB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,YAAarE,QAASuc,EAAUtT,OAAQ,SAEjE,yBAAKtF,MAAO,CAACgF,UAAW,QACtB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,gBAAiBrE,QAASwc,EAAiBvT,OAAQ,UAE5E,yBAAKtF,MAAO,CAACgF,UAAW,QAExB,yBAAKhF,MAAO,CAACgF,UAAW,MAAOvB,WAAY,OACzC,yBAAKzD,MAAO,CAACoB,QAAS,SACpB,yBAAKpB,MAAO,CAACuB,MAAO,MAAO8H,SAAU,QACnC,oCACE,kBAAC,GAAD,CACEd,UAAU,MACVpV,MAAO4lB,EACPzQ,OAAQ8Q,EACRjX,SAAqB,IAAXtB,IAEZ,kBAAC,GAAD,CAAcqB,MAAOxB,EAAE,aAAcpQ,IAAK2oB,EAAYnqB,OAAO,UAC7D,kBAAC,GAAD,CACE0S,QAAS,WACP4X,EAAkBR,QAK1B,yBAAK5Y,MAAO,CAACuB,MAAO,MAAO8H,SAAU,QACnC,kBAACtH,GAAA,EAAD,CACE2G,MAAI,EACJ1G,KAAM,kBAACyX,GAAA,EAAD,MACNvX,MAAOxB,EAAE,WACTc,QAAS,WACP7O,EACEmL,EACAzC,GAAa0d,EAAehqB,IAC5B,SAAC+B,GAAD,OAAUkoB,EAAiB,IAAI5nB,IAAU,QAG7C+Q,SAA0B,KAAhBrE,GAAiC,IAAX+C,IAAiB5E,GAAM8c,IAAkBE,EAAWzP,cAAcqP,SAO5G,yBAAK7Y,MAAO,CAACoB,QAAS,OAAQ0D,SAAU,SAEtC,yBAAK9E,MAAO,CAACgF,UAAW,QACtB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,YAAarE,QAASuc,EAAUtT,OAAQ,SAEjE,yBAAKtF,MAAO,CAACgF,UAAW,QACtB,kBAAC,GAAD,CAAcK,MAAO3E,EAAE,gBAAiBrE,QAASwc,EAAiBvT,OAAQ,UAE5E,yBAAKtF,MAAO,CAACgF,UAAW,QAExB,yBAAKhF,MAAO,CAACgF,UAAW,MAAOvB,WAAY,OACzC,kBAAC1B,GAAA,EAAD,CACE2G,MAAI,EACJ1G,KAAM,kBAACsH,GAAA,EAAD,MACNpH,MAAOxB,EAAE,WACTc,QAAS,WACPrR,EAAQxB,EAAKC,KAAMkP,IAErBqE,SAA0B,KAAhBrE,GAA+B,KAATE,MAKxC,yBAAKgC,MAAO,CAACuB,MAAO,OAAQkC,WAAY,KAAM7B,UAAW,WACvD,0BAAM5B,MAAO,CAAEwC,QAAS,KAAxB,IAAiC9B,EAAE,0DAAnC,QC1BOgZ,OA9Ef,YAEkB,IADhBrC,EACe,EADfA,kBAAmB1N,EACJ,EADIA,OAAQ4O,EACZ,EADYA,UAAW3O,EACvB,EADuBA,OAAQ/I,EAC/B,EAD+BA,OAAQ8Y,EACvC,EADuCA,iBACvC,EACiB1b,oBAAS,GAD1B,mBACR2b,EADQ,KACEC,EADF,OAEmB5b,oBAAS,GAF5B,mBAER6b,EAFQ,KAEGC,EAFH,OAGe9b,oBAAS,GAHxB,mBAGR+b,EAHQ,KAGCC,EAHD,OAIKxZ,eAAZC,EAJO,EAIPA,EACR,OALe,EAIJC,KAET,kBAACW,GAAA,EAAD,CAAK6H,QAASzI,EAAE,YACd,yBAAKV,MAAO,CAACoB,QAAS,OAAQ0D,SAAU,SAEtC,yBAAK9E,MAAO,CAACgF,UAAW,MAAOvB,WAAY,OACzC,yBAAKzD,MAAO,CAACoB,QAAS,SACpB,yBAAKpB,MAAO,CAACuB,MAAO,QAClB,kBAAC,GAAD,CAAc8D,MAAO3E,EAAE,UAAWrE,QAASuN,EAAQtE,OAAQ,WAC3D,kBAACvD,GAAA,EAAD,CACE2G,MAAI,EACJ1G,KAAM,kBAACyH,GAAA,EAAD,MACNvH,MAAOxB,EAAE,UACTc,QAAS,WACPjP,EACE8kB,EACAhc,GAAauO,EAAQlb,IACrB,SAACoC,GAAD,OAAU+oB,EAAY/oB,EAAKf,OAAS,OAGxCoS,SAAgC,KAAtBkV,IAA6Bpb,GAAM2N,IAAWgQ,GAAYD,OAM5E,yBAAK3Z,MAAO,CAACgF,UAAW,MAAOvB,WAAY,OACzC,yBAAKzD,MAAO,CAACoB,QAAS,SACpB,yBAAKpB,MAAO,CAACuB,MAAO,QAClB,kBAAC,GAAD,CAAc8D,MAAO3E,EAAE,UAAWrE,QAASsN,EAAQrE,OAAQ,WAC3D,kBAACvD,GAAA,EAAD,CACE2G,MAAI,EACJ1G,KAAM,kBAACyH,GAAA,EAAD,MACNvH,MAAOxB,EAAE,YACTc,QAAS,WACPnP,EACEglB,EACAhc,GAAasO,EAAQjb,IACrB,SAACoC,GAAD,OAAUipB,EAAajpB,EAAKf,OAAS,OAGzCoS,SAAgC,KAAtBkV,IAA6Bpb,GAAM0N,IAAWmQ,GAAwB,IAAXjZ,OAM7E,yBAAKb,MAAO,CAACgF,UAAW,MAAOvB,WAAY,OACzC,yBAAKzD,MAAO,CAACoB,QAAS,SACpB,yBAAKpB,MAAO,CAACuB,MAAO,QAClB,kBAAC,GAAD,CAAc8D,MAAO3E,EAAE,aAAcrE,QAASkc,EAAWjT,OAAQ,QACjE,kBAACvD,GAAA,EAAD,CACE2G,MAAI,EACJ1G,KAAM,kBAAC0W,GAAA,EAAD,MACNxW,MAAOxB,EAAE,SACTc,QAAS,WACP/O,EACE4kB,EACAhc,GAAakd,EAAWxpB,IACxB,SAAC+B,GAAD,OAAUmpB,EAAWnpB,EAAKf,OAAS,OAGvCoS,SAAgC,KAAtBkV,IAA6Bpb,GAAMsc,IAAcyB,GAAsB,IAAXnZ,UCiJvEqZ,OA7Mf,YAAyC,IAAzBlc,EAAwB,EAAxBA,KACNoM,EAAaC,cAAbD,SACJA,IACFpM,EAAOoM,GAH6B,MAKlB3J,eAAZC,EAL8B,EAK9BA,EAL8B,KAK3BC,KAC2B1C,mBAAS,KANT,mBAM/BH,EAN+B,KAMlBqc,EANkB,OAOQlc,mBAAS,IAAI7M,IAAU,IAP/B,mBAO/BgnB,EAP+B,KAOdgC,EAPc,OAQMnc,mBAAS,IAAI7M,IAAU,IAR7B,mBAQ/B4V,EAR+B,KAQfQ,EARe,OASQvJ,mBAAS,IAAI7M,IAAU,IAT/B,mBAS/B6V,EAT+B,KASdQ,EATc,OAUMxJ,mBAAS,IAAI7M,IAAU,IAV7B,mBAU/BmO,EAV+B,KAUf8a,EAVe,OAWUpc,mBAAS,IAAI7M,IAAU,IAXjC,mBAW/BkpB,EAX+B,KAWbC,EAXa,OAYQtc,mBAAS,IAAI7M,IAAU,IAZ/B,mBAY/BynB,EAZ+B,KAYd2B,EAZc,OAaYvc,mBAAS,IAAI7M,IAAU,IAbnC,mBAa/B0nB,EAb+B,KAaZ2B,EAbY,OAcYxc,mBAAS,IAAI7M,IAAU,IAdnC,mBAc/BiO,EAd+B,KAcZwL,EAdY,QAeY5M,mBAAS,IAAI7M,IAAU,IAfnC,qBAe/BkO,GAf+B,MAeZwL,GAfY,SAgBgB7M,mBAAS,IAAI7M,IAAU,IAhBvC,qBAgB/BspB,GAhB+B,MAgBVC,GAhBU,SAiBkB1c,mBAAS,IAAI7M,IAAU,IAjBzC,qBAiB/BwpB,GAjB+B,MAiBTC,GAjBS,SAkBF5c,mBAAS,GAlBP,qBAkB/B8M,GAlB+B,MAkBnBC,GAlBmB,SAmBc/M,mBAAS,GAnBvB,qBAmB/BgN,GAnB+B,MAmBXC,GAnBW,SAoBwBjN,mBAAS,IAAI7M,IAAU,IApB/C,qBAoB/B0pB,GApB+B,MAoBNC,GApBM,SAqBwB9c,mBAAS,IAAI7M,IAAU,IArB/C,qBAqB/B4pB,GArB+B,MAqBNC,GArBM,SAsB4Bhd,mBAAS,IAAI7M,IAAU,IAtBnD,qBAsB/B8pB,GAtB+B,MAsBJC,GAtBI,SAuB8Bld,mBAAS,IAAI7M,IAAU,IAvBrD,qBAuB/BgqB,GAvB+B,MAuBHC,GAvBG,SAwBUpd,mBAAS,GAxBnB,qBAwB/Bqd,GAxB+B,MAwBbC,GAxBa,SAyBVtd,mBAAS,GAzBC,qBAyB/B4L,GAzB+B,MAyBvBsB,GAzBuB,MA4BtC/M,qBAAU,WACR,GAAa,KAATJ,EAoBF,OAnBAmc,EAAe,IACfC,EAAmB,IAAIhpB,IAAU,IACjCoW,EAAkB,IAAIpW,IAAU,IAChCqW,EAAmB,IAAIrW,IAAU,IACjCipB,EAAkB,IAAIjpB,IAAU,IAChCmpB,EAAoB,IAAInpB,IAAU,IAClCopB,EAAmB,IAAIppB,IAAU,IACjCqpB,EAAqB,IAAIrpB,IAAU,IACnCyZ,EAAqB,IAAIzZ,IAAU,IACnC0Z,GAAqB,IAAI1Z,IAAU,IACnCupB,GAAuB,IAAIvpB,IAAU,IACrCypB,GAAwB,IAAIzpB,IAAU,IACtC4Z,GAAc,GACdE,GAAsB,GACtB6P,GAA2B,IAAI3pB,IAAU,IACzC6pB,GAA2B,IAAI7pB,IAAU,IACzC+pB,GAA6B,IAAI/pB,IAAU,IAC3CiqB,GAA8B,IAAIjqB,IAAU,SAC5CmqB,GAAoB,GAGtB,IAAIld,GAAc,EAvBJ,SAyBCC,IAzBD,2EAyBd,2GAAA/O,EAAA,sEAC+BoO,KAD/B,cACQ6d,EADR,OAEErB,EAAeqB,GACTnE,EAAoBxZ,GAAqB2d,GAHjD,SAUYxkB,QAAQC,IAAI,CACpBuD,GAAmBghB,GACnB5nB,GAAgB7E,EAAUL,GAC1BkF,GAAgBjF,EAAKC,KAAMF,GAC3BkF,GAAgBlF,EAAUsP,GAC1BpK,GAAgBjF,EAAKC,KAAMoP,GAE3B7J,GAAkBzF,EAAUsP,EAAMwd,GAClCrnB,GAAkBxF,EAAKC,KAAMoP,EAAMwd,GACnCrhB,GAAuBqhB,EAAgBxd,GACvC9D,GAAuBshB,EAAgBxd,GAEvC5D,GAAyBohB,EAAgBxd,GACzC1D,GAA0BkhB,EAAgBxd,GAC1C/D,GAAgBuhB,EAAgBxd,GAChCnD,GAAkB2gB,EAAgBxd,GAElC7D,GAAuBkd,EAAmBrZ,GAC1C9D,GAAuBmd,EAAmBrZ,GAC1C5D,GAAyBid,EAAmBrZ,GAC5C1D,GAA0B+c,EAAmBrZ,GAC7C/D,GAAgBod,EAAmBrZ,KA/BvC,oCAMIyd,EANJ,KAMwB5c,EANxB,KAM2C6I,EAN3C,KAM+DrL,EAN/D,KAMwEqf,EANxE,KAOItnB,EAPJ,KAOeunB,EAPf,KAO8Bhd,EAP9B,KAO6CC,EAP7C,KAQIgd,EARJ,KAQqBC,EARrB,MAQuChb,EARvC,MAQ+C0K,EAR/C,MASIuQ,EATJ,MASyBC,EATzB,MAS8CC,EAT9C,MASqEC,EATrE,MAS6FC,EAT7F,MAkCQ9D,EAAkBxc,GAAe6f,EAAoB1sB,GACrDotB,EAAiBvgB,GAAeiD,EAAmB9P,GACnDqtB,EAAkBxgB,GAAe8L,EAAoB/Y,EAAKE,UAC1D0Q,EAAiB3D,GAAeS,EAAS3N,GACzCmqB,EAAkBjd,GAAe8f,EAAa/sB,EAAKE,UACnDwQ,EAAoBzD,GAAe+C,EAAejQ,GAClD4Q,EAAoB1D,GAAegD,EAAelQ,GAClDgsB,EAAsB9e,GAAeggB,EAAiB7sB,GACtD6rB,EAAuBhf,GAAeigB,EAAkB9sB,GACxDgc,EAAa5P,SAAS0F,EAAQ,IAC9BjM,EAAauG,SAASoQ,EAAe,IACrCuP,GAA0Blf,GAAekgB,EAAqBptB,GAC9DssB,GAA0Bpf,GAAemgB,EAAqBrtB,GAC9DwsB,GAA4Btf,GAAeogB,EAAuBttB,GAClE0sB,GAA6Bxf,GAAeqgB,EAAwBltB,GACpEusB,GAAmBngB,SAAS+gB,EAAc,IAE3C7d,IACH8b,EAAeqB,GACfpB,EAAmB,IAAIhpB,IAAUgnB,IACjC5Q,EAAkB,IAAIpW,IAAU+qB,IAChC1U,EAAmB,IAAIrW,IAAUgrB,IACjC/B,EAAkB,IAAIjpB,IAAUmO,IAChCgb,EAAoB,IAAInpB,IAAUgD,IAClCqmB,EAAqB,IAAIrpB,IAAUuqB,IACnCnB,EAAmB,IAAIppB,IAAUynB,IACjChO,EAAqB,IAAIzZ,IAAUiO,IACnCyL,GAAqB,IAAI1Z,IAAUkO,IACnCqb,GAAuB,IAAIvpB,IAAUspB,IACrCG,GAAwB,IAAIzpB,IAAUwpB,IACtC5P,GAAcD,GACdG,GAAsBtW,GACtBmmB,GAA2B,IAAI3pB,IAAU0pB,KACzCG,GAA2B,IAAI7pB,IAAU4pB,KACzCG,GAA6B,IAAI/pB,IAAU8pB,KAC3CG,GAA8B,IAAIjqB,IAAUgqB,KAC5CG,GAAoBD,IACpBnQ,GAAUqQ,IAAmB/sB,EpDlJE,GoDkJsC,IAvEzE,6CAzBc,sBAmGd6P,IACA,IAAMC,EAAKC,YAAYF,EAAgB,MAGvC,OAAO,WACLD,GAAc,EACdI,cAAcF,MAEf,CAACP,IAEJ,IAAMqe,GAAqBnB,GAA0B1R,cAAc,IAAIpY,IAAU,wBAC3EkrB,GAAmBxB,GAAwBtR,cAAc,IAAM4R,GAA2B5R,cAAc,IAAMwR,GAAwBxR,cAAc,GAC1J,OACE,oCACE,kBAAC,GAAD,CAAYxH,KAAM,uBAAG6B,UAAU,yBAA0BwC,KAAM3F,EAAE,oBAEhE4b,GACC,oCACE,kBAAC,KAAD,CAAQjV,QAAS3G,EAAE,2BAEnB,kBAAC,GAAD,CACE2W,kBAAmBxZ,GAAqBC,GACxC6b,iBAAkB0C,GAClB1S,OAAQmR,GACRvC,UAAW6C,GACXxR,OAAQoR,GACRna,OAAQya,MAGV,GAEJ,kBAAC,GAAD,CACErD,kBAAmB1Y,EACnB2I,qBAAsB5I,GACtB4Y,0BAA2BwC,GAC3BvC,2BAA4ByC,GAC5BxC,gBAAiBA,EACjBC,kBAAmBtN,GACnB3C,SAAU6C,KAGZ,kBAAC,GAAD,CACEnN,YAAaA,EACbE,KAAMA,EACN3B,QAASkD,EACTnL,UAAWkmB,EACX3b,cAAeU,EACfwB,OAAQkK,KAGV,kBAAC,GAAD,CACEjN,YAAaA,EACb6L,OAAQtK,EACRuK,OAAQtK,GACRuB,OAAQkK,GACRlB,OAAQA,KAGV,kBAAC,GAAD,CACE/L,YAAaA,EACbya,UAAWqC,GACX/Z,OAAQkK,KAGV,kBAAC,GAAD,CACEjN,YAAaA,EACbE,KAAMA,EACN4a,SAAUyD,GAAqB,IAAIjrB,IAAU,GAAKspB,GAClD7Z,OAAQkK,GACR/D,eAAgBA,EAChBC,gBAAiBA,EACjB4R,gBAAiBA,EACjBC,kBAAmBA,MCpM3B,SAASxU,GAAT,GAEoB,IADlBjC,EACiB,EADjBA,MAAOkC,EACU,EADVA,YAAavC,EACH,EADGA,KAAMR,EACT,EADSA,QAASgD,EAClB,EADkBA,IAEnC,OACE,kBAAC,KAAD,CAAUhD,QAASA,EAASxB,MAAO,CAAEuB,MAAO,SAC1C,kBAACD,GAAA,EAAD,KACE,yBAAKtB,MAAO,CAAEE,QAAS,GAAID,SAAU,KAClCoC,EACAmC,EAAM,kBAACC,GAAA,EAAD,KAAMD,GAAa,sCAE5B,0BAAMxE,MAAO,CAAEC,SAAU,KACtB+B,GAGH,yBAAKhC,MAAO,CAAEyD,WAAY,EAAGjB,QAAS,KACnC,IACA+B,EACA,OAQIgY,OApDf,WAA2B,IAAD,EACJ9b,eAAZC,EADgB,EAChBA,EACR,OAFwB,EACbC,KAET,oCACE,yBAAKX,MAAO,CAAEE,QAAS,KAAMkB,QAAS,OAAQ2D,WAAY,WACxD,kBAAC,GAAD,CACE1C,MAAO3B,EAAE,2BACT6D,YAAa7D,EAAE,0BACfsB,KAAM,uBAAG6B,UAAU,wBACnBrC,QAAS,WAEPhS,OAAOyT,SAAW,iCCmFfuZ,OAhFf,WACE,IAAMC,EAAc5pB,EAAc,QAAS,SAD9B,EAGiBoL,oBAAS,GAH1B,mBAGNsC,EAHM,KAGGmc,EAHH,OAIWze,mBAAS,IAJpB,mBAIND,EAJM,KAIAwC,EAJA,OAKavC,mBAASwe,GALtB,mBAKNjW,EALM,KAiCb,OAjCa,KAabpI,qBAAU,WACR,IAAIC,GAAc,EADJ,SAGCC,IAHD,2EAGd,sBAAA/O,EAAA,sDACO8O,GAEHqe,EAAsC,aAApBltB,OAAOG,UAH7B,4CAHc,sBAUd2O,IACA,IAAMC,EAAKC,YAAYF,EAAgB,MAGvC,OAAO,WACLD,GAAc,EACdI,cAAcF,MAEf,CAACP,IAGF,kBAAC,IAAD,KACE,kBAAC,IAAD,CACE2e,QAAS,EACTC,WAAY,CACVC,cAAe,CAAEC,OAAQ,uCACzBC,WAAY,CACVC,IAAK,sCACLC,QAAQ,kBACRC,WAAY,MAIhB,kBAACC,EAAA,EAAD,CAAMC,UAAS,UAAKC,iBAAL,eAA0C7W,MAAOA,EAAO8W,QAAQ,GAC7E,kBAAC,GAAD,CAAQ/c,QAASA,EAASvC,KAAMA,EAAMwC,QAASA,IAC/C,kBAAC+c,EAAA,EAAD,KAEEhd,EACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOid,KAAK,kBAAiB,kBAAC,GAAD,CAAQxf,KAAMA,KAC3C,kBAAC,IAAD,CAAOwf,KAAK,SAAQ,kBAAC,GAAD,CAAQxf,KAAMA,KAClC,kBAAC,IAAD,CAAOwf,KAAK,WAAU,kBAAC,GAAD,CAAaxf,KAAMA,KACzC,kBAAC,IAAD,CAAOwf,KAAK,sBAAqB,kBAAC,GAAD,CAAcxf,KAAMA,KACrD,kBAAC,IAAD,CAAOwf,KAAK,aAAY,kBAAC,GAAD,CAAcxf,KAAMA,KAC5C,kBAAC,IAAD,CAAOwf,KAAK,oCAAmC,kBAAC,GAAD,CAAWxf,KAAMA,KAChE,kBAAC,IAAD,CAAOwf,KAAK,gBAAe,kBAAC,GAAD,CAAYxf,KAAMA,KAC7C,kBAAC,IAAD,CAAOwf,KAAK,WAAU,kBAACC,GAAD,CAAOzf,KAAMA,KACnC,kBAAC,IAAD,CAAOwf,KAAK,gBAAe,kBAAC,GAAD,CAAYxf,KAAMA,KAC7C,kBAAC,IAAD,CAAOwf,KAAK,mBAAkB,kBAAC,GAAD,CAAMxf,KAAMA,KAC1C,kBAAC,IAAD,CAAOwf,KAAK,UAAS,kBAAC,GAAD,CAAMxf,KAAMA,KACjC,kBAAC,IAAD,CAAOwf,KAAK,KAAI,kBAAC,GAAD,CAAUxf,KAAMA,MAGlC,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOwf,KAAK,KAAI,kBAAC,GAAD,aC3EZE,QACW,cAA7BluB,OAAOyT,SAAS0a,UAEe,UAA7BnuB,OAAOyT,SAAS0a,UAEhBnuB,OAAOyT,SAAS0a,SAASC,MACvB,2D,kECXAC,GAAY,CAChBC,GAAI,CACFC,Y,QAEFC,IAAK,CACHD,Y,SAIJpd,KACGsd,IAAIC,MACJC,KAAK,CACJN,aACAO,IAAK,KAELC,cAAc,EAEdC,cAAe,CACbC,aAAa,KAIJ5d,GAAf,ECpBA6d,KAAOC,OAAO,MACdC,OACAC,IAASC,OAAO,kBAAC,GAAD,MAASC,SAASC,eAAe,SFwH3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBC,MAAK,SAAAC,GACJA,EAAaC,gBAEdC,OAAM,SAAAC,GACLjxB,QAAQixB,MAAMA,EAAMC,c","file":"static/js/main.f279eb4e.chunk.js","sourcesContent":["export const notify = {\n  hash: (v) => console.log(v)\n}","/* eslint-disable camelcase */\n// eslint-disable-next-line import/prefer-default-export\nexport const UniswapV2Router02 = '0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D';\nexport const DollarPool1 = '0xbf3fb30a89fa25c7b504fc501b75fe1a1673a34c';\nexport const DollarPool2 = '0xbf3fb30a89fa25c7b504fc501b75fe1a1673a34c';\nexport const DollarPool3 = '0xbf3fb30a89fa25c7b504fc501b75fe1a1673a34c';\nexport const DollarPool4 = '0xbf3fb30a89fa25c7b504fc501b75fe1a1673a34c';\n","export const UNI = {\n  addr: '0x365c6ABA69791356B550671718c1e3C11b865c4B',\n  decimals: 18,\n  symbol: 'UNI',\n};\n\nexport const USDC = {\n  addr: '0x1b3924f88A5ee1D9C86b97dce55d99d4B22dB569',\n  decimals: 6,\n  symbol: 'USDC',\n};\n\nexport const PEN = {\n  addr: '0xa63fae5e28c5310d54581c0af34ee7472ff4dd6d',\n  decimals: 18,\n  symbol: 'PEN',\n};\n\nexport const PENS = {\n  addr: '0xA062A680E22F0570297c99201d62927b22E64ba8',\n  decimals: 18,\n  symbol: 'PENS',\n};\n","/* eslint-disable camelcase */\nimport Web3 from 'web3';\nimport BigNumber from 'bignumber.js';\n\nimport { notify } from './txNotifier.ts';\nimport { UniswapV2Router02 } from '../constants/contracts';\n\nimport { PEN, USDC } from '../constants/tokens';\n\nconst uniswapRouterAbi = require('../constants/abi/UniswapV2Router02.json');\nconst testnetUSDCAbi = require('../constants/abi/TestnetUSDC.json');\nconst daoAbi = require('../constants/abi/Implementation.json');\nconst poolAbi = require('../constants/abi/Pool.json');\n\nconst DEADLINE_FROM_NOW = 60 * 15;\nconst UINT256_MAX = '0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff';\n\n/**\n * Connection Utilities\n */\n\nexport const updateModalMode = async (theme) => {\n  window.darkMode = theme === 'dark';\n};\n\nexport const connect = async () => {\n  window.web3 = new Web3(window.ethereum);\n  let addresses = await window.web3.eth.getAccounts();\n  if (!addresses.length) {\n    try {\n      addresses = await window.ethereum.enable();\n    } catch (e) {\n      console.log(e);\n      return false;\n    }\n  }\n\n  return addresses.length ? addresses[0].toLowerCase() : null;\n};\n\n// eslint-disable-next-line consistent-return\nexport const checkConnectedAndGetAddress = async () => {\n  let addresses = await window.web3.eth.getAccounts();\n  if (!addresses.length) {\n    try {\n      addresses = await window.ethereum.enable();\n      // eslint-disable-next-line no-empty\n    } catch (e) { }\n  }\n\n  return addresses[0];\n};\n\n/**\n * ERC20 Utilities\n */\n\nexport const approve = async (tokenAddr, spender, amt = UINT256_MAX) => {\n  const account = await checkConnectedAndGetAddress();\n  const oToken = new window.web3.eth.Contract(testnetUSDCAbi, tokenAddr);\n  await oToken.methods\n    .approve(spender, amt)\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const mintTestnetUSDC = async (amount) => {\n  const account = await checkConnectedAndGetAddress();\n  const usdc = new window.web3.eth.Contract(testnetUSDCAbi, USDC.addr);\n\n  await usdc.methods.mint(account, new BigNumber(amount).toFixed())\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\n/**\n * Uniswap Protocol\n */\n\nexport const buyPEN = async (buyAmount, maxInputAmount) => {\n  const account = await checkConnectedAndGetAddress();\n  const router = new window.web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\n  const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW;\n\n  await router.methods.swapTokensForExactTokens(\n    buyAmount,\n    maxInputAmount,\n    [USDC.addr, PEN.addr],\n    account,\n    deadline,\n  )\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const sellPEN = async (sellAmount, minOutputAmount) => {\n  const account = await checkConnectedAndGetAddress();\n  const router = new window.web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\n  const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW;\n\n  await router.methods.swapExactTokensForTokens(\n    sellAmount,\n    minOutputAmount,\n    [PEN.addr, USDC.addr],\n    account,\n    deadline,\n  )\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const addLiquidity = async (amountPEN, amountUSDC, slippage) => {\n  const account = await checkConnectedAndGetAddress();\n  const router = new window.web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\n  const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW;\n  const slippageBN = new BigNumber(slippage);\n  const minAmountPEN = new BigNumber(amountPEN)\n    .multipliedBy(new BigNumber(1).minus(slippageBN))\n    .integerValue(BigNumber.ROUND_FLOOR);\n  const minAmountUSDC = new BigNumber(amountUSDC)\n    .multipliedBy(new BigNumber(1).minus(slippageBN))\n    .integerValue(BigNumber.ROUND_FLOOR);\n\n  await router.methods.addLiquidity(\n    PEN.addr,\n    USDC.addr,\n    new BigNumber(amountPEN).toFixed(),\n    new BigNumber(amountUSDC).toFixed(),\n    minAmountPEN,\n    minAmountUSDC,\n    account,\n    deadline,\n  )\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const removeLiquidity = async (liquidityAmount, minAmountPEN, minAmountUSDC) => {\n  const account = await checkConnectedAndGetAddress();\n  const router = new window.web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\n  const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW;\n\n  await router.methods.removeLiquidity(\n    PEN.addr,\n    USDC.addr,\n    new BigNumber(liquidityAmount).toFixed(),\n    new BigNumber(minAmountPEN).toFixed(),\n    new BigNumber(minAmountUSDC).toFixed(),\n    account,\n    deadline,\n  )\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\n/**\n * Døllar Protocol\n */\n\nexport const advance = async (dao) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .advance()\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const deposit = async (dao, amount) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .deposit(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const withdraw = async (dao, amount) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .withdraw(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const bond = async (dao, amount) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .bond(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const unbond = async (dao, amount) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .unbond(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const unbondUnderlying = async (dao, amount) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .unbondUnderlying(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const purchaseCoupons = async (dao, amount) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .purchaseCoupons(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const redeemCoupons = async (dao, epoch, amount) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .redeemCoupons(epoch, new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const recordVote = async (dao, candidate, voteType) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .vote(candidate, voteType)\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const commit = async (dao, candidate) => {\n  const account = await checkConnectedAndGetAddress();\n  const daoContract = new window.web3.eth.Contract(daoAbi, dao);\n  await daoContract.methods\n    .commit(candidate)\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\n/* UNI-V2 Incentivization Pool */\nexport const depositPool = async (pool, amount, callback) => {\n  const account = await checkConnectedAndGetAddress();\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\n  await poolContract.methods\n    .deposit(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n      callback(hash);\n    });\n};\n\nexport const withdrawPool = async (pool, amount, callback) => {\n  const account = await checkConnectedAndGetAddress();\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\n  await poolContract.methods\n    .withdraw(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n      callback(hash);\n    });\n};\n\nexport const bondPool = async (pool, amount, callback) => {\n  const account = await checkConnectedAndGetAddress();\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\n  await poolContract.methods\n    .bond(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n      callback(hash);\n    });\n};\n\nexport const unbondPool = async (pool, amount, callback) => {\n  const account = await checkConnectedAndGetAddress();\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\n  await poolContract.methods\n    .unbond(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n      callback(hash);\n    });\n};\n\nexport const claimPool = async (pool, amount, callback) => {\n  const account = await checkConnectedAndGetAddress();\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\n  await poolContract.methods\n    .claim(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n      callback(hash);\n    });\n};\n\nexport const providePool = async (pool, amount, callback) => {\n  const account = await checkConnectedAndGetAddress();\n  const poolContract = new window.web3.eth.Contract(poolAbi, pool);\n  await poolContract.methods\n    .provide(new BigNumber(amount).toFixed())\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n      callback(hash);\n    });\n};\n","/**\n * Get value by key\n * @param {string} key\n * @param {string} defaultValue\n */\nexport function getPreference(key:string, defaultValue:string): string {\n  return localStorage.getItem(key) || defaultValue;\n}\n\n/**\n * store value to storage\n * @param {string} key\n * @param {string} value\n */\nexport function storePreference(key:string, value:string):void {\n  localStorage.setItem(key, value);\n}\n","import Web3 from 'web3';\n\nimport BigNumber from 'bignumber.js';\nimport { UniswapV2Router02 } from '../constants/contracts';\nimport { PEN, UNI, USDC } from '../constants/tokens';\nimport { POOL_EXIT_LOCKUP_EPOCHS } from '../constants/values';\n\nconst dollarAbi = require('../constants/abi/Dollar.json');\nconst daoAbi = require('../constants/abi/Implementation.json');\nconst poolAbi = require('../constants/abi/Pool.json');\nconst uniswapRouterAbi = require('../constants/abi/UniswapV2Router02.json');\nconst uniswapPairAbi = require('../constants/abi/UniswapV2Pair.json');\n\nlet web3;\n// eslint-disable-next-line no-undef\nif (window.ethereum !== undefined) {\n  // eslint-disable-next-line no-undef\n  web3 = new Web3(ethereum);\n}\n\n/**\n *\n * @param {string} token address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getTokenBalance = async (token, account) => {\n  if (account === '') return '0';\n  const tokenContract = new web3.eth.Contract(dollarAbi, token);\n  return tokenContract.methods.balanceOf(account).call();\n};\n\nexport const getTokenTotalSupply = async (token) => {\n  const tokenContract = new web3.eth.Contract(dollarAbi, token);\n  return tokenContract.methods.totalSupply().call();\n};\n\n/**\n *\n * @param {string} token\n * @param {string} account\n * @param {string} spender\n * @return {Promise<string>}\n */\nexport const getTokenAllowance = async (token, account, spender) => {\n  const tokenContract = new web3.eth.Contract(dollarAbi, token);\n  return tokenContract.methods.allowance(account, spender).call();\n};\n\n// Døllar Protocol\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getBalanceBonded = async (dao, account) => {\n  if (account === '') return '0';\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.balanceOfBonded(account).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getBalanceOfStaged = async (dao, account) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.balanceOfStaged(account).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getStatusOf = async (dao, account) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.statusOf(account).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getFluidUntil = async (dao, account) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.fluidUntil(account).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getLockedUntil = async (dao, account) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.lockedUntil(account).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getEpoch = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.epoch().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getEpochTime = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.epochTime().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getTotalDebt = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.totalDebt().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getTotalRedeemable = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.totalRedeemable().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getTotalCoupons = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.totalCoupons().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getTotalBonded = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.totalBonded().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getTotalStaged = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.totalStaged().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {number} epoch number\n * @return {Promise<string>}\n */\nexport const getTotalBondedAt = async (dao, epoch) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.totalBondedAt(epoch).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} candidate address\n * @return {Promise<string>}\n */\nexport const getApproveFor = async (dao, candidate) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.approveFor(candidate).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} candidate address\n * @return {Promise<string>}\n */\nexport const getRejectFor = async (dao, candidate) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.rejectFor(candidate).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} candidate address\n * @return {Promise<string>}\n */\nexport const getStartFor = async (dao, candidate) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.startFor(candidate).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} candidate address\n * @return {Promise<string>}\n */\nexport const getPeriodFor = async (dao, candidate) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.periodFor(candidate).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} candidate address\n * @return {Promise<boolean>}\n */\nexport const getIsInitialized = async (dao, candidate) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.isInitialized(candidate).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @param {string} candidate address\n * @return {Promise<string>}\n */\nexport const getRecordedVote = async (dao, account, candidate) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.recordedVote(account, candidate).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @param {number} epoch number\n * @return {Promise<string>}\n */\nexport const getBalanceOfCoupons = async (dao, account, epoch) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.balanceOfCoupons(account, epoch).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string} account address\n * @param {number[]} epochs number[]\n * @return {Promise<string[]>}\n */\nexport const getBatchBalanceOfCoupons = async (dao, account, epochs) => {\n  const calls = epochs.map((epoch) => getBalanceOfCoupons(dao, account, epoch));\n  return Promise.all(calls);\n};\n\n/**\n *\n * @param {string} dao address\n * @param {number} epoch address\n * @return {Promise<string>}\n */\nexport const getOutstandingCoupons = async (dao, epoch) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.outstandingCoupons(epoch).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {number} epoch number\n * @return {Promise<string>}\n */\nexport const getCouponsExpiration = async (dao, epoch) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.couponsExpiration(epoch).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @param {number[]} epochs number[]\n * @return {Promise<string[]>}\n */\nexport const getBatchCouponsExpiration = async (dao, epochs) => {\n  const calls = epochs.map((epoch) => getCouponsExpiration(dao, epoch));\n  return Promise.all(calls);\n};\n\n/**\n *\n * @param {string} dao address\n * @param {string|BigNumber} amount uint256\n * @return {Promise<string>}\n */\nexport const getCouponPremium = async (dao, amount) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.couponPremium(new BigNumber(amount).toFixed()).call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getImplementation = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.implementation().call();\n};\n\n/**\n *\n * @param {string} dao address\n * @return {Promise<string>}\n */\nexport const getPool = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  return daoContract.methods.pool().call();\n};\n\n/**\n *\n * @param {string} dao\n * @param {string} account\n * @return {Promise<any[]>}\n */\nexport const getCouponEpochs = async (dao, account) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  const purchaseP = daoContract.getPastEvents('CouponPurchase', {\n    filter: { account },\n    fromBlock: 0,\n  });\n  const transferP = daoContract.getPastEvents('CouponTransfer', {\n    filter: { to: account },\n    fromBlock: 0,\n  });\n  const [bought, given] = await Promise.all([purchaseP, transferP]);\n  const events = bought.map((e) => ({epoch: e.returnValues.epoch, amount: e.returnValues.couponAmount}))\n    .concat(given.map((e) => ({epoch: e.returnValues.epoch, amount: 0})));\n\n  const couponEpochs = [\n    ...events.reduce(\n      (map, event) => {\n        const { epoch, amount } = event;\n        const prev = map.get(epoch);\n\n        if (prev) {\n          map.set(epoch, { epoch, coupons: prev.coupons.plus(new BigNumber(amount)) });\n        } else {\n          map.set(epoch, { epoch, coupons: new BigNumber(amount) });\n        }\n\n        return map;\n      },\n      new Map(),\n    ).values(),\n  ];\n\n  return couponEpochs.sort((a, b) => a - b);\n};\n\n/**\n *\n * @param {string} dao\n * @return {Promise<any[]>}\n */\nexport const getAllProposals = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  const payload = (await daoContract.getPastEvents('Proposal', {\n    fromBlock: 0,\n  })).map((event) => {\n    const prop = event.returnValues;\n    prop.blockNumber = event.blockNumber;\n    return prop;\n  });\n  return payload.sort((a, b) => b.blockNumber - a.blockNumber);\n};\n\n/**\n *\n * @param {string} dao\n * @return {Promise<any[]>}\n */\nexport const getAllRegulations = async (dao) => {\n  const daoContract = new web3.eth.Contract(daoAbi, dao);\n  const increaseP = daoContract.getPastEvents('SupplyIncrease', { fromBlock: 0 });\n  const decreaseP = daoContract.getPastEvents('SupplyDecrease', { fromBlock: 0 });\n  const neutralP = daoContract.getPastEvents('SupplyNeutral', { fromBlock: 0 });\n\n  const [increase, decrease, neutral] = await Promise.all([increaseP, decreaseP, neutralP]);\n\n  const events = increase.map((e) => ({ type: 'INCREASE', data: e.returnValues }))\n    .concat(decrease.map((e) => ({ type: 'DECREASE', data: e.returnValues })))\n    .concat(neutral.map((e) => ({ type: 'NEUTRAL', data: e.returnValues })));\n\n  return events.sort((a, b) => b.data.epoch - a.data.epoch);\n};\n\n// Uniswap Protocol\n\nexport const getCost = async (amount) => {\n  const exchange = new web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\n  // eslint-disable-next-line no-unused-vars\n  const [inputAmount, _] = await exchange.methods.getAmountsIn(\n    new BigNumber(amount).toFixed(),\n    [USDC.addr, PEN.addr],\n  ).call();\n  return inputAmount;\n};\n\nexport const getProceeds = async (amount) => {\n  const exchange = new web3.eth.Contract(uniswapRouterAbi, UniswapV2Router02);\n  // eslint-disable-next-line no-unused-vars\n  const [_, outputAmount] = await exchange.methods.getAmountsOut(\n    new BigNumber(amount).toFixed(),\n    [PEN.addr, USDC.addr],\n  ).call();\n  return outputAmount;\n};\n\nexport const getReserves = async () => {\n  const exchange = new web3.eth.Contract(uniswapPairAbi, UNI.addr);\n  return exchange.methods.getReserves().call();\n};\n\nexport const getInstantaneousPrice = async () => {\n  const [reserve, token0] = await Promise.all([getReserves(), getToken0()]);\n  const token0Balance = new BigNumber(reserve.reserve0);\n  const token1Balance = new BigNumber(reserve.reserve1);\n  if (token0.toLowerCase() === USDC.addr.toLowerCase()) {\n    return token0Balance.multipliedBy(new BigNumber(10).pow(12)).dividedBy(token1Balance);\n  }\n  return token1Balance.multipliedBy(new BigNumber(10).pow(12)).dividedBy(token0Balance);\n};\n\nexport const getToken0 = async () => {\n  const exchange = new web3.eth.Contract(uniswapPairAbi, UNI.addr);\n  return exchange.methods.token0().call();\n};\n\n// Pool\n\nexport const getPoolStatusOf = async (pool, account) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.statusOf(account).call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolBalanceOfBonded = async (pool, account) => {\n  if (account === '') return '0';\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.balanceOfBonded(account).call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolBalanceOfStaged = async (pool, account) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.balanceOfStaged(account).call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolBalanceOfRewarded = async (pool, account) => {\n  if (account === '') return '0';\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.balanceOfRewarded(account).call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolBalanceOfClaimable = async (pool, account) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.balanceOfClaimable(account).call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolTotalBonded = async (pool) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.totalBonded().call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolTotalRewarded = async (pool) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.totalRewarded().call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolTotalClaimable = async (pool) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n  return poolContract.methods.totalClaimable().call();\n};\n\n/**\n *\n * @param {string} pool address\n * @param {string} account address\n * @return {Promise<string>}\n */\nexport const getPoolFluidUntil = async (pool, account) => {\n  const poolContract = new web3.eth.Contract(poolAbi, pool);\n\n  // no need to look back further than the pool lockup period\n  const blockNumber = await web3.eth.getBlockNumber();\n  const fromBlock = blockNumber - (POOL_EXIT_LOCKUP_EPOCHS + 1) * 8640;\n  const bondP = poolContract.getPastEvents('Bond', {\n    filter: {account: account}, fromBlock: fromBlock });\n  const unbondP = poolContract.getPastEvents('Unbond', {\n    filter: {account: account}, fromBlock: fromBlock });\n\n  const [bond, unbond] = await Promise.all([bondP, unbondP]);\n  const events = bond.map((e) => e.returnValues)\n    .concat(unbond.map((e) => e.returnValues));\n\n  const startEpoch = events.reduce(\n    (epoch, event) => {\n      if (epoch > event.start)\n        return epoch\n      else\n        return parseInt(event.start)\n    }, 0);\n\n  // these contract events report the start epoch as one more than the active\n  // epoch when the event is emitted, so we subtract 1 here to adjust\n  return (parseInt(startEpoch, 10) + POOL_EXIT_LOCKUP_EPOCHS - 1).toString();\n};\n","import BigNumber from 'bignumber.js';\n\n// eslint-disable-next-line import/prefer-default-export\nexport const MAX_UINT256 = new BigNumber(2).pow(256).minus(1);\nexport const GOVERNANCE_QUORUM = new BigNumber('0.20');\nexport const GOVERNANCE_PROPOSAL_THRESHOLD = new BigNumber('0.005');\nexport const COUPON_EXPIRATION = 90\nexport const DAO_EXIT_LOCKUP_EPOCHS = 72\nexport const POOL_EXIT_LOCKUP_EPOCHS = 24\n","import BigNumber from 'bignumber.js';\n\n/**\n * Convert 10.999 to 10999000\n */\nexport function toBaseUnitBN(rawAmt:string| number| BigNumber, decimals: number):BigNumber {\n  const raw = new BigNumber(rawAmt);\n  const base = new BigNumber(10);\n  const decimalsBN = new BigNumber(decimals);\n  return raw.times(base.pow(decimalsBN)).integerValue();\n}\n\n/**\n * Convert 10999000 to 10.999\n */\nexport const toTokenUnitsBN = (tokenAmount:string|number|BigNumber, tokenDecimals:number): BigNumber => {\n  const amt = new BigNumber(tokenAmount);\n  const digits = new BigNumber(10).pow(new BigNumber(tokenDecimals));\n  return amt.div(digits);\n};\n\nexport const isPos = (amount: BigNumber): boolean => {\n  return !amount.isZero() && amount.isPositive();\n};\n\nexport const ownership = (balance: BigNumber, totalSupply: BigNumber): BigNumber => {\n  return balance.multipliedBy(new BigNumber(100)).dividedBy(totalSupply);\n}\n\n/**\n * BigNumber string formatting\n */\n\nexport const formatBN = (amount: BigNumber, position: number): string => {\n  if (amount.isLessThan(new BigNumber(1))) {\n    return pad(amount.precision(position, BigNumber.ROUND_FLOOR).toFixed(), position);\n\n  }\n  return delineate(amount.toFixed(position, BigNumber.ROUND_FLOOR));\n}\n\nfunction delineate(bnStr) {\n  const parts = bnStr.split('.');\n  return parts[0].toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\") + \".\" + parts[1];\n}\n\nfunction pad(bnStr, position) {\n  if (!bnStr.includes(\".\")) {\n    bnStr += \".\";\n  }\n\n  const parts = bnStr.split(\".\");\n  for (let i = 0; i < position - parts[1].length; i++) {\n    bnStr += \"0\";\n  }\n\n  return bnStr\n}\n\nexport function formatMoney(n) {\n  n = n.toPrecision(3)\n  return Math.abs(Number(n)) >= 1.0e+9\n    ? Math.abs(Number(n)) / 1.0e+9 + \"B\"\n    : Math.abs(Number(n)) >= 1.0e+6\n      ? Math.abs(Number(n)) / 1.0e+6 + \"MM\"\n      : Math.abs(Number(n)) >= 1.0e+3\n        ? Math.abs(Number(n)) / 1.0e+3 + \"K\"\n        : Math.abs(Number(n));\n}","import { getPool } from \"./infura\";\nimport { PENS } from \"../constants/tokens\";\nimport {DollarPool1, DollarPool2, DollarPool3, DollarPool4} from \"../constants/contracts\";\n\nexport async function getPoolAddress(): Promise<string> {\n  const pool = await getPool(PENS.addr);\n  \n  if (pool.toLowerCase() === DollarPool2.toLowerCase()) {\n    return DollarPool2;\n  }\n  if (pool.toLowerCase() === DollarPool3.toLowerCase()) {\n    return DollarPool3;\n  }\n  if (pool.toLowerCase() === DollarPool4.toLowerCase()) {\n    return DollarPool4;\n  }\n\n  throw new Error(\"Unrecognized Pool Address\");\n}\n\nexport function getLegacyPoolAddress(poolAddress): string {\n  if (poolAddress === DollarPool2) {\n    return DollarPool1;\n  }\n  if (poolAddress === DollarPool3) {\n    return DollarPool2;\n  }\n  if (poolAddress === DollarPool4) {\n    return DollarPool3;\n  }\n\n  throw new Error(\"Unrecognized Pool Address\");\n}\n","import React, {useEffect, useState} from 'react';\nimport BigNumber from \"bignumber.js\";\nimport {\n  getBalanceBonded,\n  getBalanceOfStaged,\n  getPoolBalanceOfBonded, getPoolBalanceOfClaimable, getPoolBalanceOfRewarded, getPoolBalanceOfStaged,\n  getTokenBalance,\n  getTokenTotalSupply\n} from \"../../utils/infura\";\nimport {PEN, PENS, UNI} from \"../../constants/tokens\";\nimport {formatBN, toTokenUnitsBN} from \"../../utils/number\";\nimport {getPoolAddress} from \"../../utils/pool\";\n\ntype TotalBalanceProps = {\n  user: string,\n}\n\nfunction TotalBalance({ user }: TotalBalanceProps) {\n  const [totalBalance, setTotalBalance] = useState(new BigNumber(0));\n\n  //Update User balances\n  useEffect(() => {\n    if (user === '') {\n      setTotalBalance(new BigNumber(0));\n      return;\n    }\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const poolAddress = await getPoolAddress();\n\n      const [\n        esdBalance, stagedBalance, bondedBalance,\n        pairBalancePENStr, pairTotalSupplyUNIStr, userUNIBalanceStr,\n        userPoolBondedBalanceStr, userPoolStagedBalanceStr,\n        userPoolRewardedBalanceStr, userPoolClaimableBalanceStr,\n      ] = await Promise.all([\n        getTokenBalance(PEN.addr, user),\n        getBalanceOfStaged(PENS.addr, user),\n        getBalanceBonded(PENS.addr, user),\n\n        getTokenBalance(PEN.addr, UNI.addr),\n        getTokenTotalSupply(UNI.addr),\n        getTokenBalance(UNI.addr, user),\n        getPoolBalanceOfBonded(poolAddress, user),\n        getPoolBalanceOfStaged(poolAddress, user),\n        getPoolBalanceOfRewarded(poolAddress, user),\n        getPoolBalanceOfClaimable(poolAddress, user),\n      ]);\n\n      const userBalance = toTokenUnitsBN(new BigNumber(esdBalance), PEN.decimals);\n      const userStagedBalance = toTokenUnitsBN(new BigNumber(stagedBalance), PENS.decimals);\n      const userBondedBalance = toTokenUnitsBN(new BigNumber(bondedBalance), PENS.decimals);\n\n      const userUNIBalance = toTokenUnitsBN(new BigNumber(userUNIBalanceStr), PENS.decimals);\n      const userPoolBondedBalance = toTokenUnitsBN(new BigNumber(userPoolBondedBalanceStr), PENS.decimals);\n      const userPoolStagedBalance = toTokenUnitsBN(new BigNumber(userPoolStagedBalanceStr), PENS.decimals);\n      const userPoolRewardedBalance = toTokenUnitsBN(new BigNumber(userPoolRewardedBalanceStr), PENS.decimals);\n      const userPoolClaimableBalance = toTokenUnitsBN(new BigNumber(userPoolClaimableBalanceStr), PENS.decimals);\n\n      let UNItoPEN = new BigNumber(0);\n      if(pairTotalSupplyUNIStr != 0)\n        UNItoPEN = new BigNumber(pairBalancePENStr).dividedBy(new BigNumber(pairTotalSupplyUNIStr));\n\n      const daoTotalBalance = userStagedBalance.plus(userBondedBalance);\n      const poolTotalBalance = UNItoPEN.multipliedBy(userPoolStagedBalance.plus(userPoolBondedBalance))\n        .plus(userPoolRewardedBalance.plus(userPoolClaimableBalance));\n      const circulationBalance = UNItoPEN.multipliedBy(userUNIBalance).plus(userBalance)\n\n      const totalBalance = daoTotalBalance.plus(poolTotalBalance).plus(circulationBalance)\n\n      if (!isCancelled) {\n        setTotalBalance(totalBalance);\n      }\n    }\n\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <div style={{ fontSize: 14, padding: 3, fontWeight: 400, lineHeight: 1.5, fontFamily: 'aragon-ui-monospace, monospace'}}>    \n      ∅{formatBN(totalBalance, 2)}\n    </div>\n  );\n}\n\n\nexport default TotalBalance;\n","import React, { useState } from 'react';\nimport { useWallet } from 'use-wallet';\nimport './style.css';\nimport { useTranslation } from 'react-i18next';\n\nimport {\n  Button, IdentityBadge, IconConnect, Box, IconPower, LinkBase,\n} from '@aragon/ui';\n\nimport { connect } from '../../utils/web3';\nimport TotalBalance from \"./TotalBalance\";\nimport ConnectModal from './ConnectModal';\n\ntype connectButtonProps = {\n  hasWeb3: boolean,\n  user: string,\n  setUser: Function\n}\n\nfunction ConnectButton({ hasWeb3, user, setUser }: connectButtonProps) {\n  const { t, i18n } = useTranslation();\n  const { status, reset } = useWallet();\n\n  const [isWeb3Connected, setIsWeb3Connected] = useState(false);\n\n  const connectWeb3 = async () => {\n    const address = await connect();\n    if(address == false) return;\n    setIsWeb3Connected(true);\n    setUser(address);\n  };\n\n  const disconnectWeb3 = async () => {\n    setIsWeb3Connected(false);\n    setUser('');\n    // reset();\n  };\n\n  // const toggleModal = () => setModalOpen(!isModalOpen);\n\n  return isWeb3Connected ? (\n    <div style={{display: 'flex'}}>\n      <div style={{flex: '1'}}/>\n      <div>\n        <Box padding={4} style={{width: '192px'}}>\n          <div style={{display: 'flex'}}>\n            <div>\n              <LinkBase onClick={disconnectWeb3} style={{marginRight: '8px', height: '24px'}}>\n                <IconPower />\n              </LinkBase>\n            </div>\n            <div style={{flex: '1', textAlign: 'right'}}>\n              <IdentityBadge entity={user} />\n            </div>\n          </div>\n          <div style={{display: 'flex'}}>\n            <div style={{flex: '1', textAlign: 'right'}}>\n              <TotalBalance user={user} />\n            </div>\n          </div>\n        </Box>\n      </div>\n    </div>\n  ) : (\n    <>\n      <Button icon={<IconConnect />} label={t(\"Connect\")} onClick={connectWeb3} disabled={!hasWeb3}/>\n    </>\n  );\n}\n\ntype linkButtonProps = {\n  title:string,\n  onClick: Function,\n  isSelected?:boolean\n}\n\nfunction LinkButton({ title, onClick, isSelected = false }:linkButtonProps) {\n  return (\n      <LinkBase onClick={onClick} style={{marginLeft: '8px', marginRight: '8px', height: '40px'}}>\n        <div style={{ padding: '1%', opacity: isSelected ? 1 : 0.5, fontSize: 17 }}>{title}</div>\n      </LinkBase>\n  );\n}\n\n\nexport default ConnectButton;\n","import React, { useEffect, useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport { useHistory } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { LinkBase, useTheme } from '@aragon/ui';\nimport ConnectButton from './ConnectButton';\n\ntype NavbarProps = {\n  hasWeb3: boolean,\n  user: string,\n  setUser: Function\n}\n\nfunction NavBar({\n  hasWeb3, user, setUser,\n}:NavbarProps) {\n  const { t, i18n } = useTranslation();\n  const history = useHistory();\n  const currentTheme = useTheme();\n  const [selected, setSelected] = useState(0);\n  const [page, setPage] = useState(\"\");\n\n  useEffect(() => {\n    return history.listen((location) => {\n      setPage(location.pathname)\n    })\n  }, [hasWeb3, user, history]);\n\n  const logoUrl = `./logo/logo_${currentTheme._name === 'light' ? 'black' : 'white'}.svg`\n\n  return (\n    <>\n      <div style={{\n        borderTop: '1px solid ' + currentTheme.border,\n        backgroundColor: 'none',\n        textAlign: 'center',\n        height: '128px',\n        width: '100%',\n        fontSize: '14px'\n      }}>\n        <div style={{maxWidth: '1100px', marginLeft: 'auto', marginRight: 'auto'}}>\n          <div style={{ display: 'flex', paddingTop: '24px'}}>\n            <div style={{ width: '20%', textAlign: 'left'}}>\n              <LinkBase onClick={() => history.push('/')} style={{marginRight: '16px', height: '40px'}}>\n                <img src={logoUrl} height=\"40px\" alt=\"Penny Protocol\"/>\n              </LinkBase>\n            </div>\n            <div style={{ width: '60%', textAlign: 'center' }}>\n              <div className=\"dropdown\" >\n              <button className=\"dropbtn\">{t(\"Lang\")}</button>\n              <div className=\"dropdown-content\">\n                <LinkButton title=\"En\" onClick={() => i18n.changeLanguage('en')}/>\n                <LinkButton title=\"SCH\" onClick={() => i18n.changeLanguage('sch')}/>\n                <LinkButton title=\"TCH\" onClick={() => i18n.changeLanguage('tch')}/>\n              </div>\n            </div>\n              <LinkButton title={t(\"DAO\")} onClick={() => history.push('/dao/')} isSelected={page.includes('/dao')}/>\n              <LinkButton title={t(\"Liquidity\")} onClick={() => history.push('/pool/')} isSelected={page.includes('/pool')}/>\n              <LinkButton title={t(\"Regulation\")} onClick={() => history.push('/regulation/')} isSelected={page.includes('/regulation')}/>\n              <LinkButton title={t(\"Governance\")} onClick={() => history.push('/governance/')} isSelected={page.includes('/governance')}/>\n              <LinkButton title={t(\"Trade\")} onClick={() => history.push('/trade/')} isSelected={page.includes('/trade')}/>\n              <LinkButton title={t(\"Coupons\")} onClick={() => history.push('/coupons/')} isSelected={page.includes('/coupons')}/>\n            </div>\n            <div style={{ width: '20%', textAlign: 'right'}}>\n              <ConnectButton hasWeb3={hasWeb3} user={user} setUser={setUser} />\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n\n\ntype linkButtonProps = {\n  title:string,\n  onClick: Function,\n  isSelected?:boolean\n}\n\nfunction LinkButton({ title, onClick, isSelected = false }:linkButtonProps) {\n  return (\n      <LinkBase onClick={onClick} style={{marginLeft: '8px', marginRight: '8px', height: '40px'}}>\n        <div style={{ padding: '1%', opacity: isSelected ? 1 : 0.5, fontSize: 17 }}>{title}</div>\n      </LinkBase>\n  );\n}\n\nexport default NavBar;\n","import React from 'react';\nimport { useTranslation } from 'react-i18next';\n\ntype EpochBlockProps = {\n  epoch: string\n}\n\nfunction EpochBlock({ epoch }: EpochBlockProps) {\n  const { t, i18n } = useTranslation();\n  return (\n    <>\n      <div style={{ fontSize: 16, padding: 3 }}>{t(\"Epoch\")}</div>\n      <div style={{ fontSize: 24, padding: 3, fontWeight: 400, lineHeight: 1.5, fontFamily: 'aragon-ui-monospace, monospace'}}>{epoch}</div>\n    </>\n  );\n}\n\nexport default EpochBlock;\n","import React, {useEffect, useState} from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n  Box, LinkBase, Tag,\n} from '@aragon/ui';\nimport EpochBlock from \"../common/EpochBlock\";\nimport {getEpoch} from '../../utils/infura';\nimport {PENS} from \"../../constants/tokens\";\nimport { useTranslation } from 'react-i18next';\n\nfunction epochformatted() {\n  const epochStart = 1609790400;\n  const epochPeriod = 1 * 60 * 60;\n  const hour = 60 * 60;\n  const minute = 60;\n  const unixTimeSec = Math.floor(Date.now() / 1000);\n\n  let epochRemainder = unixTimeSec - epochStart\n  const epoch = Math.floor(epochRemainder / epochPeriod);\n  epochRemainder -= epoch * epochPeriod;\n  const epochHour = Math.floor(epochRemainder / hour);\n  epochRemainder -= epochHour * hour;\n  const epochMinute = Math.floor(epochRemainder / minute);\n  epochRemainder -= epochMinute * minute;\n  return `-0${0}:${epochMinute > 9 ?epochMinute : \"0\" + epochMinute.toString()}:${epochRemainder > 9 ? epochRemainder : \"0\" + epochRemainder.toString()}`;\n}\n\ntype HomePageProps = {\n  user: string\n};\n\nfunction HomePage({user}: HomePageProps) {\n  const history = useHistory();\n  const { t, i18n } = useTranslation();\n  const [epochTime, setEpochTime] = useState(\"0-00:00:00\");\n  const [epoch, setEpoch] = useState(0);\n\n  useEffect(() => {\n    let isCancelled = false;\n    let epochStr = '0';\n    console.log(user);\n    \n\n    async function updateUserInfo() {\n      if(user != '')\n      {\n        epochStr = await getEpoch(PENS.addr);\n      }\n  \n      if (!isCancelled) {\n        setEpoch(parseInt(epochStr, 10));\n        setEpochTime(epochStr + epochformatted());\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 1000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <>\n      <div style={{ padding: '1%', display: 'flex', flexWrap: 'wrap', alignItems: 'center' }}>\n        <div style={{ flexBasis: '68%' }} />\n        <div style={{ flexBasis: '30%', flexGrow: 1, marginRight: '2%', textAlign: 'right'}}>\n          <Box>\n            <EpochBlock epoch={epochTime}/>\n          </Box>\n        </div>\n      </div>\n      <div style={{ padding: '1%', display: 'flex', flexWrap: 'wrap', alignItems: 'center' }}>\n        <div style={{ flexBasis: '30%', marginRight: '3%', marginLeft: '2%'  }}>\n          <MainButton\n            title=\"DAO\"\n            description={t(\"Earn rewards for governing\")}\n            icon={<i className=\"fas fa-dot-circle\"/>}\n            onClick={() => {\n              history.push('/dao/');\n            }}\n          />\n        </div>\n\n        <div style={{ flexBasis: '30%' }}>\n          <MainButton\n            title={t(\"LP Rewards\")}\n            description={t(\"Earn rewards for providing liquidity.\")}\n            icon={<i className=\"fas fa-parachute-box\"/>}\n            onClick={() => {\n              history.push('/pool/');\n            }}\n          />\n        </div>\n\n        <div style={{ flexBasis: '30%', marginLeft: '3%', marginRight: '2%' }}>\n          <MainButton\n            title={t(\"Regulation\")}\n            description={t(\"Network supply regulation statistics.\")}\n            icon={<i className=\"fas fa-chart-area\"/>}\n            onClick={() => {\n              history.push('/regulation/');\n            }}\n          />\n        </div>\n      </div>\n      <div style={{ padding: '1%', display: 'flex', flexWrap: 'wrap', alignItems: 'center' }}>\n        <div style={{ flexBasis: '30%', marginRight: '3%', marginLeft: '2%' }}>\n          <MainButton\n            title={t(\"Governance\")}\n            description={t(\"Vote on upgrades.\")}\n            icon={<i className=\"fas fa-poll\"/>}\n            onClick={() => {\n              history.push('/governance/');\n            }}\n          />\n        </div>\n\n        <div style={{ flexBasis: '30%' }}>\n          <MainButton\n            title={t(\"Trade\")}\n            description={t(\"Trade Pen tokens.\")}\n            icon={<i className=\"fas fa-exchange-alt\"/>}\n            onClick={() => {\n              history.push('/trade/');\n            }}\n          />\n        </div>\n\n        <div style={{ flexBasis: '30%', marginLeft: '3%', marginRight: '2%'  }}>\n          <MainButton\n            title={t(\"Coupons\")}\n            description={t(\"Purchase and redeem coupons.\")}\n            icon={<i className=\"fas fa-ticket-alt\"/>}\n            onClick={() => {\n              history.push('/coupons/');\n            }}\n          />\n        </div>\n        </div>\n        <div style={{ padding: '1%', display: 'flex', flexWrap: 'wrap', alignItems: 'center' }}>\n        <div style={{ flexBasis: '30%', marginRight: '3%', marginLeft: '35%' }}>\n          <MainButton\n            title={t(\"Epoch Details\")}\n            description={t(\"Epoch with historical details.\")}\n            icon={<i className=\"fas fa-retweet\"/>}\n            onClick={() => {\n              history.push('/epoch/');\n            }}\n          />\n        </div>\n      </div>\n    </>\n  );\n}\n\ntype MainButtonPropx = {\n  title: string,\n  description: string,\n  icon: any,\n  onClick: Function,\n  tag?:string\n}\n\nfunction MainButton({\n  title, description, icon, onClick, tag,\n}:MainButtonPropx) {\n  return (\n    <LinkBase onClick={onClick} style={{ width: '100%' }}>\n      <Box>\n        <div style={{ padding: 10, fontSize: 18 }}>\n          {title}\n          {tag ? <Tag>{tag}</Tag> : <></>}\n        </div>\n        <span style={{ fontSize: 48 }}>\n          {icon}\n        </span>\n        {/*<img alt=\"icon\" style={{ padding: 10, height: 64 }} src={iconUrl} />*/}\n        <div style={{ paddingTop: 5, opacity: 0.5 }}>\n          {' '}\n          {description}\n          {' '}\n        </div>\n\n      </Box>\n    </LinkBase>\n  );\n}\n\nexport default HomePage;\n","import React from 'react';\nimport { IdentityBadge } from '@aragon/ui';\n\ntype AddressBlockProps = {\n  label:string,\n  address: string\n}\n\nfunction AddressBlock({ label, address }: AddressBlockProps) {\n  return (\n    <>\n      <div style={{ fontSize: 16, padding: 3 }}>{label}</div>\n      <div style={{ padding: 5 }}>\n        <IdentityBadge entity={address} shorten />\n      </div>\n    </>\n  );\n}\n\nexport default AddressBlock;\n","import React from 'react';\n\nimport BigNumber from 'bignumber.js';\nimport {formatBN} from \"../../utils/number\";\n\ntype BlanceBlockProps = {\n  asset: string,\n  balance: BigNumber | string | number\n  suffix?: string\n}\n\nfunction BalanceBlock({ asset, balance, suffix=\"\"}: BlanceBlockProps) {\n  let integer = '0';\n  let digits = '0';\n  const balanceBN = new BigNumber(balance);\n  if (balanceBN.gte(new BigNumber(0))) {\n    const tokens = formatBN(balanceBN, 2).split('.')\n    integer = tokens[0];\n    digits = tokens[1];\n  }\n\n  return (\n    <>\n      <div style={{ fontSize: 14, padding: 3 }}>{asset}</div>\n      <div style={{ padding: 3 }}>\n        <span style={{ fontSize: 24 }}>{integer}</span>\n        .\n        <span style={{ fontSize: 18 }}>\n          {' '}\n          {digits}\n          {' '}\n        </span>\n        {suffix === \"\" ? '' : <span style={{ fontSize: 18 }}>{suffix}</span> }\n      </div>\n    </>\n  );\n}\n\nexport default BalanceBlock;\n","import React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport {\n  ButtonBase,\n} from '@aragon/ui';\n\nfunction MaxButton({ onClick }:{ onClick: Function }) {\n  const { t, i18n } = useTranslation();\n  return (\n    <div style={{ padding: 3 }}>\n      <ButtonBase onClick={onClick}>\n        <span style={{ opacity: 0.5 }}> {t(\"Max\")} </span>\n      </ButtonBase>\n    </div>\n  );\n}\n\nexport default MaxButton;\n","import React from 'react';\nimport BigNumber from 'bignumber.js';\n\nfunction PriceSection({\n  label, amt, symbol = '', forceDisplay = false,\n}:{label:string, amt: string|number|BigNumber, symbol?:string, forceDisplay?:boolean }) {\n  const amtBN = new BigNumber(amt);\n  if (amtBN.gt(new BigNumber(0)) || forceDisplay) {\n    return (\n      <div style={{ padding: 3, opacity: 0.5 }}>\n        <span style={{ fontSize: 13 }}>{label}</span>\n        <span style={{ fontSize: 13 }}>{amtBN.toNumber().toFixed(5)}</span>\n        <span style={{ fontSize: 13 }}>{symbol}</span>\n      </div>\n    );\n  }\n  return <div style={{ padding: 3, opacity: 0.5 }} />;\n}\n\n\nexport default PriceSection;\n","import React, { ReactChild } from 'react';\n\ntype commentProps = {\n  text: string | ReactChild\n}\n\nfunction Comment({ text }: commentProps) {\n  return (\n    <div style={{ padding: 5, opacity: 0.5 }}>\n      {text}\n    </div>\n  );\n}\n\nexport default Comment;\n","import styled from 'styled-components';\n\nconst FlexWrapper = styled.div`\n  // display: flex;\n  padding-left: 20%;\n  padding-right: 20%;\n`;\n\nexport default FlexWrapper;\n","import React from 'react';\nimport { Checkbox, useTheme } from '@aragon/ui';\nimport styled from 'styled-components';\n\ntype checkBoxProps = {\n  text: string,\n  checked: boolean,\n  onCheck: Function\n}\n\nfunction MyCheckBox({ text, checked, onCheck }: checkBoxProps) {\n  const theme = useTheme();\n  return (\n    <CheckBoxWrapper theme={theme}>\n      <Checkbox\n        checked={checked}\n        onChange={onCheck}\n      />\n      <span style={{ margin: '4px' }}>\n        {text}\n      </span>\n      <br />\n    </CheckBoxWrapper>\n  );\n}\n\nexport default MyCheckBox;\n\nconst CheckBoxWrapper = styled.div`{\n  display: flex;\n  font-size: 14px;\n  color: ${(props) => props.theme.surfaceContentSecondary}\n}`;","import React from 'react';\nimport BigNumber from 'bignumber.js';\nimport { useTranslation } from 'react-i18next';\nimport { BalanceBlock, AddressBlock } from '../common/index';\n\ntype TradePageHeaderProps = {\n  pairBalancePEN: BigNumber,\n  pairBalanceUSDC: BigNumber,\n  uniswapPair: string,\n};\n\nconst TradePageHeader = ({\n  pairBalancePEN, pairBalanceUSDC, uniswapPair,\n}: TradePageHeaderProps) => {\n  const { t, i18n } = useTranslation();\n  const price = pairBalanceUSDC.dividedBy(pairBalancePEN);\n\n  return (\n    <div style={{ padding: '2%', display: 'flex', flexWrap: 'wrap', alignItems: 'center' }}>\n      <div style={{ flexBasis: '25%' }}>\n        <BalanceBlock asset={t(\"PEN Price\")} balance={price} suffix={\"USDC\"}/>\n      </div>\n      <div style={{ flexBasis: '25%' }}>\n        <BalanceBlock asset={t(\"PEN Liquidity\")} balance={pairBalancePEN} suffix={\"PEN\"}/>\n      </div>\n      <div style={{ flexBasis: '25%' }}>\n        <BalanceBlock asset={t(\"USDC Liquidity\")} balance={pairBalanceUSDC} suffix={\"USDC\"}/>\n      </div>\n      <div style={{ flexBasis: '25%' }}>\n        <>\n          <AddressBlock label={t(\"Uniswap Contract\")} address={uniswapPair} />\n        </>\n      </div>\n    </div>\n  );\n}\n\n\nexport default TradePageHeader;\n","import React from 'react';\n\nimport {\n  Header,\n} from '@aragon/ui';\n\ntype IconHeaderProps = {\n  icon: any,\n  text: string\n}\n\nfunction IconHeader({ icon, text }: IconHeaderProps) {\n  return (\n    <>\n      <div style={{ padding: '1%', display: 'flex', alignItems: 'center' }}>\n        <div style={{ marginRight: '2%', fontSize: 48 }}>\n          {icon}\n        </div>\n        <div>\n          <Header primary={text} />\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default IconHeader;\n","import React, { useState, useEffect } from 'react';\nimport { LinkBase, Box } from '@aragon/ui';\nimport { useTranslation } from 'react-i18next';\nimport BigNumber from 'bignumber.js';\nimport { getTokenBalance } from '../../utils/infura';\nimport { toTokenUnitsBN } from '../../utils/number';\n\nimport TradePageHeader from './Header';\nimport {PEN, UNI, USDC} from \"../../constants/tokens\";\nimport IconHeader from \"../common/IconHeader\";\n\n\nfunction UniswapPool({ user }: {user: string}) {\n  const { t, i18n } = useTranslation();\n  const [pairBalancePEN, setPairBalancePEN] = useState(new BigNumber(0));\n  const [pairBalanceUSDC, setPairBalanceUSDC] = useState(new BigNumber(0));\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [\n        pairBalancePENStr, pairBalanceUSDCStr,\n      ] = await Promise.all([\n        getTokenBalance(PEN.addr, UNI.addr),\n        getTokenBalance(USDC.addr, UNI.addr),\n      ]);\n\n      if (!isCancelled) {\n        setPairBalancePEN(toTokenUnitsBN(pairBalancePENStr, PEN.decimals));\n        setPairBalanceUSDC(toTokenUnitsBN(pairBalanceUSDCStr, USDC.decimals));\n      }\n    }\n\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <>\n      <IconHeader icon={<i className=\"fas fa-exchange-alt\"/>} text={t(\"Trade\")}/>\n\n      <TradePageHeader\n        pairBalancePEN={pairBalancePEN}\n        pairBalanceUSDC={pairBalanceUSDC}\n        uniswapPair={UNI.addr}\n      />\n\n      <div style={{ padding: '1%', display: 'flex', flexWrap: 'wrap', alignItems: 'center' }}>\n        <div style={{ flexBasis: '30%', marginRight: '3%', marginLeft: '2%'  }}>\n          <MainButton\n            title={t(\"Info\")}\n            description={t(\"View PEN-USDC pool stats.\")}\n            icon={<i className=\"fas fa-chart-area\"/>}\n            href={\"https://uniswap.info/pair/0x365c6ABA69791356B550671718c1e3C11b865c4B\"}\n          />\n        </div>\n\n        <div style={{ flexBasis: '30%' }}>\n          <MainButton\n            title={t(\"Trade\")}\n            description={t(\"Trade Pen tokens.\")}\n            icon={<i className=\"fas fa-exchange-alt\"/>}\n            href={\"https://uniswap.exchange/swap?inputCurrency=0x1b3924f88A5ee1D9C86b97dce55d99d4B22dB569&outputCurrency=0xa63fae5e28c5310d54581c0af34ee7472ff4dd6d\"}\n          />\n        </div>\n\n        <div style={{ flexBasis: '30%', marginLeft: '3%', marginRight: '2%' }}>\n          <MainButton\n            title={t(\"Supply\")}\n            description={t(\"Supply and redeem liquidity.\")}\n            icon={<i className=\"fas fa-water\"/>}\n            href={\"https://uniswap.exchange/add/0xa63fae5e28c5310d54581c0af34ee7472ff4dd6d/0x1b3924f88A5ee1D9C86b97dce55d99d4B22dB569\"}\n          />\n        </div>\n      </div>\n    </>\n  );\n}\n\ntype MainButtonProps = {\n  title: string,\n  description: string,\n  icon: any,\n  href:string\n}\n\nfunction MainButton({\n  title, description, icon, href,\n}:MainButtonProps) {\n  return (\n    <LinkBase href={href} style={{ width: '100%' }}>\n      <Box>\n        <div style={{ padding: 10, fontSize: 18 }}>\n          {title}\n        </div>\n        <span style={{ fontSize: 48 }}>\n          {icon}\n        </span>\n        {/*<img alt=\"icon\" style={{ padding: 10, height: 64 }} src={iconUrl} />*/}\n        <div style={{ paddingTop: 5, opacity: 0.5 }}>\n          {' '}\n          {description}\n          {' '}\n        </div>\n\n      </Box>\n    </LinkBase>\n  );\n}\n\nexport default UniswapPool;\n","import React from 'react';\n\ntype TextBlockProps = {\n  label: string,\n  text: string\n}\n\nfunction TextBlock({ label, text }: TextBlockProps) {\n  return (\n    <>\n      <div style={{ fontSize: 16, padding: 3 }}>{label}</div>\n      <div style={{ fontSize: 24, padding: 3 }}>{text}</div>\n    </>\n  );\n}\n\nexport default TextBlock;\n","import React from 'react';\nimport BigNumber from 'bignumber.js';\nimport { useTranslation } from 'react-i18next';\nimport { BalanceBlock } from '../common/index';\nimport TextBlock from \"../common/TextBlock\";\nimport {ownership} from \"../../utils/number\";\n\ntype AccountPageHeaderProps = {\n  accountPENBalance: BigNumber,\n  accountPENSBalance: BigNumber,\n  totalPENSSupply: BigNumber,\n  accountStagedBalance: BigNumber,\n  accountBondedBalance: BigNumber,\n  accountStatus: number,\n  unlocked: number,\n};\n\nconst STATUS_MAP = [\"Unlocked\", \"Locked\", \"Locked\"];\n\nfunction AccountPageHeader ({\n  accountPENBalance, accountPENSBalance, totalPENSSupply, accountStagedBalance, accountBondedBalance, accountStatus, unlocked\n}: AccountPageHeaderProps) {\n  const { t, i18n } = useTranslation();\n  return (\n  <div style={{ padding: '2%', display: 'flex', flexWrap: 'wrap', alignItems: 'center' }}>\n    <div style={{ flexBasis: '20%' }}>\n      <BalanceBlock asset={t(\"Balance\")} balance={accountPENBalance} suffix={t(\" PEN\")}/>\n    </div>\n    <div style={{ flexBasis: '20%' }}>\n      <BalanceBlock asset={t(\"Staged\")} balance={accountStagedBalance}  suffix={\" PEN\"}/>\n    </div>\n    <div style={{ flexBasis: '20%' }}>\n      <BalanceBlock asset={t(\"Bonded\")} balance={accountBondedBalance} suffix={\" PEN\"} />\n    </div>\n    <div style={{ flexBasis: '20%' }}>\n      <BalanceBlock asset={t(\"DAO Ownership\")} balance={ownership(accountPENSBalance, totalPENSSupply)}  suffix={\"%\"}/>\n    </div>\n    <div style={{ flexBasis: '20%' }}>\n      <TextBlock label={t(\"Status\")} text={t(STATUS_MAP[accountStatus]) + (accountStatus === 0 ? \"\" : \" \"+ t(\"until\") + \" \" + unlocked)}/>\n    </div>\n  </div>\n);\n}\n\n\nexport default AccountPageHeader;\n","import React from 'react';\n\nimport BigNumber from 'bignumber.js';\nimport {\n  TextInput,\n} from '@aragon/ui';\n\ntype BigNumberInputProps = {\n  value: BigNumber,\n  setter: (value: BigNumber) => void\n  adornment?: any,\n  disabled?: boolean\n}\n\nfunction BigNumberInput({ value, setter, adornment, disabled=false }: BigNumberInputProps) {\n  return (\n    <>\n      <TextInput\n        type=\"number\"\n        adornmentPosition=\"end\"\n        adornment={adornment}\n        wide\n        value={value.isNegative() ? '' : value.toFixed()}\n        onChange={(event) => {\n          if (event.target.value) {\n            setter(new BigNumber(event.target.value));\n          } else {\n            setter(new BigNumber(-1));\n          }\n        }}\n        onBlur={() => {\n          if (value.isNegative()) {\n            setter(new BigNumber(0))\n          }\n        }}\n        disabled={disabled}\n      />\n    </>\n  );\n}\n\nexport default BigNumberInput;\n","import React, { useState } from 'react';\nimport {\n  Box, Button, IconCirclePlus, IconCircleMinus, IconLock\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock, MaxButton,\n} from '../common/index';\nimport {approve, deposit, withdraw} from '../../utils/web3';\nimport {isPos, toBaseUnitBN} from '../../utils/number';\nimport {PEN, PENS} from \"../../constants/tokens\";\nimport {MAX_UINT256} from \"../../constants/values\";\nimport BigNumberInput from \"../common/BigNumberInput\";\nimport { useTranslation } from 'react-i18next';\n\ntype WithdrawDepositProps = {\n  user: string\n  balance: BigNumber,\n  allowance: BigNumber,\n  stagedBalance: BigNumber,\n  status: number\n};\n\nfunction WithdrawDeposit({\n  user, balance, allowance, stagedBalance, status\n}: WithdrawDepositProps) {\n  const { t, i18n } = useTranslation();\n  const [depositAmount, setDepositAmount] = useState(new BigNumber(0));\n  const [withdrawAmount, setWithdrawAmount] = useState(new BigNumber(0));\n\n  return (\n    <Box heading={t(\"Stage\")}>\n      {allowance.comparedTo(MAX_UINT256) === 0 ?\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\n          {/* total Issued */}\n          <div style={{flexBasis: '32%'}}>\n            <BalanceBlock asset={t(\"Staged\")} balance={stagedBalance} suffix={\"PEN\"}/>\n          </div>\n          {/* Deposit Døllar into DAO */}\n          <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n            <div style={{display: 'flex'}}>\n              <div style={{width: '60%', minWidth: '6em'}}>\n                <>\n                  <BigNumberInput\n                    adornment=\"PEN\"\n                    value={depositAmount}\n                    setter={setDepositAmount}\n                    disabled={status !== 0}\n                  />\n                  <MaxButton\n                    onClick={() => {\n                      setDepositAmount(balance);\n                    }}\n                  />\n                </>\n              </div>\n              <div style={{width: '40%', minWidth: '6em'}}>\n                <Button\n                  wide\n                  icon={status === 0 ? <IconCirclePlus/> : <IconLock/>}\n                  label={t(\"Deposit\")}\n                  onClick={() => {\n                    deposit(\n                      PENS.addr,\n                      toBaseUnitBN(depositAmount, PEN.decimals),\n                    );\n                  }}\n                  disabled={status === 1 || !isPos(depositAmount) || depositAmount.isGreaterThan(balance)}\n                />\n              </div>\n            </div>\n          </div>\n          <div style={{flexBasis: '2%'}}/>\n          {/* Withdraw Døllar from DAO */}\n          <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n            <div style={{display: 'flex'}}>\n              <div style={{width: '60%', minWidth: '7em'}}>\n                <>\n                  <BigNumberInput\n                    adornment=\"PEN\"\n                    value={withdrawAmount}\n                    setter={setWithdrawAmount}\n                    disabled={status !== 0}\n                  />\n                  <MaxButton\n                    onClick={() => {\n                      setWithdrawAmount(stagedBalance);\n                    }}\n                  />\n                </>\n              </div>\n              <div style={{width: '40%', minWidth: '7em'}}>\n                <Button\n                  wide\n                  icon={status === 0 ? <IconCircleMinus/> : <IconLock/>}\n                  label={t(\"Withdraw\")}\n                  onClick={() => {\n                    withdraw(\n                      PENS.addr,\n                      toBaseUnitBN(withdrawAmount, PEN.decimals),\n                    );\n                  }}\n                  disabled={status === 1 || !isPos(withdrawAmount) || withdrawAmount.isGreaterThan(stagedBalance)}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        :\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\n          {/* total Issued */}\n          <div style={{flexBasis: '32%'}}>\n            <BalanceBlock asset={t(\"Staged\")} balance={stagedBalance} suffix={\"PEN\"}/>\n          </div>\n          <div style={{flexBasis: '35%'}}/>\n          {/* Approve DAO to spend Døllar */}\n          <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n            <Button\n              wide\n              icon={<IconCirclePlus />}\n              label={t(\"Approve\")}\n              onClick={() => {\n                approve(PEN.addr, PENS.addr);\n              }}\n              disabled={user === ''}\n            />\n          </div>\n        </div>\n      }\n    </Box>\n  );\n}\n\nexport default WithdrawDeposit;\n","import React, { useState } from 'react';\nimport {\n  Box, Button, IconCirclePlus, IconCircleMinus, IconCaution\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock, MaxButton,\n} from '../common/index';\nimport { bond, unbondUnderlying } from '../../utils/web3';\nimport {isPos, toBaseUnitBN} from '../../utils/number';\nimport { PEN, PENS } from \"../../constants/tokens\";\nimport BigNumberInput from \"../common/BigNumberInput\";\nimport TextBlock from \"../common/TextBlock\";\nimport { useTranslation } from 'react-i18next';\n\ntype BondUnbondProps = {\n  staged: BigNumber,\n  bonded: BigNumber,\n  status: number,\n  lockup: number,\n};\n\nfunction BondUnbond({\n  staged, bonded, status, lockup\n}: BondUnbondProps) {\n  const [bondAmount, setBondAmount] = useState(new BigNumber(0));\n  const [unbondAmount, setUnbondAmount] = useState(new BigNumber(0));\n  const { t, i18n } = useTranslation();\n  return (\n    <Box heading={t(\"Bond\")}>\n      <div style={{display: 'flex', flexWrap: 'wrap'}}>\n        {/* Total bonded */}\n        <div style={{flexBasis: '16%'}}>\n          <BalanceBlock asset={t(\"Bonded\")} balance={bonded} suffix={t(\"PEN\")}/>\n        </div>\n        {/* Total bonded */}\n        <div style={{flexBasis: '16%'}}>\n          <TextBlock label={t(\"Exit Lockup\")} text={lockup === 0 ? \"\" : lockup === 1 ? \"1 epoch\" : `${lockup} epochs`}/>\n        </div>\n        {/* Bond Døllar within DAO */}\n        <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n            <div style={{width: '60%', minWidth: '6em'}}>\n              <>\n                <BigNumberInput\n                  adornment={t(\"PEN\")}\n                  value={bondAmount}\n                  setter={setBondAmount}\n                />\n                <MaxButton\n                  onClick={() => {\n                    setBondAmount(staged);\n                  }}\n                />\n              </>\n            </div>\n            <div style={{width: '40%', minWidth: '7em'}}>\n              <Button\n                wide\n                icon={status === 0 ? <IconCirclePlus/> : <IconCaution/>}\n                label={t(\"Bond\")}\n                onClick={() => {\n                  bond(\n                    PENS.addr,\n                    toBaseUnitBN(bondAmount, PEN.decimals),\n                  );\n                }}\n                disabled={status === 2 || !isPos(bondAmount) || bondAmount.isGreaterThan(staged)}\n              />\n            </div>\n          </div>\n        </div>\n        <div style={{width: '2%'}}/>\n        {/* Unbond Døllar within DAO */}\n        <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n            <div style={{width: '60%', minWidth: '6em'}}>\n              <>\n                <BigNumberInput\n                  adornment={t(\"PEN\")}\n                  value={unbondAmount}\n                  setter={setUnbondAmount}\n                />\n                <MaxButton\n                  onClick={() => {\n                    setUnbondAmount(bonded);\n                  }}\n                />\n              </>\n            </div>\n            <div style={{width: '40%', minWidth: '7em'}}>\n              <Button\n                wide\n                icon={status === 0 ? <IconCircleMinus/> : <IconCaution/>}\n                label={t(\"Unbond\")}\n                onClick={() => {\n                  unbondUnderlying(\n                    PENS.addr,\n                    toBaseUnitBN(unbondAmount, PEN.decimals),\n                  );\n                }}\n                disabled={status === 2 || !isPos(unbondAmount) || unbondAmount.isGreaterThan(bonded)}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n      <div style={{width: '100%', paddingTop: '2%', textAlign: 'center'}}>\n        <span style={{ opacity: 0.5 }}>{t(\"Bonding events will restart the lockup timer\")}</span>\n      </div>\n    </Box>\n  );\n}\n\nexport default BondUnbond;\n","import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport BigNumber from 'bignumber.js';\nimport {\n  getBalanceBonded,\n  getBalanceOfStaged, getFluidUntil, getLockedUntil,\n  getStatusOf, getTokenAllowance,\n  getTokenBalance, getTokenTotalSupply,\n} from '../../utils/infura';\nimport {PEN, PENS} from \"../../constants/tokens\";\nimport {DAO_EXIT_LOCKUP_EPOCHS} from \"../../constants/values\";\nimport { toTokenUnitsBN } from '../../utils/number';\n\nimport AccountPageHeader from \"./Header\";\nimport WithdrawDeposit from \"./WithdrawDeposit\";\nimport BondUnbond from \"./BondUnbond\";\nimport IconHeader from \"../common/IconHeader\";\nimport {getPoolAddress} from \"../../utils/pool\";\nimport {DollarPool4} from \"../../constants/contracts\";\n\nfunction Wallet({ user }: {user: string}) {\n  const { t, i18n } = useTranslation();\n  const { override } = useParams();\n  if (override) {\n    user = override;\n  }\n\n  const [userPENBalance, setUserPENBalance] = useState(new BigNumber(0));\n  const [userPENAllowance, setUserPENAllowance] = useState(new BigNumber(0));\n  const [userPENSBalance, setUserPENSBalance] = useState(new BigNumber(0));\n  const [totalPENSSupply, setTotalPENSSupply] = useState(new BigNumber(0));\n  const [userStagedBalance, setUserStagedBalance] = useState(new BigNumber(0));\n  const [userBondedBalance, setUserBondedBalance] = useState(new BigNumber(0));\n  const [userStatus, setUserStatus] = useState(0);\n  const [userStatusUnlocked, setUserStatusUnlocked] = useState(0);\n  const [lockup, setLockup] = useState(0);\n\n  //Update User balances\n  useEffect(() => {\n    if (user === '') {\n      setUserPENBalance(new BigNumber(0));\n      setUserPENAllowance(new BigNumber(0));\n      setUserPENSBalance(new BigNumber(0));\n      setTotalPENSSupply(new BigNumber(0));\n      setUserStagedBalance(new BigNumber(0));\n      setUserBondedBalance(new BigNumber(0));\n      setUserStatus(0);\n      return;\n    }\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [\n        esdBalance, esdAllowance, esdsBalance, esdsSupply, stagedBalance, bondedBalance, status, poolAddress,\n        fluidUntilStr, lockedUntilStr\n      ] = await Promise.all([\n        getTokenBalance(PEN.addr, user),\n        getTokenAllowance(PEN.addr, user, PENS.addr),\n        getTokenBalance(PENS.addr, user),\n        getTokenTotalSupply(PENS.addr),\n        getBalanceOfStaged(PENS.addr, user),\n        getBalanceBonded(PENS.addr, user),\n        getStatusOf(PENS.addr, user),\n        getPoolAddress(),\n\n        getFluidUntil(PENS.addr, user),\n        getLockedUntil(PENS.addr, user),\n      ]);\n\n      const userPENBalance = toTokenUnitsBN(esdBalance, PEN.decimals);\n      const userPENSBalance = toTokenUnitsBN(esdsBalance, PENS.decimals);\n      const totalPENSSupply = toTokenUnitsBN(esdsSupply, PENS.decimals);\n      const userStagedBalance = toTokenUnitsBN(stagedBalance, PENS.decimals);\n      const userBondedBalance = toTokenUnitsBN(bondedBalance, PENS.decimals);\n      const userStatus = parseInt(status, 10);\n      const fluidUntil = parseInt(fluidUntilStr, 10);\n      const lockedUntil = parseInt(lockedUntilStr, 10);\n\n      if (!isCancelled) {\n        setUserPENBalance(new BigNumber(userPENBalance));\n        setUserPENAllowance(new BigNumber(esdAllowance));\n        setUserPENSBalance(new BigNumber(userPENSBalance));\n        setTotalPENSSupply(new BigNumber(totalPENSSupply));\n        setUserStagedBalance(new BigNumber(userStagedBalance));\n        setUserBondedBalance(new BigNumber(userBondedBalance));\n        setUserStatus(userStatus);\n        setUserStatusUnlocked(Math.max(fluidUntil, lockedUntil))\n        setLockup(poolAddress === DollarPool4 ? DAO_EXIT_LOCKUP_EPOCHS : 1);\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <>\n      <IconHeader icon={<i className=\"fas fa-dot-circle\"/>} text={t(\"DAO\")}/>\n\n      <AccountPageHeader\n        accountPENBalance={userPENBalance}\n        accountPENSBalance={userPENSBalance}\n        totalPENSSupply={totalPENSSupply}\n        accountStagedBalance={userStagedBalance}\n        accountBondedBalance={userBondedBalance}\n        accountStatus={userStatus}\n        unlocked={userStatusUnlocked}\n      />\n\n      <WithdrawDeposit\n        user={user}\n        balance={userPENBalance}\n        allowance={userPENAllowance}\n        stagedBalance={userStagedBalance}\n        status={userStatus}\n      />\n\n      <BondUnbond\n        staged={userStagedBalance}\n        bonded={userBondedBalance}\n        status={userStatus}\n        lockup={lockup}\n      />\n    </>\n  );\n}\n\nexport default Wallet;\n","import React from 'react';\n\nimport BigNumber from 'bignumber.js';\n\ntype NumberBlockProps = {\n  title: string,\n  num: BigNumber | string | number\n}\n\nfunction NumberBlock({ title, num }: NumberBlockProps) {\n  const numNum = new BigNumber(num).toNumber();\n\n  return (\n    <>\n      <div style={{ fontSize: 14, padding: 3 }}>{title}</div>\n      <div style={{ fontSize: 24, padding: 3 }}>{numNum}</div>\n\n    </>\n  );\n}\n\nexport default NumberBlock;\n","import React from 'react';\nimport {\n  Box, Button, IconCirclePlus,\n} from '@aragon/ui';\nimport {advance} from '../../utils/web3';\nimport NumberBlock from \"../common/NumberBlock\";\nimport {PENS} from \"../../constants/tokens\";\nimport BigNumber from 'bignumber.js';\nimport { BalanceBlock } from '../common/index';\nimport { useTranslation } from 'react-i18next';\n\ntype AdvanceEpochProps = {\n  user: string,\n  epoch: number,\n  epochTime: number,\n  spotPrice: BigNumber,\n  twapPrice: string,\n  nextEpochs: string,\n  price: BigNumber,\n  couponPremium: BigNumber,\n  totalSupply: BigNumber\n}\n\nfunction AdvanceEpoch({\n  user,\n  epoch,\n  epochTime,\n  spotPrice, \n  twapPrice, \n  nextEpochs, \n  price,\n  couponPremium, \n  totalSupply\n}: AdvanceEpochProps) {\n  const { t, i18n } = useTranslation();\n  const twapPrices = Number(price);\n  const taotalSuplly = Number(totalSupply);\n  let factorPrice;\n  if(twapPrices < 1)\n    factorPrice = 1 - twapPrices;\n  else\n     factorPrice = 0;\n\n  factorPrice = taotalSuplly * factorPrice;\n\n  return (\n    <>\n    <Box heading={t(\"Advance Epoch\")}>\n      <div style={{ display: 'flex' }}>\n        {/* Epoch Time */}\n        <div style={{ width: '30%' }}>\n          <NumberBlock title={t(\"Epoch (from current time)\")} num={epochTime} />\n        </div>\n        {/* Advance Epoch */}\n        <div style={{ width: '40%' }}/>\n        <div style={{ width: '30%', paddingTop: '2%' }}>\n          <Button\n            wide\n            icon={<IconCirclePlus />}\n            label={t(\"Advance\")}\n            onClick={() => {\n              advance(PENS.addr);\n            }}\n            disabled={user === '' || epoch >= epochTime}\n          />\n        </div>\n      </div>\n    </Box>\n    <Box heading={t(\"Next Epoch\")}>\n      <div style={{display: 'flex', flexWrap: 'wrap'}}>\n        <div style={{ flexBasis: '100%'}}>\n            <h2><BalanceBlock asset=\"\" balance={factorPrice} suffix={t(\"PEN Debt will increase in the next Epoch\")}/></h2>\n            <h2><BalanceBlock asset=\"\" balance={couponPremium.multipliedBy(100)} suffix={t(\"% coupon premium. No reward for Bonding or LPing.\")}/></h2>\n        </div>\n      </div>\n    </Box>\n    </>\n  );\n}\n\n\nexport default AdvanceEpoch;\n","import React from 'react';\nimport { BalanceBlock, AddressBlock } from '../common/index';\nimport NumberBlock from \"../common/NumberBlock\";\nimport TextBlock from \"../common/TextBlock\";\nimport BigNumber from 'bignumber.js';\nimport { useTranslation } from 'react-i18next';\n\ntype AccountPageHeaderProps = {\n  epoch: number,\n  epochTime: number,\n  spotPrice: BigNumber,\n  twapPrice: string,\n  nextEpochs: string,\n  price: BigNumber,\n  epochTimes: string\n};\n\nfunction EpochPageHeader ({\n  epoch, \n  epochTime,\n  spotPrice, \n  twapPrice, \n  nextEpochs, \n  epochTimes,\n  price\n\n}: AccountPageHeaderProps) {\n  const { t, i18n } = useTranslation();\n  return (\n\n  <div style={{ padding: '2%', display: 'flex', alignItems: 'center' }}>\n    <div style={{ width: '25%' }}>\n      <NumberBlock title={t(\"Current\")} num={epoch} />\n    </div>\n   <div style={{ flexBasis: '25%' }}>\n        <TextBlock label={t(\"Next Epoch\")} text={epochTimes}/>\n      </div>\n      <div style={{ flexBasis: '25%' }}>\n        <BalanceBlock asset={t(\"Spot Price\")} balance={price} suffix={\"USDC\"}/>\n      </div>\n      <div style={{ flexBasis: '25%' }}>\n        <BalanceBlock asset={t(\"TWAP Price\")} balance={price} suffix={\"USDC\"}/>\n      </div>\n    <div style={{ width: '25%' }}>\n      <TextBlock label={t(\"Period\")} text={epoch >= 0 ? \"1 hours\" : \"1 hours\"}/>\n    </div>\n  </div>\n);\n}\n\nexport default EpochPageHeader;\n","import React, { useState, useEffect } from 'react';\nimport { Header } from '@aragon/ui';\n\nimport {getTokenBalance, getTokenTotalSupply, getTotalDebt, getCouponPremium, getEpoch, getEpochTime,\n} from '../../utils/infura';\nimport {PEN, UNI, USDC, PENS} from \"../../constants/tokens\";\nimport AdvanceEpoch from './AdvanceEpoch';\nimport EpochPageHeader from \"./Header\";\nimport IconHeader from \"../common/IconHeader\";\nimport BigNumber from 'bignumber.js';\nimport { toTokenUnitsBN } from '../../utils/number';\nimport { useTranslation } from 'react-i18next';\n\n\nconst ONE_COUPON = new BigNumber(10).pow(18);\nfunction epochformatted() {\n  const epochStart = 1599148800;\n  const epochPeriod = 1 * 60 * 60;\n  const hour = 60 * 60;\n  const minute = 60;\n  const unixTimeSec = Math.floor(Date.now() / 1000);\n\n  let epochRemainder = unixTimeSec - epochStart\n  const epoch = Math.floor(epochRemainder / epochPeriod);\n  epochRemainder -= epoch * epochPeriod;\n  const epochHour = Math.floor(epochRemainder / hour);\n  epochRemainder -= epochHour * hour;\n  const epochMinute = Math.floor(epochRemainder / minute);\n  epochRemainder -= epochMinute * minute;\n  return `0${0}:${epochMinute < 50 ? 60 - epochMinute : \"0\" + (60 - epochMinute).toString()}:${epochRemainder < 50 ? 60 - epochRemainder : \"0\" + (60 - epochRemainder).toString()}`;\n}\n\nfunction EpochDetail({ user }: {user: string}) {\n  const { t, i18n } = useTranslation();\n  const [epoch, setEpoch] = useState(0);\n  const [epochTime, setEpochTime] = useState(0);\n  const [pairBalancePEN, setPairBalancePEN] = useState(new BigNumber(0));\n  const [pairBalanceUSDC, setPairBalanceUSDC] = useState(new BigNumber(0));\n  const [couponPremium, setCouponPremium] = useState(new BigNumber(0));\n  const [debt, setDebt] = useState(new BigNumber(0));\n  const [totalSupply, setTotalSupply] = useState(new BigNumber(0));\n  const [poolAddress, setPoolAddress] = useState(\"\");\n  const [epochTimes, setEpochTimes] = useState(\"00:00:00\");\n\n  const epochStart = 1609790400;\n  const epochPeriod = 1 * 60 * 60;\n  const hour = 60 * 60;\n  const minute = 60;\n  const unixTimeSec = Math.floor(Date.now() / 1000);\n\n  let epochRemainder = unixTimeSec - epochStart\n  const nextEpoch = Math.floor(epochRemainder / epochPeriod);\n  var nextEpochs = nextEpoch.toString();\n  useEffect(() => {\n    let isCancelled = false;\n    let epochStr = '0';\n    let epochTimeStr = '0';\n    let pairBalancePENStr = '0';\n    let pairBalanceUSDCStr = '0';\n    let debtStr = '0'; \n    let totalSupplyStr = '0';\n\n    async function updateUserInfo() {\n      if(user != '')\n      {\n      [epochStr, epochTimeStr, pairBalancePENStr, pairBalanceUSDCStr, debtStr, totalSupplyStr] = await Promise.all([\n          getEpoch(PENS.addr),\n          getEpochTime(PENS.addr),\n          getTokenBalance(PEN.addr, UNI.addr),\n          getTokenBalance(USDC.addr, UNI.addr),\n          getTotalDebt(PENS.addr),\n          getTokenTotalSupply(PEN.addr)\n      ]);\n      }\n      \n      const totalDebt = toTokenUnitsBN(debtStr, PEN.decimals);\n\n      if (!isCancelled) {\n        setEpoch(parseInt(epochStr, 10));\n        setEpochTime(parseInt(epochTimeStr, 10));\n        setPairBalancePEN(toTokenUnitsBN(pairBalancePENStr, PEN.decimals));\n        setPairBalanceUSDC(toTokenUnitsBN(pairBalanceUSDCStr, USDC.decimals));\n        setDebt(new BigNumber(totalDebt));\n        setEpochTimes(epochformatted());\n        setTotalSupply(toTokenUnitsBN(totalSupplyStr, PEN.decimals));\n        if (totalDebt.isGreaterThan(new BigNumber(1))) {\n          const couponPremiumStr = await getCouponPremium(PENS.addr, ONE_COUPON)\n          setCouponPremium(toTokenUnitsBN(couponPremiumStr, PEN.decimals));\n        } else {\n          setCouponPremium(new BigNumber(0));\n        }\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 1000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n  \n  return (\n    <>\n      <IconHeader icon={<i className=\"fas fa-retweet\"/>} text={t(\"Epoch\")}/>\n\n      <EpochPageHeader\n        epoch={epoch}\n        epochTime={epochTime}\n        spotPrice={pairBalanceUSDC}\n        twapPrice={UNI.addr}\n        nextEpochs={nextEpochs}\n        epochTimes={epochTimes}\n        price={pairBalanceUSDC.dividedBy(pairBalancePEN)}\n      />\n\n      <Header primary={t(\"Advance Epoch\")} />\n\n      <AdvanceEpoch\n        user={user}\n        epoch={epoch}\n        epochTime={epochTime}\n        spotPrice={pairBalanceUSDC}\n        twapPrice={UNI.addr}\n        nextEpochs={nextEpochs}\n        price={pairBalanceUSDC.dividedBy(pairBalancePEN)}\n        couponPremium={couponPremium}\n        totalSupply={totalSupply}\n      />\n    </>\n  );\n}\n\nexport default EpochDetail;\n","import React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport BigNumber from \"bignumber.js\";\nimport { BalanceBlock } from \"../common\";\nimport {ownership} from \"../../utils/number\";\n\ntype CouponMarketHeaderProps = {\n  debt: BigNumber,\n  supply: BigNumber,\n  coupons: BigNumber,\n  premium: BigNumber,\n  redeemable: BigNumber,\n};\n\nfunction CouponMarketHeader ({\n  debt, supply, coupons, premium, redeemable\n}: CouponMarketHeaderProps) {\n  const { t, i18n } = useTranslation();\n  return (\n  <div style={{ padding: '2%', display: 'flex', flexWrap: 'wrap', alignItems: 'center' }}>\n    <div style={{ flexBasis: '20%' }}>\n      <BalanceBlock asset={t(\"Debt Ratio\")} balance={ownership(debt, supply)} suffix={\"%\"}/>\n    </div>\n    <div style={{ flexBasis: '20%' }}>\n      <BalanceBlock asset={t(\"Total Debt\")} balance={debt} suffix={\"PEN\"}/>\n    </div>\n    <div style={{ flexBasis: '20%' }}>\n      <BalanceBlock asset={t(\"Coupons\")} balance={coupons} />\n    </div>\n    <div style={{ flexBasis: '20%' }}>\n      <BalanceBlock asset={t(\"Premium\")} balance={premium.multipliedBy(100)} suffix={\"%\"}/>\n    </div>\n    <div style={{ flexBasis: '20%' }}>\n      <BalanceBlock asset={t(\"Redeemable\")} balance={redeemable}/>\n    </div>\n  </div>\n);\n}\n\n\nexport default CouponMarketHeader;\n","import React, { useState } from 'react';\nimport {\n  Box, Button, IconCirclePlus, IconCircleMinus\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock, MaxButton, PriceSection,\n} from '../common/index';\nimport {approve, purchaseCoupons} from '../../utils/web3';\nimport { useTranslation } from 'react-i18next';\nimport {isPos, toBaseUnitBN, toTokenUnitsBN} from '../../utils/number';\nimport {PEN, PENS} from \"../../constants/tokens\";\nimport {MAX_UINT256} from \"../../constants/values\";\nimport {getCouponPremium} from \"../../utils/infura\";\nimport BigNumberInput from \"../common/BigNumberInput\";\n\ntype PurchaseCouponsProps = {\n  user: string,\n  allowance: BigNumber,\n  balance: BigNumber,\n  debt: BigNumber,\n};\n\nfunction PurchaseCoupons({\n  user, balance, allowance, debt,\n}: PurchaseCouponsProps) {\n  const { t, i18n } = useTranslation();\n  const [purchaseAmount, setPurchaseAmount] = useState(new BigNumber(0));\n  const [premium, setPremium] = useState(new BigNumber(0));\n\n  const updatePremium = async (purchaseAmount) => {\n    if (purchaseAmount.lte(new BigNumber(0))) {\n      setPremium(new BigNumber(0));\n      return;\n    }\n    const purchaseAmountBase = toBaseUnitBN(purchaseAmount, PEN.decimals);\n    const premium = await getCouponPremium(PENS.addr, purchaseAmountBase)\n    const premiumFormatted = toTokenUnitsBN(premium, PEN.decimals);\n    setPremium(premiumFormatted);\n  };\n\n  return (\n    <Box heading={t(\"Purchase\")}>\n      {allowance.comparedTo(MAX_UINT256) === 0 ?\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\n          {/* User balance */}\n          <div style={{flexBasis: '30%'}}>\n            <BalanceBlock asset={t(`Balance`)} balance={balance} suffix={\" PEN\"}/>\n          </div>\n          <div style={{flexBasis: '38%'}}/>\n          {/* Purchase coupons */}\n          <div style={{flexBasis: '32%', paddingTop: '2%'}}>\n            <div style={{display: 'flex'}}>\n              <div style={{width: '60%', minWidth: '6em'}}>\n                <>\n                  <BigNumberInput\n                    adornment=\"PEN\"\n                    value={purchaseAmount}\n                    setter={(value) => {\n                      setPurchaseAmount(value);\n                      isPos(value) ? updatePremium(value) : updatePremium(new BigNumber(0));\n                    }}\n                  />\n                  <MaxButton\n                    onClick={() => {\n                      const maxPurchaseAmount = debt.comparedTo(balance) > 0 ? balance : debt\n                      setPurchaseAmount(maxPurchaseAmount);\n                      updatePremium(maxPurchaseAmount);\n                    }}\n                  />\n                </>\n              </div>\n              <div style={{width: '40%', minWidth: '6em'}}>\n                <Button\n                  wide\n                  icon={<IconCircleMinus/>}\n                  label={t(\"Burn\")}\n                  onClick={() => {\n                    purchaseCoupons(\n                      PENS.addr,\n                      toBaseUnitBN(purchaseAmount, PEN.decimals),\n                    );\n                  }}\n                  disabled={user === '' || debt.isZero() || balance.isZero() || !isPos(purchaseAmount)}\n                />\n              </div>\n            </div>\n            <PriceSection label={t(\"Coupons \")} amt={purchaseAmount.plus(premium)}/>\n          </div>\n        </div>\n        :\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\n          {/* User balance */}\n          <div style={{flexBasis: '30%'}}>\n            <BalanceBlock asset={t(`PEN Balance`)} balance={balance}/>\n          </div>\n          <div style={{flexBasis: '40%'}}/>\n          {/* Approve DAO to spend Døllar */}\n          <div style={{flexBasis: '30%', paddingTop: '2%'}}>\n            <Button\n              wide\n              icon={<IconCirclePlus/>}\n              label={t(\"Approve\")}\n              onClick={() => {\n                approve(PEN.addr, PENS.addr);\n              }}\n              disabled={user === ''}\n            />\n          </div>\n        </div>\n      }\n    </Box>\n  );\n}\n\nexport default PurchaseCoupons;\n","import React, {useEffect, useState} from 'react';\nimport {\n  DataView, Button, IconCirclePlus\n} from '@aragon/ui';\n\nimport {getBatchBalanceOfCoupons, getBatchCouponsExpiration, getCouponEpochs} from '../../utils/infura';\nimport {PEN, PENS} from \"../../constants/tokens\";\nimport {formatBN, toBaseUnitBN, toTokenUnitsBN} from \"../../utils/number\";\nimport BigNumber from \"bignumber.js\";\nimport {redeemCoupons} from \"../../utils/web3\";\nimport { useTranslation } from 'react-i18next';\n\ntype PurchaseHistoryProps = {\n  user: string,\n  hideRedeemed: boolean,\n  totalRedeemable: BigNumber\n};\n\nfunction PurchaseHistory({\n  user, hideRedeemed, totalRedeemable\n}: PurchaseHistoryProps) {\n  const { t, i18n } = useTranslation();\n  const [epochs, setEpochs] = useState([]);\n  const [page, setPage] = useState(0)\n  const [initialized, setInitialized] = useState(false)\n\n  //Update User balances\n  useEffect(() => {\n    if (user === '') return;\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const epochsFromEvents = await getCouponEpochs(PENS.addr, user);\n      const epochNumbers = epochsFromEvents.map(e => parseInt(e.epoch));\n      const balanceOfCoupons = await getBatchBalanceOfCoupons(PENS.addr, user, epochNumbers);\n      const couponsExpirations = await getBatchCouponsExpiration(PENS.addr, epochNumbers);\n\n      const couponEpochs = epochsFromEvents.map((epoch, i) => {\n        epoch.balance = new BigNumber(balanceOfCoupons[i]);\n        epoch.expiration = couponsExpirations[i];\n        return epoch;\n      });\n\n      if (!isCancelled) {\n        // @ts-ignore\n        setEpochs(couponEpochs);\n        setInitialized(true);\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user, totalRedeemable]);\n\n  return (\n    <DataView\n      fields={[t('Epoch'), t('Purchased'), t('Balance'), t('Expires'), '']}\n      status={ initialized ? t('default') : t('loading') }\n      // @ts-ignore\n      entries={hideRedeemed ? epochs.filter((epoch) => !epoch.balance.isZero()) : epochs}\n      entriesPerPage={10}\n      page={page}\n      onPageChange={setPage}\n      renderEntry={(epoch) => [\n        epoch.epoch.toString(),\n        formatBN(toTokenUnitsBN(epoch.coupons, PEN.decimals), 2),\n        formatBN(toTokenUnitsBN(epoch.balance, PEN.decimals), 2),\n        epoch.expiration.toString(),\n        <Button\n          icon={<IconCirclePlus />}\n          label={t(\"Redeem\")}\n          onClick={() => redeemCoupons(\n            PENS.addr,\n            epoch.epoch,\n            epoch.balance.isGreaterThan(toBaseUnitBN(totalRedeemable, PEN.decimals))\n              ? toBaseUnitBN(totalRedeemable, PEN.decimals)\n              : epoch.balance\n          )}\n          disabled={epoch.balance.isZero()}\n        />\n      ]}\n    />\n  );\n}\n\nexport default PurchaseHistory;\n","import React, { useState } from 'react';\nimport { Modal, Button, useTheme } from '@aragon/ui';\nimport { getPreference, storePreference } from \"../../utils/storage\";\nimport { COUPON_EXPIRATION } from \"../../constants/values\";\n\nfunction ModalWarning() {\n  const storedShowWarning = getPreference('showCouponWarning', '1');\n  const [showWarning, setShowWarning] = useState(storedShowWarning === '1');\n  const theme = useTheme();\n\n  return (\n    <Modal visible={showWarning} closeButton={false}>\n      <div style={{ width: '100%' }}>\n        <div style={{ fontSize: 24, padding: 3, color: theme.warning }}>\n          Warning\n        </div>\n\n        <div style={{\n          marginLeft: '3%',\n          fontSize: 16,\n          padding: 5\n        }}>\n          <div>\n            By purchasing coupons the buyer incurs significant risk of loss.\n            Coupons will only become redeemable during the next supply\n            expansion. Each expansionary epoch, a tranche of rewards are\n            reserved for coupon redemptions by the DAO. At that time, the\n            redemption process is first come, first served. Coupon redemption\n            is not guaranteed.\n          </div>\n\n          <div style={{\n            padding: 10,\n            textAlign: 'center',\n            color: theme.warningSurfaceContent\n          }}>\n            Coupons will expire worthless if not redeemed\n            within {COUPON_EXPIRATION} epochs.\n          </div>\n        </div>\n\n        <div style={{ textAlign: 'right' }}>\n          <Button\n            label={'I understand'}\n            onClick={() => {\n              storePreference('showCouponWarning', '0');\n              setShowWarning(false);\n            }}\n          />\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default ModalWarning;\n","import React, { useState, useEffect } from 'react';\nimport { Header } from '@aragon/ui';\nimport { useParams } from 'react-router-dom';\n\nimport {\n  getCouponPremium,\n  getTokenAllowance,\n  getTokenBalance,\n  getTokenTotalSupply, getTotalCoupons,\n  getTotalDebt, getTotalRedeemable,\n} from '../../utils/infura';\nimport {PEN, PENS} from \"../../constants/tokens\";\nimport CouponMarketHeader from \"./Header\";\nimport {toTokenUnitsBN} from \"../../utils/number\";\nimport BigNumber from \"bignumber.js\";\nimport PurchaseCoupons from \"./PurchaseCoupons\";\nimport PurchaseHistory from \"./PurchaseHistory\";\nimport ModalWarning from \"./ModalWarning\";\nimport IconHeader from \"../common/IconHeader\";\nimport {getPreference, storePreference} from \"../../utils/storage\";\nimport {CheckBox} from \"../common\";\nimport { useTranslation } from 'react-i18next';\n\nconst ONE_COUPON = new BigNumber(10).pow(18);\n\nfunction CouponMarket({ user }: {user: string}) {\n  const { override } = useParams();\n  if (override) {\n    user = override;\n  }\n  const { t, i18n } = useTranslation();\n  const storedHideRedeemed = getPreference('hideRedeemedCoupons', '0');\n\n  const [balance, setBalance] = useState(new BigNumber(0));\n  const [allowance, setAllowance] = useState(new BigNumber(0));\n  const [supply, setSupply] = useState(new BigNumber(0));\n  const [coupons, setCoupons] = useState(new BigNumber(0));\n  const [redeemable, setRedeemable] = useState(new BigNumber(0));\n  const [couponPremium, setCouponPremium] = useState(new BigNumber(0));\n  const [debt, setDebt] = useState(new BigNumber(0));\n  const [hideRedeemed, setHideRedeemed] = useState(storedHideRedeemed === '1');\n\n  useEffect(() => {\n    if (user === '') {\n      setBalance(new BigNumber(0));\n      setAllowance(new BigNumber(0));\n      return;\n    }\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [balanceStr, allowanceStr] = await Promise.all([\n        getTokenBalance(PEN.addr, user),\n        getTokenAllowance(PEN.addr, user, PENS.addr),\n      ]);\n\n      const userBalance = toTokenUnitsBN(balanceStr, PEN.decimals);\n\n      if (!isCancelled) {\n        setBalance(new BigNumber(userBalance));\n        setAllowance(new BigNumber(allowanceStr));\n        (new BigNumber(allowanceStr));\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [supplyStr, debtStr, couponsStr, redeemableStr] = await Promise.all([\n        getTokenTotalSupply(PEN.addr),\n        getTotalDebt(PENS.addr),\n        getTotalCoupons(PENS.addr),\n        getTotalRedeemable(PENS.addr),\n      ]);\n\n      const totalSupply = toTokenUnitsBN(supplyStr, PEN.decimals);\n      const totalDebt = toTokenUnitsBN(debtStr, PEN.decimals);\n      const totalCoupons = toTokenUnitsBN(couponsStr, PEN.decimals);\n      const totalRedeemable = toTokenUnitsBN(redeemableStr, PEN.decimals);\n\n      if (!isCancelled) {\n        setSupply(new BigNumber(totalSupply));\n        setDebt(new BigNumber(totalDebt));\n        setCoupons(new BigNumber(totalCoupons));\n        setRedeemable(new BigNumber(totalRedeemable));\n\n        if (totalDebt.isGreaterThan(new BigNumber(1))) {\n          const couponPremiumStr = await getCouponPremium(PENS.addr, ONE_COUPON)\n          setCouponPremium(toTokenUnitsBN(couponPremiumStr, PEN.decimals));\n        } else {\n          setCouponPremium(new BigNumber(0));\n        }\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <>\n      <ModalWarning/>\n\n      <IconHeader icon={<i className=\"fas fa-ticket-alt\"/>} text={t(\"Coupon Market\")}/>\n\n      <CouponMarketHeader\n        debt={debt}\n        supply={supply}\n        coupons={coupons}\n        premium={couponPremium}\n        redeemable={redeemable}\n      />\n\n      <Header primary={t(\"Purchase\")} />\n\n      <PurchaseCoupons\n        user={user}\n        allowance={allowance}\n        balance={balance}\n        debt={debt}\n      />\n\n      <div style={{ display: 'flex' }}>\n        <Header primary={t(\"Coupons\")} />\n        <div style={{ marginLeft: 'auto', alignSelf: 'flex-end' }}>\n          <CheckBox\n            text={t(\"Hide Redeemed\")}\n            onCheck={(checked) => {\n              storePreference('hideRedeemedCoupons', checked ? '1' : '0');\n              setHideRedeemed(checked);\n            }}\n            checked={hideRedeemed}\n          />\n        </div>\n      </div>\n\n      <PurchaseHistory\n        user={user}\n        hideRedeemed={hideRedeemed}\n        totalRedeemable={redeemable}\n      />\n    </>\n  );\n}\n\nexport default CouponMarket;\n","import React from 'react';\n\nimport BigNumber from \"bignumber.js\";\nimport {AddressBlock, BalanceBlock} from \"../common\";\nimport TextBlock from \"../common/TextBlock\";\nimport {ownership} from \"../../utils/number\";\nimport {GOVERNANCE_PROPOSAL_THRESHOLD} from \"../../constants/values\";\nimport { useTranslation } from 'react-i18next';\n\ntype GovernanceHeaderProps = {\n  stake: BigNumber,\n  totalStake: BigNumber,\n  accountStatus: number,\n  implementation: string\n};\n\nconst STATUS_MAP = [\"Frozen\", \"Fluid\", \"Locked\"];\n\nfunction GovernanceHeader ({\n  stake, totalStake, accountStatus, implementation\n}: GovernanceHeaderProps) {\n  const { t, i18n } = useTranslation();\n  return (\n  <div style={{ padding: '2%', display: 'flex', flexWrap: 'wrap', alignItems: 'center' }}>\n    <div style={{ flexBasis: '25%' }}>\n      <BalanceBlock asset={t(\"DAO Ownership\")} balance={ownership(stake, totalStake)} suffix=\"%\" />\n    </div>\n    <div style={{ flexBasis: '25%' }}>\n      <BalanceBlock asset={t(\"Proposal Threshold\")} balance={GOVERNANCE_PROPOSAL_THRESHOLD.multipliedBy(100)} suffix=\"%\" />\n    </div>\n    <div style={{ flexBasis: '25%' }}>\n      <TextBlock label={t(\"Status\")} text={t(STATUS_MAP[accountStatus])}/>\n    </div>\n    <div style={{ flexBasis: '25%' }}>\n      <AddressBlock label={t(\"Implementation\")} address={implementation} />\n    </div>\n  </div>\n);\n}\n\n\nexport default GovernanceHeader;\n","import {GOVERNANCE_PROPOSAL_THRESHOLD, GOVERNANCE_QUORUM} from \"../constants/values\";\nimport BigNumber from \"bignumber.js\";\n\nexport function proposalStatus(epoch, start, period, initialized, approve, reject, total): string {\n  if (start === 0) {\n    return \"N/A\";\n  }\n  if (epoch < start) {\n    return \"Unknown\";\n  }\n  if (epoch < (start + period)) {\n    return \"Voting\"\n  }\n  if (initialized) {\n    return \"Committed\"\n  }\n\n  if (epoch < (start + period)) {\n    return \"Rejected\"; // Not ended\n  }\n  if (approve.plus(reject).dividedBy(total).comparedTo(GOVERNANCE_QUORUM) < 0) {\n    return \"Rejected\"; // Didn't meet quorum\n  }\n  return approve.comparedTo(reject) > 0 ? \"Approved\" : \"Rejected\";\n}\n\nexport function canPropose(stake: BigNumber, totalStake: BigNumber): boolean {\n  return stake.div(totalStake).comparedTo(GOVERNANCE_PROPOSAL_THRESHOLD) >= 0;\n}","import React, { useState } from 'react';\nimport {\n  Box, TextInput, Button, IconToken,\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {recordVote} from '../../utils/web3';\nimport { useTranslation } from 'react-i18next';\nimport {PENS} from \"../../constants/tokens\";\nimport {canPropose} from \"../../utils/gov\";\n\ntype ProposeCandidateProps = {\n  user: string,\n  stake: BigNumber,\n  totalStake: BigNumber,\n  accountStatus: number\n};\n\nfunction plausibleCandidate(candidate: string): boolean {\n  return (/^(0x)[0-9a-fA-F]{40}$/i.test(candidate));\n}\n\nfunction ProposeCandidate({\n  user, stake, totalStake, accountStatus,\n}: ProposeCandidateProps) {\n  const [candidate, setCandidate] = useState(\"0x\");\n  const { t, i18n } = useTranslation();\n  return (\n    <Box heading={t(\"Propose\")}>\n      <div style={{display: 'flex', flexWrap: 'wrap'}}>\n        {/* User balance */}\n        <div style={{flexBasis: '62%', paddingTop: '2%'}}>\n          <>\n            <TextInput\n              wide\n              value={candidate}\n              onChange={(event) => {\n                if (event.target.value) {\n                  setCandidate(event.target.value);\n                } else {\n                  setCandidate(\"0x\");\n                }\n              }}\n            />\n          </>\n        </div>\n        <div style={{flexBasis: '6%'}}/>\n        {/* Purchase coupons */}\n        <div style={{flexBasis: '32%', paddingTop: '2%'}}>\n          <Button\n            wide\n            icon={<IconToken/>}\n            label={t(\"Propose\")}\n            onClick={() => {\n              recordVote(\n                PENS.addr,\n                candidate,\n                1 // APPROVE\n              );\n            }}\n            disabled={user === '' || !canPropose(stake, totalStake) || !plausibleCandidate(candidate) || accountStatus === 1}\n          />\n        </div>\n      </div>\n    </Box>\n  );\n}\n\nexport default ProposeCandidate;\n","import React, {useEffect, useState} from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n  Button, IconRight, DataView\n} from '@aragon/ui';\n\nimport {\n  getAllProposals,\n  getApproveFor,\n  getEpoch,\n  getIsInitialized,\n  getRejectFor,\n  getTokenTotalSupply, getTotalBondedAt\n} from '../../utils/infura';\nimport {PENS} from \"../../constants/tokens\";\nimport {AddressBlock} from \"../common\";\nimport {proposalStatus} from \"../../utils/gov\";\nimport BigNumber from \"bignumber.js\";\nimport { useTranslation } from 'react-i18next';\n\ntype CandidateHistoryProps = {\n  user: string;\n};\n\ntype Proposal = {\n  index: number\n  candidate: string,\n  account: string,\n  start: number,\n  period: number,\n  status: string\n}\n\nasync function formatProposals(epoch: number, proposals: any[]): Promise<Proposal[]> {\n  const currentTotalStake = await getTokenTotalSupply(PENS.addr);\n  const initializeds = await Promise.all(proposals.map((p) => getIsInitialized(PENS.addr, p.candidate)));\n  const approves = await Promise.all(proposals.map((p) => getApproveFor(PENS.addr, p.candidate)));\n  const rejecteds = await Promise.all(proposals.map((p) => getRejectFor(PENS.addr, p.candidate)));\n  const supplyAts = await Promise.all(proposals.map(async (p) => {\n    const at = (p.start + p.period - 1);\n    if (epoch > at) {\n      return await getTotalBondedAt(PENS.addr, at);\n    }\n    return currentTotalStake;\n  }));\n\n  for (let i = 0; i < proposals.length; i++) {\n    proposals[i].index = (proposals.length - i);\n    proposals[i].start = parseInt(proposals[i].start);\n    proposals[i].period = parseInt(proposals[i].period);\n    proposals[i].status = proposalStatus(\n      epoch,\n      proposals[i].start,\n      proposals[i].period,\n      initializeds[i],\n      new BigNumber(approves[i]),\n      new BigNumber(rejecteds[i]),\n      new BigNumber(supplyAts[i])\n    );\n  }\n  return proposals\n}\n\nfunction CandidateHistory({user}: CandidateHistoryProps) {\n  const { t, i18n } = useTranslation();\n  const history = useHistory();\n  const [proposals, setProposals] = useState<Proposal[]>([]);\n  const [page, setPage] = useState(0)\n  const [initialized, setInitialized] = useState(false)\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [epochStr, allProposals] = await Promise.all([\n        getEpoch(PENS.addr),\n        getAllProposals(PENS.addr),\n      ]);\n\n      if (!isCancelled) {\n        const formattedProposals = await formatProposals(parseInt(epochStr), allProposals);\n        setProposals(formattedProposals);\n        setInitialized(true);\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <DataView\n      fields={[t('Proposal'), t('Candidate'), t('Proposed'), t('Complete'), t('Proposer'), t('Status'), '']}\n      status={ initialized ? t('default') : t('loading') }\n      // @ts-ignore\n      entries={proposals}\n      entriesPerPage={10}\n      page={page}\n      onPageChange={setPage}\n      renderEntry={(proposal) => [\n        \"#\" + proposal.index,\n        <AddressBlock label=\"\" address={proposal.candidate} />,\n        proposal.start.toString(),\n        (proposal.start + proposal.period).toString(),\n        <AddressBlock label=\"\" address={proposal.account} />,\n        proposal.status,\n        <Button\n          wide\n          icon={<IconRight />}\n          label=\"Go To\"\n          onClick={() => {\n            history.push(`/governance/candidate/${proposal.candidate}`);\n          }}\n        />\n      ]}\n    />\n  );\n}\n\nexport default CandidateHistory;\n","import React, { useState, useEffect } from 'react';\nimport { Header } from '@aragon/ui';\n\nimport {\n  getImplementation,\n  getStatusOf,\n  getTokenBalance,\n  getTokenTotalSupply,\n} from '../../utils/infura';\nimport {PENS} from \"../../constants/tokens\";\nimport {toTokenUnitsBN} from \"../../utils/number\";\nimport BigNumber from \"bignumber.js\";\nimport GovernanceHeader from \"./Header\";\nimport ProposeCandidate from \"./ProposeCandidate\";\nimport CandidateHistory from \"./CandidateHistory\";\nimport IconHeader from \"../common/IconHeader\";\nimport {canPropose} from \"../../utils/gov\";\nimport { useTranslation } from 'react-i18next';\n\nfunction Governance({ user }: {user: string}) {\n  const { t, i18n } = useTranslation();\n  const [stake, setStake] = useState(new BigNumber(0));\n  const [totalStake, setTotalStake] = useState(new BigNumber(0));\n  const [userStatus, setUserStatus] = useState(0);\n  const [implementation, setImplementation] = useState(\"0x\");\n\n  useEffect(() => {\n    if (user === '') {\n      setStake(new BigNumber(0));\n      setUserStatus(0);\n      return;\n    }\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [statusStr, stakeStr] = await Promise.all([\n        getStatusOf(PENS.addr, user),\n        getTokenBalance(PENS.addr, user),\n      ]);\n\n      if (!isCancelled) {\n        setStake(toTokenUnitsBN(stakeStr, PENS.decimals));\n        setUserStatus(parseInt(statusStr, 10));\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [totalStakeStr, implementationStr] = await Promise.all([\n        getTokenTotalSupply(PENS.addr),\n        getImplementation(PENS.addr),\n      ]);\n\n      if (!isCancelled) {\n        setTotalStake(toTokenUnitsBN(totalStakeStr, PENS.decimals));\n        setImplementation(implementationStr)\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <>\n      <IconHeader icon={<i className=\"fas fa-poll\"/>} text={t(\"Governance\")}/>\n\n      <GovernanceHeader\n        stake={stake}\n        totalStake={totalStake}\n        accountStatus={userStatus}\n        implementation={implementation}\n      />\n\n      {\n        canPropose(stake, totalStake) ?\n          <>\n            <Header primary={t(\"Propose Candidate\")}/>\n            <ProposeCandidate\n              user={user}\n              stake={stake}\n              totalStake={totalStake}\n              accountStatus={userStatus}\n            />\n          </>\n          :\n          ''\n      }\n\n      <Header primary={t(\"Candidate History\")} />\n\n      <CandidateHistory user={user}/>\n    </>\n  );\n}\n\nexport default Governance;\n","import React from 'react';\nimport {\n  Box, Button, IconRotateLeft, IconCircleCheck, IconProhibited\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock,\n} from '../common/index';\nimport {recordVote} from '../../utils/web3';\nimport { useTranslation } from 'react-i18next';\nimport {PENS} from \"../../constants/tokens\";\nimport TextBlock from \"../common/TextBlock\";\n\ntype VoteProps = {\n  candidate: string,\n  stake: BigNumber,\n  vote: number,\n  status: number\n};\n\nconst VOTE_TYPE_MAP = [\"Undecided\", \"Approve\", \"Reject\"]\n\nfunction Vote({\n  candidate, stake, vote, status\n}: VoteProps) {\n  const { t, i18n } = useTranslation();\n  return (\n    <Box heading=\"Vote\">\n      <div style={{display: 'flex'}}>\n        {/* User stake */}\n        <div style={{width: '20%'}}>\n          <BalanceBlock asset={t(\"My Stake\")} balance={stake} suffix={ t(\"PENS\")}/>\n        </div>\n        <div style={{width: '20%'}}>\n          <TextBlock label={t(\"My Vote\")} text={t(VOTE_TYPE_MAP[vote])}/>\n        </div>\n        {/* Remove vote for candidate */}\n        <div style={{width: '18%', paddingTop: '2%'}}>\n          <Button\n            wide\n            icon={<IconRotateLeft/>}\n            label={t(\"Unvote\")}\n            onClick={() => {\n              recordVote(\n                PENS.addr,\n                candidate,\n                0 // UNDECIDED\n              );\n            }}\n            disabled={status === 1 || vote === 0 || stake.isZero()}\n          />\n        </div>\n        {/* Vote to approve candidate */}\n        <div style={{width: '3%'}} />\n        <div style={{width: '18%', paddingTop: '2%'}}>\n          <Button\n            wide\n            icon={<IconCircleCheck/>}\n            label={t(\"Accept\")}\n            onClick={() => {\n              recordVote(\n                PENS.addr,\n                candidate,\n                1 // APPROVE\n              );\n            }}\n            disabled={status === 1 || vote === 1 || stake.isZero()}\n          />\n        </div>\n        {/* Vote to reject candidate */}\n        <div style={{width: '3%'}} />\n        <div style={{width: '18%', paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n              <Button\n                wide\n                icon={<IconProhibited/>}\n                label={t(\"Reject\")}\n                onClick={() => {\n                  recordVote(\n                    PENS.addr,\n                    candidate,\n                    2 // REJECT\n                  );\n                }}\n                disabled={status === 1 || vote === 2 || stake.isZero()}\n              />\n          </div>\n        </div>\n      </div>\n    </Box>\n  );\n}\n\nexport default Vote;\n","import React from 'react';\n\nimport BigNumber from \"bignumber.js\";\nimport { BalanceBlock } from \"../common\";\n\ntype VoteHeaderProps = {\n  approveFor: BigNumber,\n  rejectFor: BigNumber,\n  totalStake: BigNumber,\n  showParticipation: boolean,\n};\n\nfunction approval(approve: BigNumber, reject: BigNumber): BigNumber {\n  return approve.multipliedBy(10000).dividedToIntegerBy(approve.plus(reject)).dividedBy(100)\n}\n\nfunction participation(approve: BigNumber, reject: BigNumber, totalStake: BigNumber): BigNumber {\n  return approve.plus(reject).multipliedBy(10000).dividedToIntegerBy(totalStake).dividedBy(100)\n}\n\nconst VoteHeader = ({\n  approveFor, rejectFor, totalStake, showParticipation\n}: VoteHeaderProps) => (\n  <div style={{ padding: '2%', display: 'flex', alignItems: 'center' }}>\n    <div style={{ width: '25%' }}>\n      <BalanceBlock asset=\"Approve\" balance={approveFor} suffix={ \"PENS\"}/>\n    </div>\n    <div style={{ width: '25%' }}>\n      <BalanceBlock asset=\"Reject\" balance={rejectFor} suffix={ \"PENS\"}/>\n    </div>\n    <div style={{ width: '25%' }}>\n      <BalanceBlock asset=\"Approval\" balance={approval(approveFor, rejectFor)} suffix=\"%\" />\n    </div>\n    {showParticipation ?\n      <div style={{width: '25%'}}>\n        <BalanceBlock asset=\"Participation\" balance={participation(approveFor, rejectFor, totalStake)} suffix=\"%\"/>\n      </div> : ''\n    }\n  </div>\n);\n\n\nexport default VoteHeader;\n","import React from 'react';\n\nimport NumberBlock from \"../common/NumberBlock\";\n\ntype CommitHeaderProps = {\n  epoch: number\n  startEpoch: number,\n  periodEpoch: number,\n};\n\nconst CommitHeader = ({\n   epoch, startEpoch, periodEpoch,\n}: CommitHeaderProps) => (\n  <div style={{ padding: '2%', display: 'flex', alignItems: 'center' }}>\n    <div style={{ width: '25%' }}>\n      <NumberBlock title=\"Epoch\" num={epoch} />\n    </div>\n    <div style={{ width: '25%' }}>\n      <NumberBlock title=\"Starts\" num={startEpoch} />\n    </div>\n    <div style={{ width: '25%' }}>\n      <NumberBlock title=\"Period\" num={periodEpoch} />\n    </div>\n  </div>\n);\n\n\nexport default CommitHeader;\n","import React from 'react';\nimport {\n  Box, Button, IconUpload\n} from '@aragon/ui';\nimport TextBlock from \"../common/TextBlock\";\nimport {PENS} from \"../../constants/tokens\";\nimport {commit} from \"../../utils/web3\";\nimport { useTranslation } from 'react-i18next';\n\ntype CommitProps = {\n  user: string,\n  candidate: string,\n  epoch: number\n  startEpoch: number,\n  periodEpoch: number,\n  initialized: boolean,\n  approved: boolean\n};\n\nfunction Commit({\n  user, candidate, epoch, startEpoch, periodEpoch, initialized, approved,\n}: CommitProps) {\n  const { t, i18n } = useTranslation();\n  function status(epoch, startEpoch, periodEpoch, initialized, approved): string {\n    if (startEpoch === 0) {\n      return \"N/A\";\n    }\n    if (epoch < startEpoch) {\n      return \"Unknown\";\n    }\n    if (epoch < (startEpoch + periodEpoch)) {\n      return \"Voting\"\n    }\n    if (initialized) {\n      return \"Committed\"\n    }\n    if (approved) {\n      return \"Approved\"\n    }\n    return \"Rejected\"\n  }\n  const s = status(epoch, startEpoch, periodEpoch, initialized, approved);\n\n  return (\n    <Box heading=\"Commit\">\n      <div style={{display: 'flex'}}>\n        {/* Status */}\n        <div style={{ width: '30%' }}>\n          <TextBlock label=\"Status\" text={s} />\n        </div>\n        <div style={{width: '40%'}} />\n        {/* Commit candidate */}\n        <div style={{width: '30%', paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n              <Button\n                wide\n                icon={<IconUpload/>}\n                label={t(\"Commit\")}\n                onClick={() => {\n                  commit(\n                    PENS.addr,\n                    candidate\n                  );\n                }}\n                disabled={user === '' || s !== 'Approved'}\n              />\n          </div>\n        </div>\n      </div>\n    </Box>\n  );\n}\n\nexport default Commit;\n","import React, { useState, useEffect } from 'react';\nimport { Header, IdentityBadge } from '@aragon/ui';\nimport { useParams } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport {\n  getApproveFor, getEpoch, getIsInitialized, getPeriodFor,\n  getRecordedVote,\n  getRejectFor, getStartFor, getStatusOf,\n  getTokenBalance,\n  getTokenTotalSupply, getTotalBondedAt\n} from '../../utils/infura';\nimport {PENS} from \"../../constants/tokens\";\nimport {toTokenUnitsBN} from \"../../utils/number\";\nimport BigNumber from \"bignumber.js\";\nimport Vote from \"./Vote\";\nimport VoteHeader from \"./VoteHeader\";\nimport CommitHeader from \"./CommitHeader\";\nimport Commit from \"./Commit\";\nimport IconHeader from \"../common/IconHeader\";\nimport {proposalStatus} from \"../../utils/gov\";\n\nfunction Candidate({ user }: {user: string}) {\n  const { t, i18n } = useTranslation();\n  const { candidate } = useParams();\n\n  const [approveFor, setApproveFor] = useState(new BigNumber(0));\n  const [rejectFor, setRejectFor] = useState(new BigNumber(0));\n  const [totalStake, setTotalStake] = useState(new BigNumber(0));\n  const [vote, setVote] = useState(0);\n  const [status, setStatus] = useState(0);\n  const [userStake, setUserStake] = useState(new BigNumber(0));\n  const [epoch, setEpoch] = useState(0);\n  const [startEpoch, setStartEpoch] = useState(0);\n  const [periodEpoch, setPeriodEpoch] = useState(0);\n  const [initialized, setInitialized] = useState(false);\n\n  useEffect(() => {\n    if (user === '') {\n      setVote(0);\n      setStatus(0);\n      setUserStake(new BigNumber(0));\n      return;\n    }\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [\n        voteStr, statusStr, userStakeStr,\n      ] = await Promise.all([\n        getRecordedVote(PENS.addr, user, candidate),\n        getStatusOf(PENS.addr, user),\n        getTokenBalance(PENS.addr, user),\n      ]);\n\n      if (!isCancelled) {\n        setVote(parseInt(voteStr, 10));\n        setStatus(parseInt(statusStr, 10));\n        setUserStake(toTokenUnitsBN(userStakeStr, PENS.decimals));\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user, candidate]);\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      let [\n        approveForStr, rejectForStr, totalStakeStr,\n        epochStr, startForStr, periodForStr, isInitialized\n      ] = await Promise.all([\n        getApproveFor(PENS.addr, candidate),\n        getRejectFor(PENS.addr, candidate),\n        getTokenTotalSupply(PENS.addr),\n        getEpoch(PENS.addr),\n        getStartFor(PENS.addr, candidate),\n        getPeriodFor(PENS.addr, candidate),\n        getIsInitialized(PENS.addr, candidate),\n      ]);\n\n      const epochN = parseInt(epochStr, 10);\n      const startN = parseInt(startForStr, 10);\n      const periodN = parseInt(periodForStr, 10);\n\n      const endsAfter = (startN + periodN - 1);\n      if (epochN > endsAfter) {\n        totalStakeStr = await getTotalBondedAt(PENS.addr, endsAfter);\n      }\n\n      if (!isCancelled) {\n        setApproveFor(toTokenUnitsBN(approveForStr, PENS.decimals));\n        setRejectFor(toTokenUnitsBN(rejectForStr, PENS.decimals));\n        setTotalStake(toTokenUnitsBN(totalStakeStr, PENS.decimals));\n        setEpoch(epochN);\n        setStartEpoch(startN);\n        setPeriodEpoch(periodN);\n        setInitialized(isInitialized);\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [candidate]);\n\n  return (\n    <>\n      <IconHeader icon={<i className=\"fas fa-poll\"/>} text={t(\"Candidate\")}/>\n      <IdentityBadge entity={candidate} shorten={false} />\n\n      <VoteHeader\n        approveFor={approveFor}\n        rejectFor={rejectFor}\n        totalStake={totalStake}\n        showParticipation={startEpoch > 106}\n      />\n\n      <Header primary={t(\"Vote\")} />\n      <Vote\n        candidate={candidate}\n        stake={userStake}\n        vote={vote}\n        status={status}\n      />\n\n      <Header primary={t(\"Commit\")} />\n      <CommitHeader\n        epoch={epoch}\n        startEpoch={startEpoch}\n        periodEpoch={periodEpoch}\n      />\n\n      <Commit\n        user={user}\n        candidate={candidate}\n        epoch={epoch}\n        startEpoch={startEpoch}\n        periodEpoch={periodEpoch}\n        initialized={initialized}\n        approved={proposalStatus(epoch, startEpoch, periodEpoch, false, approveFor, rejectFor, totalStake) === \"Approved\"}\n      />\n    </>\n  );\n}\n\nexport default Candidate;\n","import React from 'react';\n\nimport BigNumber from \"bignumber.js\";\nimport { useTranslation } from 'react-i18next';\nimport {Box, Distribution} from '@aragon/ui';\nimport {formatMoney, ownership} from \"../../utils/number\";\n\ntype RegulationHeaderProps = {\n  totalSupply: BigNumber,\n\n  totalBonded: BigNumber,\n  totalStaged: BigNumber,\n  totalRedeemable: BigNumber,\n\n  poolLiquidity: BigNumber,\n  poolRewarded: BigNumber,\n  poolClaimable: BigNumber,\n\n  legacyPoolRewarded: BigNumber,\n  legacyPoolClaimable: BigNumber,\n\n  totalDebt: BigNumber,\n  totalCoupons: BigNumber,\n  couponPremium: BigNumber,\n};\n\nconst RegulationHeader = ({\n  totalSupply,\n  totalBonded, totalStaged, totalRedeemable,\n  poolLiquidity, poolRewarded, poolClaimable,\n  legacyPoolRewarded, legacyPoolClaimable,\n  totalDebt, totalCoupons, couponPremium\n}: RegulationHeaderProps) => {\n  const { t, i18n } = useTranslation();\n  const daoTotalSupply = totalBonded.plus(totalStaged).plus(totalRedeemable);\n  const poolTotalSupply = poolLiquidity.plus(poolRewarded).plus(poolClaimable);\n  const legacyPoolTotalSupply = legacyPoolRewarded.plus(legacyPoolClaimable);\n  const circulatingSupply = totalSupply.minus(daoTotalSupply).minus(poolTotalSupply).minus(legacyPoolTotalSupply);\n\n  return (\n    <>\n      <div style={{display: 'flex', flexWrap: 'wrap'}}>\n        <div style={{ flexBasis: '25%', marginRight: '2%' }}>\n          <Box heading={t(\"Supply Allocation\")}>\n            <Distribution\n              heading={`∅${formatMoney(totalSupply.toNumber())}`}\n              items={[\n                { item: 'DAO', percentage: +(ownership(daoTotalSupply, totalSupply).toNumber().toFixed(2)) },\n                { item: 'Uniswap', percentage: +(ownership(poolTotalSupply, totalSupply).toNumber().toFixed(2)) },\n                { item: t('Circulating'), percentage: +(ownership(circulatingSupply, totalSupply).toNumber().toFixed(2)) },\n              ]}\n            />\n          </Box>\n        </div>\n        <div style={{ flexBasis: '25%', marginRight: '2%' }}>\n          <Box heading={t(\"DAO Breakdown\")}>\n            <Distribution\n              heading={`∅${formatMoney(daoTotalSupply.toNumber())}`}\n              items={[\n                { item: t('Bonded'), percentage: +(ownership(totalBonded, daoTotalSupply).toNumber().toFixed(2)) },\n                { item: t('Staged'), percentage: +(ownership(totalStaged, daoTotalSupply).toNumber().toFixed(2)) },\n                { item: t('Redeemable'), percentage: +(ownership(totalRedeemable, daoTotalSupply).toNumber().toFixed(2)) },\n              ]}\n            />\n          </Box>\n        </div>\n        <div style={{ flexBasis: '25%' }}>\n          <Box heading={t(\"Uniswap Breakdown\")}>\n            <Distribution\n              heading={`∅${formatMoney(poolTotalSupply.toNumber())}`}\n              items={[\n                { item: t('Liquidity'), percentage: +(ownership(poolLiquidity, poolTotalSupply).toNumber().toFixed(2)) },\n                { item: t('Rewarded'), percentage: +(ownership(poolRewarded, poolTotalSupply).toNumber().toFixed(2)) },\n                { item: t('Claimable'), percentage: +(ownership(poolClaimable, poolTotalSupply).toNumber().toFixed(2)) },\n              ]}\n            />\n          </Box>\n        </div>\n      </div>\n    </>\n  );\n}\n\n\nexport default RegulationHeader;\n","import React, {useEffect, useState} from 'react';\nimport { DataView } from '@aragon/ui';\nimport { useTranslation } from 'react-i18next';\nimport {getAllRegulations} from '../../utils/infura';\nimport {PEN, PENS} from \"../../constants/tokens\";\nimport {formatBN, toTokenUnitsBN} from \"../../utils/number\";\nimport BigNumber from \"bignumber.js\";\n\ntype RegulationHistoryProps = {\n  user: string,\n};\n\ntype Regulation = {\n  type: string,\n  data: RegulationEntry\n}\n\ntype RegulationEntry = {\n  epoch: string;\n  price: string;\n  deltaRedeemable: string;\n  deltaDebt: string;\n  deltaBonded: string;\n}\n\nfunction formatPrice(type, data) {\n  return type === 'NEUTRAL' ? '1.00' : formatBN(toTokenUnitsBN(new BigNumber(data.price), PEN.decimals), 3);\n}\n\nfunction formatDeltaRedeemable(type, data) {\n  return type === 'INCREASE' ?\n    '+' + formatBN(toTokenUnitsBN(new BigNumber(data.newRedeemable), PEN.decimals), 2) :\n    '+0.00';\n}\n\nfunction formatDeltaDebt(type, data) {\n  return type === 'INCREASE' ?\n    '-' + formatBN(toTokenUnitsBN(new BigNumber(data.lessDebt), PEN.decimals), 2) :\n    type === 'DECREASE' ?\n      '+' + formatBN(toTokenUnitsBN(new BigNumber(data.newDebt), PEN.decimals), 2) :\n      '+0.00';\n}\n\nfunction formatDeltaBonded(type, data) {\n  return type === 'INCREASE' ?\n    '+' + formatBN(toTokenUnitsBN(new BigNumber(data.newBonded), PEN.decimals), 2) :\n    '+0.00';\n}\n\nfunction renderEntry({ type, data }: Regulation): string[] {\n  return [\n    data.epoch.toString(),\n    formatPrice(type, data),\n    formatDeltaRedeemable(type, data),\n    formatDeltaDebt(type, data),\n    formatDeltaBonded(type, data),\n  ]\n}\n\nfunction RegulationHistory({\n  user,\n}: RegulationHistoryProps) {\n  const { t, i18n } = useTranslation();\n  const [regulations, setRegulations] = useState<Regulation[]>([]);\n  const [page, setPage] = useState(0)\n  const [initialized, setInitialized] = useState(false)\n\n  //Update User balances\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [allRegulations] = await Promise.all([\n        getAllRegulations(PENS.addr),\n      ]);\n\n      if (!isCancelled) {\n        setRegulations(allRegulations);\n        setInitialized(true);\n      }\n    }\n\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <DataView\n      fields={[t('Epoch'), t('Price'), 'Δ ' + t('Redeemable'), 'Δ '+ t('Debt'), 'Δ '+ t('Bonded')]}\n      status={ initialized ? t('default') : t('loading') }\n      entries={regulations}\n      entriesPerPage={10}\n      page={page}\n      onPageChange={setPage}\n      renderEntry={renderEntry}\n    />\n  );\n}\n\nexport default RegulationHistory;\n","import React, { useState, useEffect } from 'react';\nimport { Header } from '@aragon/ui';\nimport { useTranslation } from 'react-i18next';\nimport {\n  getCouponPremium,\n  getPoolTotalClaimable, getPoolTotalRewarded, getTokenBalance,\n  getTokenTotalSupply, getTotalBonded, getTotalCoupons, getTotalDebt, getTotalRedeemable, getTotalStaged,\n} from '../../utils/infura';\nimport {PEN, PENS, UNI} from \"../../constants/tokens\";\nimport {toTokenUnitsBN} from \"../../utils/number\";\nimport BigNumber from \"bignumber.js\";\nimport RegulationHeader from \"./Header\";\nimport RegulationHistory from \"./RegulationHistory\";\nimport IconHeader from \"../common/IconHeader\";\nimport {getLegacyPoolAddress, getPoolAddress} from \"../../utils/pool\";\n\nconst ONE_COUPON = new BigNumber(10).pow(18);\n\nfunction Regulation({ user }: {user: string}) {\n  const { t, i18n } = useTranslation();\n  const [totalSupply, setTotalSupply] = useState(new BigNumber(0));\n  const [totalBonded, setTotalBonded] = useState(new BigNumber(0));\n  const [totalStaged, setTotalStaged] = useState(new BigNumber(0));\n  const [totalRedeemable, setTotalRedeemable] = useState(new BigNumber(0));\n  const [poolLiquidity, setPoolLiquidity] = useState(new BigNumber(0));\n  const [poolTotalRewarded, setPoolTotalRewarded] = useState(new BigNumber(0));\n  const [poolTotalClaimable, setPoolTotalClaimable] = useState(new BigNumber(0));\n  const [legacyPoolTotalRewarded, setLegacyPoolTotalRewarded] = useState(new BigNumber(0));\n  const [legacyPoolTotalClaimable, setLegacyPoolTotalClaimable] = useState(new BigNumber(0));\n  const [totalDebt, setTotalDebt] = useState(new BigNumber(0));\n  const [totalCoupons, setTotalCoupons] = useState(new BigNumber(0));\n  const [couponPremium, setCouponPremium] = useState(new BigNumber(0));\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const poolAddress = await getPoolAddress();\n      const legacyPoolAddress = getLegacyPoolAddress(poolAddress);\n\n      const [\n        totalSupplyStr,\n        totalBondedStr, totalStagedStr, totalRedeemableStr,\n        poolLiquidityStr, poolTotalRewardedStr, poolTotalClaimableStr,\n        legacyPoolTotalRewardedStr, legacyPoolTotalClaimableStr,\n        totalDebtStr, totalCouponsStr\n      ] = await Promise.all([\n        getTokenTotalSupply(PEN.addr),\n\n        getTotalBonded(PENS.addr),\n        getTotalStaged(PENS.addr),\n        getTotalRedeemable(PENS.addr),\n\n        getTokenBalance(PEN.addr, UNI.addr),\n        getPoolTotalRewarded(poolAddress),\n        getPoolTotalClaimable(poolAddress),\n\n        getPoolTotalRewarded(legacyPoolAddress),\n        getPoolTotalClaimable(legacyPoolAddress),\n\n        getTotalDebt(PENS.addr),\n        getTotalCoupons(PENS.addr),\n      ]);\n\n      if (!isCancelled) {\n        setTotalSupply(toTokenUnitsBN(totalSupplyStr, PEN.decimals));\n\n        setTotalBonded(toTokenUnitsBN(totalBondedStr, PEN.decimals));\n        setTotalStaged(toTokenUnitsBN(totalStagedStr, PEN.decimals));\n        setTotalRedeemable(toTokenUnitsBN(totalRedeemableStr, PEN.decimals));\n\n        setPoolLiquidity(toTokenUnitsBN(poolLiquidityStr, PEN.decimals));\n        setPoolTotalRewarded(toTokenUnitsBN(poolTotalRewardedStr, PEN.decimals));\n        setPoolTotalClaimable(toTokenUnitsBN(poolTotalClaimableStr, PEN.decimals));\n\n        setLegacyPoolTotalRewarded(toTokenUnitsBN(legacyPoolTotalRewardedStr, PEN.decimals));\n        setLegacyPoolTotalClaimable(toTokenUnitsBN(legacyPoolTotalClaimableStr, PEN.decimals));\n\n        setTotalDebt(toTokenUnitsBN(totalDebtStr, PEN.decimals));\n        setTotalCoupons(toTokenUnitsBN(totalCouponsStr, PEN.decimals));\n\n        if (new BigNumber(totalDebtStr).isGreaterThan(ONE_COUPON)) {\n          const couponPremiumStr = await getCouponPremium(PENS.addr, ONE_COUPON)\n          setCouponPremium(toTokenUnitsBN(couponPremiumStr, PEN.decimals));\n        } else {\n          setCouponPremium(new BigNumber(0));\n        }\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <>\n      <IconHeader icon={<i className=\"fas fa-chart-area\"/>} text={t(\"Supply Regulation\")}/>\n\n      <RegulationHeader\n        totalSupply={totalSupply}\n\n        totalBonded={totalBonded}\n        totalStaged={totalStaged}\n        totalRedeemable={totalRedeemable}\n\n        poolLiquidity={poolLiquidity}\n        poolRewarded={poolTotalRewarded}\n        poolClaimable={poolTotalClaimable}\n\n        legacyPoolRewarded={legacyPoolTotalRewarded}\n        legacyPoolClaimable={legacyPoolTotalClaimable}\n\n        totalDebt={totalDebt}\n        totalCoupons={totalCoupons}\n        couponPremium={couponPremium}\n      />\n\n      <Header primary={t(\"Regulation History\")} />\n\n      <RegulationHistory\n        user={user}\n      />\n    </>\n  );\n}\n\nexport default Regulation;\n","import React, { useState } from 'react';\nimport {\n  Box, Button, IconCirclePlus, IconCircleMinus, IconLock\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock, MaxButton,\n} from '../common/index';\nimport {approve, depositPool, withdrawPool} from '../../utils/web3';\nimport {isPos, toBaseUnitBN} from '../../utils/number';\nimport {UNI} from \"../../constants/tokens\";\nimport {MAX_UINT256} from \"../../constants/values\";\nimport BigNumberInput from \"../common/BigNumberInput\";\nimport { useTranslation } from 'react-i18next';\n\ntype WithdrawDepositProps = {\n  poolAddress: string\n  user: string\n  balance: BigNumber,\n  allowance: BigNumber,\n  stagedBalance: BigNumber,\n  status: number\n};\n\nfunction WithdrawDeposit({\n  poolAddress, user, balance, allowance, stagedBalance, status\n}: WithdrawDepositProps) {\n  const { t, i18n } = useTranslation();\n  const [depositAmount, setDepositAmount] = useState(new BigNumber(0));\n  const [withdrawAmount, setWithdrawAmount] = useState(new BigNumber(0));\n\n  return (\n    <Box heading={t(\"Stage\")}>\n      {allowance.comparedTo(MAX_UINT256) === 0 ?\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\n          {/* total Issued */}\n          <div style={{flexBasis: '32%'}}>\n            <BalanceBlock asset={t(\"Staged\")} balance={stagedBalance} suffix={\"UNI-V2\"}/>\n          </div>\n          {/* Deposit UNI-V2 into Pool */}\n          <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n            <div style={{display: 'flex'}}>\n              <div style={{width: '60%', minWidth: '6em'}}>\n                <>\n                  <BigNumberInput\n                    adornment=\"UNI-V2\"\n                    value={depositAmount}\n                    setter={setDepositAmount}\n                    disabled={status !== 0}\n                  />\n                  <MaxButton\n                    onClick={() => {\n                      setDepositAmount(balance);\n                    }}\n                  />\n                </>\n              </div>\n              <div style={{width: '40%', minWidth: '7em'}}>\n                <Button\n                  wide\n                  icon={status === 0 ? <IconCirclePlus/> : <IconLock/>}\n                  label={t(\"Deposit\")}\n                  onClick={() => {\n                    depositPool(\n                      poolAddress,\n                      toBaseUnitBN(depositAmount, UNI.decimals),\n                      (hash) => setDepositAmount(new BigNumber(0))\n                    );\n                  }}\n                  disabled={poolAddress === '' || status !== 0 || !isPos(depositAmount)}\n                />\n              </div>\n            </div>\n          </div>\n          <div style={{flexBasis: '2%'}}/>\n          {/* Withdraw Døllar from DAO */}\n          <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n            <div style={{display: 'flex'}}>\n              <div style={{width: '60%', minWidth: '6em'}}>\n                <>\n                  <BigNumberInput\n                    adornment=\"UNI-V2\"\n                    value={withdrawAmount}\n                    setter={setWithdrawAmount}\n                    disabled={status !== 0}\n                  />\n                  <MaxButton\n                    onClick={() => {\n                      setWithdrawAmount(stagedBalance);\n                    }}\n                  />\n                </>\n              </div>\n              <div style={{width: '40%', minWidth: '7em'}}>\n                <Button\n                  wide\n                  icon={status === 0 ? <IconCircleMinus/> : <IconLock/>}\n                  label={t(\"Withdraw\")}\n                  onClick={() => {\n                    withdrawPool(\n                      poolAddress,\n                      toBaseUnitBN(withdrawAmount, UNI.decimals),\n                      (hash) => setWithdrawAmount(new BigNumber(0))\n                    );\n                  }}\n                  disabled={poolAddress === '' || status !== 0 || !isPos(withdrawAmount)}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        :\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\n          {/* total Issued */}\n          <div style={{flexBasis: '32%'}}>\n            <BalanceBlock asset={t(\"Staged\")} balance={stagedBalance} suffix={\"UNI-V2\"}/>\n          </div>\n          <div style={{flexBasis: '35%'}}/>\n          {/* Approve Pool to spend UNI-V2 */}\n          <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n            <Button\n              wide\n              icon={<IconCirclePlus />}\n              label={t(\"Approve\")}\n              onClick={() => {\n                approve(UNI.addr, poolAddress);\n              }}\n              disabled={poolAddress === '' || user === ''}\n            />\n          </div>\n        </div>\n      }\n    </Box>\n  );\n}\n\nexport default WithdrawDeposit;\n","import React, { useState } from 'react';\nimport {\n  Box, Button, IconCirclePlus, IconCircleMinus, IconCaution\n} from '@aragon/ui';\nimport { useTranslation } from 'react-i18next';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock, MaxButton,\n} from '../common/index';\nimport {bondPool, unbondPool} from '../../utils/web3';\nimport {isPos, toBaseUnitBN} from '../../utils/number';\nimport {UNI} from \"../../constants/tokens\";\nimport BigNumberInput from \"../common/BigNumberInput\";\nimport TextBlock from \"../common/TextBlock\";\n\ntype BondUnbondProps = {\n  poolAddress: string,\n  staged: BigNumber,\n  bonded: BigNumber,\n  status: number,\n  lockup: number,\n};\n\nfunction BondUnbond({\n  poolAddress, staged, bonded, status, lockup\n}: BondUnbondProps) {\n  const { t, i18n } = useTranslation();\n  const [bondAmount, setBondAmount] = useState(new BigNumber(0));\n  const [unbondAmount, setUnbondAmount] = useState(new BigNumber(0));\n\n  return (\n    <Box heading={t(\"Bond\")}>\n      <div style={{display: 'flex', flexWrap: 'wrap'}}>\n        {/* Total bonded */}\n        <div style={{flexBasis: '16%'}}>\n          <BalanceBlock asset={(\"Bonded\")} balance={bonded} suffix={\"UNI-V2\"} />\n        </div>\n        {/* Exit lockup */}\n        <div style={{flexBasis: '16%'}}>\n          <TextBlock label={t(\"Exit Lockup\")} text={lockup === 0 ? \"\" : lockup === 1 ? \"1 \" + t(\"epoch\") : `${lockup} ` + t(`epochs`)}/>\n        </div>\n        {/* Bond UNI-V2 within Pool */}\n        <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n            <div style={{width: '60%', minWidth: '6em'}}>\n              <>\n                <BigNumberInput\n                  adornment=\"UNI-V2\"\n                  value={bondAmount}\n                  setter={setBondAmount}\n                />\n                <MaxButton\n                  onClick={() => {\n                    setBondAmount(staged);\n                  }}\n                />\n              </>\n            </div>\n            <div style={{width: '40%', minWidth: '7em'}}>\n              <Button\n                wide\n                icon={status === 0 ? <IconCirclePlus/> : <IconCaution/>}\n                label={t(\"Bond\")}\n                onClick={() => {\n                  bondPool(\n                    poolAddress,\n                    toBaseUnitBN(bondAmount, UNI.decimals),\n                    (hash) => setBondAmount(new BigNumber(0))\n                  );\n                }}\n                disabled={poolAddress === '' || !isPos(bondAmount)}\n              />\n            </div>\n          </div>\n        </div>\n        <div style={{flexBasis: '2%'}}/>\n        {/* Unbond UNI-V2 within Pool */}\n        <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n            <div style={{width: '60%', minWidth: '6em'}}>\n              <>\n                <BigNumberInput\n                  adornment=\"UNI-V2\"\n                  value={unbondAmount}\n                  setter={setUnbondAmount}\n                />\n                <MaxButton\n                  onClick={() => {\n                    setUnbondAmount(bonded);\n                  }}\n                />\n              </>\n            </div>\n            <div style={{width: '40%', minWidth: '7em'}}>\n              <Button\n                wide\n                icon={status === 0 ? <IconCircleMinus/> : <IconCaution/>}\n                label={t(\"Unbond\")}\n                onClick={() => {\n                  unbondPool(\n                    poolAddress,\n                    toBaseUnitBN(unbondAmount, UNI.decimals),\n                    (hash) => setUnbondAmount(new BigNumber(0))\n                  );\n                }}\n                disabled={poolAddress === '' || !isPos(unbondAmount)}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n      <div style={{width: '100%', paddingTop: '2%', textAlign: 'center'}}>\n        <span style={{ opacity: 0.5 }}> {t(\"Bonding events will restart the lockup timer\")} </span>\n      </div>\n    </Box>\n  );\n}\n\nexport default BondUnbond;\n","import React from 'react';\nimport BigNumber from 'bignumber.js';\nimport { useTranslation } from 'react-i18next';\nimport { BalanceBlock } from '../common/index';\nimport TextBlock from \"../common/TextBlock\";\nimport {ownership} from \"../../utils/number\";\n\ntype PoolPageHeaderProps = {\n  accountUNIBalance: BigNumber,\n  accountBondedBalance: BigNumber,\n  accountRewardedPENBalance: BigNumber,\n  accountClaimablePENBalance: BigNumber,\n  poolTotalBonded: BigNumber,\n  accountPoolStatus: number,\n  unlocked: number,\n};\n\nconst STATUS_MAP = [\"Unlocked\", \"Locked\"];\n\n// function status(accountStatus, unlocked) {\n//   return STATUS_MAP[accountStatus] + (accountStatus === 0 ? \"\" : \" until \" + unlocked)\n// }\n\nfunction PoolPageHeader ({\n  accountUNIBalance, accountBondedBalance, accountRewardedPENBalance, accountClaimablePENBalance, poolTotalBonded, accountPoolStatus, unlocked\n}: PoolPageHeaderProps) {\n  const { t, i18n } = useTranslation();\n  return (\n  <div style={{ padding: '2%', display: 'flex', flexWrap: 'wrap', alignItems: 'center' }}>\n    <div style={{ flexBasis: '20%' }}>\n      <BalanceBlock asset={t(\"Balance\")} balance={accountUNIBalance}  suffix={\" UNI-V2\"}/>\n    </div>\n    <div style={{ flexBasis: '20%' }}>\n      <BalanceBlock asset={t(\"Rewarded\")} balance={accountRewardedPENBalance} suffix={\" PEN\"} />\n    </div>\n    <div style={{ flexBasis: '20%' }}>\n      <BalanceBlock asset={t(\"Claimable\")} balance={accountClaimablePENBalance} suffix={\" PEN\"} />\n    </div>\n    <div style={{ flexBasis: '20%' }}>\n      <BalanceBlock asset={t(\"Pool Ownership\")} balance={ownership(accountBondedBalance, poolTotalBonded)}  suffix={\"%\"}/>\n    </div>\n    <div style={{ flexBasis: '20%' }}>\n      <TextBlock label={t(\"Pool Status\")} text={t(STATUS_MAP[accountPoolStatus]) + (accountPoolStatus === 0 ? \"\" : t(\" until \") + unlocked)}/>\n    </div>\n  </div>\n);\n}\n\n\nexport default PoolPageHeader;\n","import React, { useState } from 'react';\nimport {\n  Box, Button, IconArrowDown\n} from '@aragon/ui';\nimport { useTranslation } from 'react-i18next';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock, MaxButton,\n} from '../common/index';\nimport {claimPool} from '../../utils/web3';\nimport {isPos, toBaseUnitBN} from '../../utils/number';\nimport {PEN} from \"../../constants/tokens\";\nimport BigNumberInput from \"../common/BigNumberInput\";\n\ntype ClaimProps = {\n  poolAddress: string\n  claimable: BigNumber,\n  status: number\n};\n\nfunction Claim({\n  poolAddress, claimable, status\n}: ClaimProps) {\n  const [claimAmount, setClaimAmount] = useState(new BigNumber(0));\n  const { t, i18n } = useTranslation();\n  return (\n    <Box heading={t(\"Claim\")}>\n      <div style={{display: 'flex', flexWrap: 'wrap'}}>\n        {/* total Issued */}\n        <div style={{flexBasis: '32%'}}>\n          <BalanceBlock asset={t(\"Claimable\")} balance={claimable} suffix={\"PEN\"} />\n        </div>\n        {/* Deposit UNI-V2 into Pool */}\n        <div style={{flexBasis: '35%'}}/>\n        <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n            <div style={{width: '60%', minWidth: '6em'}}>\n              <>\n                <BigNumberInput\n                  adornment=\"PEN\"\n                  value={claimAmount}\n                  setter={setClaimAmount}\n                  disabled={status !== 0}\n                />\n                <MaxButton\n                  onClick={() => {\n                    setClaimAmount(claimable);\n                  }}\n                />\n              </>\n            </div>\n            <div style={{width: '40%', minWidth: '6em'}}>\n              <Button\n                wide\n                icon={<IconArrowDown/>}\n                label={t(\"Claim\")}\n                onClick={() => {\n                  claimPool(\n                    poolAddress,\n                    toBaseUnitBN(claimAmount, PEN.decimals),\n                    (hash) => setClaimAmount(new BigNumber(0))\n                  );\n                }}\n                disabled={poolAddress === '' || status !== 0 || !isPos(claimAmount)}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n      <div style={{width: '100%', paddingTop: '2%', textAlign: 'center'}}>\n        <span style={{ opacity: 0.5 }}> {t(\"Unbond to make rewards claimable after your status is Unlocked\")} </span>\n      </div>\n    </Box>\n  );\n}\n\nexport default Claim;\n","import React, { useState } from 'react';\nimport {\n  Box, Button, IconArrowUp, IconCirclePlus\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock, MaxButton, PriceSection,\n} from '../common/index';\nimport {approve, providePool} from '../../utils/web3';\nimport {isPos, toBaseUnitBN, toTokenUnitsBN} from '../../utils/number';\nimport {PEN, USDC} from \"../../constants/tokens\";\nimport {MAX_UINT256} from \"../../constants/values\";\nimport BigNumberInput from \"../common/BigNumberInput\";\nimport { useTranslation } from 'react-i18next';\n\ntype ProvideProps = {\n  poolAddress: string,\n  user: string,\n  rewarded: BigNumber,\n  pairBalancePEN: BigNumber,\n  pairBalanceUSDC: BigNumber,\n  userUSDCBalance: BigNumber,\n  userUSDCAllowance: BigNumber,\n  status: number,\n};\n\nfunction Provide({\n  poolAddress, user, rewarded, pairBalancePEN, pairBalanceUSDC, userUSDCBalance, userUSDCAllowance, status\n}: ProvideProps) {\n  const { t, i18n } = useTranslation();\n  const [provideAmount, setProvideAmount] = useState(new BigNumber(0));\n  const [usdcAmount, setUsdcAmount] = useState(new BigNumber(0));\n\n  const USDCToPENRatio = pairBalanceUSDC.isZero() ? new BigNumber(1) : pairBalanceUSDC.div(pairBalancePEN);\n\n  const onChangeAmountPEN = (amountPEN) => {\n    if (!amountPEN) {\n      setProvideAmount(new BigNumber(0));\n      setUsdcAmount(new BigNumber(0));\n      return;\n    }\n\n    const amountPENBN = new BigNumber(amountPEN)\n    setProvideAmount(amountPENBN);\n\n    const amountPENBU = toBaseUnitBN(amountPENBN, PEN.decimals);\n    const newAmountUSDC = toTokenUnitsBN(\n      amountPENBU.multipliedBy(USDCToPENRatio).integerValue(BigNumber.ROUND_FLOOR),\n      PEN.decimals);\n    setUsdcAmount(newAmountUSDC);\n  };\n\n  return (\n    <Box heading={t(\"Provide\")}>\n      {userUSDCAllowance.comparedTo(MAX_UINT256.dividedBy(2)) > 0 ?\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\n          {/* total rewarded */}\n          <div style={{flexBasis: '32%'}}>\n            <BalanceBlock asset={t(\"Rewarded\")} balance={rewarded} suffix={\"PEN\"} />\n          </div>\n          <div style={{flexBasis: '33%'}}>\n            <BalanceBlock asset={t(\"USDC Balance\")} balance={userUSDCBalance} suffix={\"USDC\"} />\n          </div>\n          <div style={{flexBasis: '2%'}}/>\n          {/* Provide liquidity using Pool rewards */}\n          <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n            <div style={{display: 'flex'}}>\n              <div style={{width: '60%', minWidth: '6em'}}>\n                <>\n                  <BigNumberInput\n                    adornment=\"PEN\"\n                    value={provideAmount}\n                    setter={onChangeAmountPEN}\n                    disabled={status === 1}\n                  />\n                  <PriceSection label={t(\"Requires \")} amt={usdcAmount} symbol=\" USDC\"/>\n                  <MaxButton\n                    onClick={() => {\n                      onChangeAmountPEN(rewarded);\n                    }}\n                  />\n                </>\n              </div>\n              <div style={{width: '40%', minWidth: '6em'}}>\n                <Button\n                  wide\n                  icon={<IconArrowUp/>}\n                  label={t(\"Provide\")}\n                  onClick={() => {\n                    providePool(\n                      poolAddress,\n                      toBaseUnitBN(provideAmount, PEN.decimals),\n                      (hash) => setProvideAmount(new BigNumber(0))\n                    );\n                  }}\n                  disabled={poolAddress === '' || status !== 0 || !isPos(provideAmount) || usdcAmount.isGreaterThan(userUSDCBalance)}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        :\n        <div style={{display: 'flex', flexWrap: 'wrap'}}>\n          {/* total rewarded */}\n          <div style={{flexBasis: '32%'}}>\n            <BalanceBlock asset={t(\"Rewarded\")} balance={rewarded} suffix={\"PEN\"} />\n          </div>\n          <div style={{flexBasis: '33%'}}>\n            <BalanceBlock asset={t(\"USDC Balance\")} balance={userUSDCBalance} suffix={\"USDC\"} />\n          </div>\n          <div style={{flexBasis: '2%'}}/>\n          {/* Approve Pool to spend USDC */}\n          <div style={{flexBasis: '33%', paddingTop: '2%'}}>\n            <Button\n              wide\n              icon={<IconCirclePlus/>}\n              label={t(\"Approve\")}\n              onClick={() => {\n                approve(USDC.addr, poolAddress);\n              }}\n              disabled={poolAddress === '' || user === ''}\n            />\n          </div>\n        </div>\n      }\n      <div style={{width: '100%', paddingTop: '2%', textAlign: 'center'}}>\n        <span style={{ opacity: 0.5 }}> {t(\"Zap your rewards directly to LP by providing more USDC\")} </span>\n      </div>\n    </Box>\n  );\n}\n\nexport default Provide;\n","import React, { useState } from 'react';\nimport {\n  Box, Button, IconArrowDown, IconCircleMinus,\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  BalanceBlock,\n} from '../common/index';\nimport { useTranslation } from 'react-i18next';\nimport {claimPool, unbondPool, withdrawPool} from '../../utils/web3';\nimport {isPos, toBaseUnitBN} from '../../utils/number';\nimport {PEN, UNI} from \"../../constants/tokens\";\n\ntype MigrateProps = {\n  legacyPoolAddress: string,\n  staged: BigNumber,\n  claimable: BigNumber,\n  bonded: BigNumber,\n  status: number,\n  isRewardNegative: boolean,\n};\n\nfunction Migrate({\n  legacyPoolAddress, staged, claimable, bonded, status, isRewardNegative\n}: MigrateProps) {\n  const [unbonded, setUnbonded] = useState(false);\n  const [withdrawn, setWithdrawn] = useState(false);\n  const [claimed, setClaimed] = useState(false);\n  const { t, i18n } = useTranslation();\n  return (\n    <Box heading={t(\"Migrate\")}>\n      <div style={{display: 'flex', flexWrap: 'wrap'}}>\n        {/* Unbond UNI-V2 within Pool */}\n        <div style={{flexBasis: '32%', paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n            <div style={{width: '60%'}}>\n              <BalanceBlock asset={t(\"Bonded\")} balance={bonded} suffix={\"UNI-V2\"} />\n              <Button\n                wide\n                icon={<IconCircleMinus/>}\n                label={t(\"Unbond\")}\n                onClick={() => {\n                  unbondPool(\n                    legacyPoolAddress,\n                    toBaseUnitBN(bonded, UNI.decimals),\n                    (hash) => setUnbonded(hash.length > 0)\n                  );\n                }}\n                disabled={legacyPoolAddress === '' || !isPos(bonded) || unbonded || isRewardNegative}\n              />\n            </div>\n          </div>\n        </div>\n        {/* Withdraw UNI-V2 within Pool */}\n        <div style={{flexBasis: '32%', paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n            <div style={{width: '60%'}}>\n              <BalanceBlock asset={t(\"Staged\")} balance={staged} suffix={\"UNI-V2\"} />\n              <Button\n                wide\n                icon={<IconCircleMinus/>}\n                label={t(\"Withdraw\")}\n                onClick={() => {\n                  withdrawPool(\n                    legacyPoolAddress,\n                    toBaseUnitBN(staged, UNI.decimals),\n                    (hash) => setWithdrawn(hash.length > 0)\n                  );\n                }}\n                disabled={legacyPoolAddress === '' || !isPos(staged) || withdrawn || status !== 0}\n              />\n            </div>\n          </div>\n        </div>\n        {/* Claim PEN within Pool */}\n        <div style={{flexBasis: '32%', paddingTop: '2%'}}>\n          <div style={{display: 'flex'}}>\n            <div style={{width: '60%'}}>\n              <BalanceBlock asset={t(\"Claimable\")} balance={claimable} suffix={\"PEN\"} />\n              <Button\n                wide\n                icon={<IconArrowDown/>}\n                label={t(\"Claim\")}\n                onClick={() => {\n                  claimPool(\n                    legacyPoolAddress,\n                    toBaseUnitBN(claimable, PEN.decimals),\n                    (hash) => setClaimed(hash.length > 0)\n                  );\n                }}\n                disabled={legacyPoolAddress === '' || !isPos(claimable) || claimed || status !== 0}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </Box>\n  );\n}\n\nexport default Migrate;\n","import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport BigNumber from 'bignumber.js';\nimport {\n  getPoolBalanceOfBonded, getPoolBalanceOfClaimable,\n  getPoolBalanceOfRewarded,\n  getPoolBalanceOfStaged,\n  getPoolStatusOf, getPoolTotalBonded,\n  getTokenAllowance,\n  getTokenBalance,\n  getPoolFluidUntil\n} from '../../utils/infura';\nimport {PEN, UNI, USDC} from \"../../constants/tokens\";\nimport {POOL_EXIT_LOCKUP_EPOCHS} from \"../../constants/values\";\nimport { toTokenUnitsBN } from '../../utils/number';\nimport { Header } from '@aragon/ui';\nimport { useTranslation } from 'react-i18next';\nimport WithdrawDeposit from \"./WithdrawDeposit\";\nimport BondUnbond from \"./BondUnbond\";\nimport PoolPageHeader from \"./Header\";\nimport Claim from \"./Claim\";\nimport Provide from \"./Provide\";\nimport IconHeader from \"../common/IconHeader\";\nimport Migrate from \"./Migrate\";\nimport {getLegacyPoolAddress, getPoolAddress} from \"../../utils/pool\";\nimport {DollarPool4} from \"../../constants/contracts\";\n\n\n\nfunction Pool({ user }: {user: string}) {\n  const { override } = useParams();\n  if (override) {\n    user = override;\n  }\n  const { t, i18n } = useTranslation();\n  const [poolAddress, setPoolAddress] = useState(\"\");\n  const [poolTotalBonded, setPoolTotalBonded] = useState(new BigNumber(0));\n  const [pairBalancePEN, setPairBalancePEN] = useState(new BigNumber(0));\n  const [pairBalanceUSDC, setPairBalanceUSDC] = useState(new BigNumber(0));\n  const [userUNIBalance, setUserUNIBalance] = useState(new BigNumber(0));\n  const [userUNIAllowance, setUserUNIAllowance] = useState(new BigNumber(0));\n  const [userUSDCBalance, setUserUSDCBalance] = useState(new BigNumber(0));\n  const [userUSDCAllowance, setUserUSDCAllowance] = useState(new BigNumber(0));\n  const [userStagedBalance, setUserStagedBalance] = useState(new BigNumber(0));\n  const [userBondedBalance, setUserBondedBalance] = useState(new BigNumber(0));\n  const [userRewardedBalance, setUserRewardedBalance] = useState(new BigNumber(0));\n  const [userClaimableBalance, setUserClaimableBalance] = useState(new BigNumber(0));\n  const [userStatus, setUserStatus] = useState(0);\n  const [userStatusUnlocked, setUserStatusUnlocked] = useState(0);\n  const [legacyUserStagedBalance, setLegacyUserStagedBalance] = useState(new BigNumber(0));\n  const [legacyUserBondedBalance, setLegacyUserBondedBalance] = useState(new BigNumber(0));\n  const [legacyUserRewardedBalance, setLegacyUserRewardedBalance] = useState(new BigNumber(0));\n  const [legacyUserClaimableBalance, setLegacyUserClaimableBalance] = useState(new BigNumber(0));\n  const [legacyUserStatus, setLegacyUserStatus] = useState(0);\n  const [lockup, setLockup] = useState(0);\n\n  //Update User balances\n  useEffect(() => {\n    if (user === '') {\n      setPoolAddress(\"\");\n      setPoolTotalBonded(new BigNumber(0));\n      setPairBalancePEN(new BigNumber(0));\n      setPairBalanceUSDC(new BigNumber(0));\n      setUserUNIBalance(new BigNumber(0));\n      setUserUNIAllowance(new BigNumber(0));\n      setUserUSDCBalance(new BigNumber(0));\n      setUserUSDCAllowance(new BigNumber(0));\n      setUserStagedBalance(new BigNumber(0));\n      setUserBondedBalance(new BigNumber(0));\n      setUserRewardedBalance(new BigNumber(0));\n      setUserClaimableBalance(new BigNumber(0));\n      setUserStatus(0);\n      setUserStatusUnlocked(0);\n      setLegacyUserStagedBalance(new BigNumber(0));\n      setLegacyUserBondedBalance(new BigNumber(0));\n      setLegacyUserRewardedBalance(new BigNumber(0));\n      setLegacyUserClaimableBalance(new BigNumber(0));\n      setLegacyUserStatus(0);\n      return;\n    }\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const poolAddressStr = await getPoolAddress();\n      setPoolAddress(poolAddressStr);\n      const legacyPoolAddress = getLegacyPoolAddress(poolAddressStr);\n\n      const [\n        poolTotalBondedStr, pairBalancePENStr, pairBalanceUSDCStr, balance, usdcBalance,\n        allowance, usdcAllowance, stagedBalance, bondedBalance,\n        rewardedBalance, claimableBalance, status, fluidUntilStr,\n        legacyStagedBalance, legacyBondedBalance, legacyRewardedBalance, legacyClaimableBalance, legacyStatus\n      ] = await Promise.all([\n        getPoolTotalBonded(poolAddressStr),\n        getTokenBalance(PEN.addr, UNI.addr),\n        getTokenBalance(USDC.addr, UNI.addr),\n        getTokenBalance(UNI.addr, user),\n        getTokenBalance(USDC.addr, user),\n\n        getTokenAllowance(UNI.addr, user, poolAddressStr),\n        getTokenAllowance(USDC.addr, user, poolAddressStr),\n        getPoolBalanceOfStaged(poolAddressStr, user),\n        getPoolBalanceOfBonded(poolAddressStr, user),\n\n        getPoolBalanceOfRewarded(poolAddressStr, user),\n        getPoolBalanceOfClaimable(poolAddressStr, user),\n        getPoolStatusOf(poolAddressStr, user),\n        getPoolFluidUntil(poolAddressStr, user),\n\n        getPoolBalanceOfStaged(legacyPoolAddress, user),\n        getPoolBalanceOfBonded(legacyPoolAddress, user),\n        getPoolBalanceOfRewarded(legacyPoolAddress, user),\n        getPoolBalanceOfClaimable(legacyPoolAddress, user),\n        getPoolStatusOf(legacyPoolAddress, user)\n      ]);\n\n      const poolTotalBonded = toTokenUnitsBN(poolTotalBondedStr, PEN.decimals);\n      const pairPENBalance = toTokenUnitsBN(pairBalancePENStr, PEN.decimals);\n      const pairUSDCBalance = toTokenUnitsBN(pairBalanceUSDCStr, USDC.decimals);\n      const userUNIBalance = toTokenUnitsBN(balance, UNI.decimals);\n      const userUSDCBalance = toTokenUnitsBN(usdcBalance, USDC.decimals);\n      const userStagedBalance = toTokenUnitsBN(stagedBalance, UNI.decimals);\n      const userBondedBalance = toTokenUnitsBN(bondedBalance, UNI.decimals);\n      const userRewardedBalance = toTokenUnitsBN(rewardedBalance, PEN.decimals);\n      const userClaimableBalance = toTokenUnitsBN(claimableBalance, PEN.decimals);\n      const userStatus = parseInt(status, 10);\n      const fluidUntil = parseInt(fluidUntilStr, 10);\n      const legacyUserStagedBalance = toTokenUnitsBN(legacyStagedBalance, UNI.decimals);\n      const legacyUserBondedBalance = toTokenUnitsBN(legacyBondedBalance, UNI.decimals);\n      const legacyUserRewardedBalance = toTokenUnitsBN(legacyRewardedBalance, UNI.decimals);\n      const legacyUserClaimableBalance = toTokenUnitsBN(legacyClaimableBalance, PEN.decimals);\n      const legacyUserStatus = parseInt(legacyStatus, 10);\n\n      if (!isCancelled) {\n        setPoolAddress(poolAddressStr);\n        setPoolTotalBonded(new BigNumber(poolTotalBonded));\n        setPairBalancePEN(new BigNumber(pairPENBalance));\n        setPairBalanceUSDC(new BigNumber(pairUSDCBalance));\n        setUserUNIBalance(new BigNumber(userUNIBalance));\n        setUserUNIAllowance(new BigNumber(allowance));\n        setUserUSDCAllowance(new BigNumber(usdcAllowance));\n        setUserUSDCBalance(new BigNumber(userUSDCBalance));\n        setUserStagedBalance(new BigNumber(userStagedBalance));\n        setUserBondedBalance(new BigNumber(userBondedBalance));\n        setUserRewardedBalance(new BigNumber(userRewardedBalance));\n        setUserClaimableBalance(new BigNumber(userClaimableBalance));\n        setUserStatus(userStatus);\n        setUserStatusUnlocked(fluidUntil);\n        setLegacyUserStagedBalance(new BigNumber(legacyUserStagedBalance));\n        setLegacyUserBondedBalance(new BigNumber(legacyUserBondedBalance));\n        setLegacyUserRewardedBalance(new BigNumber(legacyUserRewardedBalance));\n        setLegacyUserClaimableBalance(new BigNumber(legacyUserClaimableBalance));\n        setLegacyUserStatus(legacyUserStatus);\n        setLockup(poolAddressStr === DollarPool4 ? POOL_EXIT_LOCKUP_EPOCHS : 1);\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n  // Check for error in .call()\n  const isRewardedNegative = legacyUserRewardedBalance.isGreaterThan(new BigNumber(\"1000000000000000000\"));\n  const hasLegacyBalance = legacyUserStagedBalance.isGreaterThan(0) || legacyUserClaimableBalance.isGreaterThan(0) || legacyUserBondedBalance.isGreaterThan(0);\n  return (\n    <>\n      <IconHeader icon={<i className=\"fas fa-parachute-box\"/>} text={t(\"LP Reward Pool\")}/>\n\n      {hasLegacyBalance ?\n        <>\n          <Header primary={t(\"Legacy Pool Migration\")}/>\n\n          <Migrate\n            legacyPoolAddress={getLegacyPoolAddress(poolAddress)}\n            isRewardNegative={isRewardedNegative}\n            staged={legacyUserStagedBalance}\n            claimable={legacyUserClaimableBalance}\n            bonded={legacyUserBondedBalance}\n            status={legacyUserStatus}\n          />\n        </>\n        : ''}\n\n      <PoolPageHeader\n        accountUNIBalance={userUNIBalance}\n        accountBondedBalance={userBondedBalance}\n        accountRewardedPENBalance={userRewardedBalance}\n        accountClaimablePENBalance={userClaimableBalance}\n        poolTotalBonded={poolTotalBonded}\n        accountPoolStatus={userStatus}\n        unlocked={userStatusUnlocked}\n      />\n\n      <WithdrawDeposit\n        poolAddress={poolAddress}\n        user={user}\n        balance={userUNIBalance}\n        allowance={userUNIAllowance}\n        stagedBalance={userStagedBalance}\n        status={userStatus}\n      />\n\n      <BondUnbond\n        poolAddress={poolAddress}\n        staged={userStagedBalance}\n        bonded={userBondedBalance}\n        status={userStatus}\n        lockup={lockup}\n      />\n\n      <Claim\n        poolAddress={poolAddress}\n        claimable={userClaimableBalance}\n        status={userStatus}\n      />\n\n      <Provide\n        poolAddress={poolAddress}\n        user={user}\n        rewarded={isRewardedNegative ? new BigNumber(0) : userRewardedBalance}\n        status={userStatus}\n        pairBalancePEN={pairBalancePEN}\n        pairBalanceUSDC={pairBalanceUSDC}\n        userUSDCBalance={userUSDCBalance}\n        userUSDCAllowance={userUSDCAllowance}\n      />\n    </>\n  );\n}\n\nexport default Pool;\n","import React from 'react';\nimport {\n  Box, LinkBase, Tag,\n} from '@aragon/ui';\nimport { useTranslation } from 'react-i18next';\n\nfunction HomePageNoWeb3() {\n  const { t, i18n } = useTranslation();\n  return (\n    <>\n      <div style={{ padding: '1%', display: 'flex', alignItems: 'center' }}>\n        <MainButton\n          title={t(\"No web3 wallet detected\")}\n          description={t(\"Click to get Metamask.\")}\n          icon={<i className=\"fas fa-times-circle\"/>}\n          onClick={() => {\n            // @ts-ignore\n            window.location = 'https://www.metamask.io/';\n          }}\n        />\n      </div>\n    </>\n  );\n}\n\ntype MainButtonPropx = {\n  title: string,\n  description: string,\n  icon: any,\n  onClick: Function,\n  tag?:string\n}\n\nfunction MainButton({\n  title, description, icon, onClick, tag,\n}:MainButtonPropx) {\n  return (\n    <LinkBase onClick={onClick} style={{ width: '100%' }}>\n      <Box>\n        <div style={{ padding: 10, fontSize: 18 }}>\n          {title}\n          {tag ? <Tag>{tag}</Tag> : <></>}\n        </div>\n        <span style={{ fontSize: 48 }}>\n          {icon}\n        </span>\n        {/*<img alt=\"icon\" style={{ padding: 10, height: 64 }} src={iconUrl} />*/}\n        <div style={{ paddingTop: 5, opacity: 0.5 }}>\n          {' '}\n          {description}\n          {' '}\n        </div>\n\n      </Box>\n    </LinkBase>\n  );\n}\n\nexport default HomePageNoWeb3;\n","import React, {useEffect, useState} from 'react';\n\nimport { HashRouter as Router, Switch, Route } from 'react-router-dom';\nimport { Main, Layout } from '@aragon/ui';\nimport { UseWalletProvider } from 'use-wallet';\nimport { updateModalMode } from './utils/web3';\nimport { storePreference, getPreference } from './utils/storage';\nimport NavBar from './components/NavBar';\nimport HomePage from './components/HomePage';\nimport Trade from './components/Trade/index';\nimport Footer from './components/Footer';\nimport Wallet from \"./components/Wallet\";\nimport EpochDetail from \"./components/EpochDetail\";\nimport CouponMarket from \"./components/CouponMarket\";\nimport Governance from \"./components/Governance\";\nimport Candidate from \"./components/Candidate\";\nimport Regulation from \"./components/Regulation\";\nimport Pool from \"./components/Pool\";\nimport HomePageNoWeb3 from \"./components/HomePageNoWeb3\";\n\nfunction App() {\n  const storedTheme = getPreference('theme', 'light');\n\n  const [hasWeb3, setHasWeb3] = useState(false);\n  const [user, setUser] = useState(''); // the current connected user\n  const [theme, setTheme] = useState(storedTheme);\n\n  const updateTheme = (newTheme: string) => {\n    setTheme(newTheme);\n    updateModalMode(newTheme);\n    storePreference('theme', newTheme);\n  };\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      if (!isCancelled) {\n        // @ts-ignore\n        setHasWeb3(typeof window.ethereum !== '0');\n      }\n    }\n\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [user]);\n\n  return (\n    <Router>\n      <UseWalletProvider\n        chainId={1}\n        connectors={{\n          walletconnect: { rpcUrl: 'https://mainnet.eth.aragon.network/' },\n          walletlink: {\n            url: 'https://mainnet.eth.aragon.network/',\n            appName:'Coinbase Wallet',\n            appLogoUrl: ''\n          }\n        }}\n      >\n        <Main assetsUrl={`${process.env.PUBLIC_URL}/aragon-ui/`} theme={theme} layout={false}>\n          <NavBar hasWeb3={hasWeb3} user={user} setUser={setUser} />\n          <Layout>\n          {\n            hasWeb3 ?\n              <Switch>\n                <Route path=\"/dao/:override\"><Wallet user={user}/></Route>\n                <Route path=\"/dao/\"><Wallet user={user}/></Route>\n                <Route path=\"/epoch/\"><EpochDetail user={user}/></Route>\n                <Route path=\"/coupons/:override\"><CouponMarket user={user}/></Route>\n                <Route path=\"/coupons/\"><CouponMarket user={user}/></Route>\n                <Route path=\"/governance/candidate/:candidate\"><Candidate user={user}/></Route>\n                <Route path=\"/governance/\"><Governance user={user}/></Route>\n                <Route path=\"/trade/\"><Trade user={user}/></Route>\n                <Route path=\"/regulation/\"><Regulation user={user}/></Route>\n                <Route path=\"/pool/:override\"><Pool user={user}/></Route>\n                <Route path=\"/pool/\"><Pool user={user}/></Route>\n                <Route path=\"/\"><HomePage user={user}/></Route>\n              </Switch>\n              :\n              <Switch>\n                <Route path=\"/\"><HomePageNoWeb3/></Route>\n              </Switch>\n          }\n          </Layout>\n          {/* <div style={{height: '128px', width: '100%'}}/>\n          <Footer hasWeb3={hasWeb3} theme={theme} updateTheme={updateTheme}/> */}\n        </Main>\n      </UseWalletProvider>\n    </Router>\n  );\n}\n\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import i18n from \"i18next\";\r\nimport { initReactI18next } from \"react-i18next\";\r\n\r\nimport translationEN from './en/Translation.json';\r\nimport translationSCH from './sch/Translation.json';\r\n\r\n// the translations\r\nconst resources = {\r\n  en: {\r\n    translation: translationEN\r\n  },\r\n  sch: {\r\n    translation: translationSCH\r\n  }\r\n};\r\n\r\ni18n\r\n  .use(initReactI18next) // passes i18n down to react-i18next\r\n  .init({\r\n    resources,\r\n    lng: \"en\",\r\n\r\n    keySeparator: false, // we do not use keys in form messages.welcome\r\n\r\n    interpolation: {\r\n      escapeValue: false // react already safes from xss\r\n    }\r\n  });\r\n\r\nexport default i18n;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'react-widgets/dist/css/react-widgets.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport Moment from 'moment'\nimport momentLocalizer from 'react-widgets-moment';\nimport './locales/i18n';\n\nMoment.locale('en')\nmomentLocalizer()\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}